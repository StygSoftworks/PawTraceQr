const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-Bq8OKPcv.js","assets/index-BRVJtlpg.js","assets/index-C-ywSAjq.css","assets/qr-code-styling-KH12ivli.js"])))=>i.map(i=>d[i]);
import{c as W,j as n,u as Ke,_ as Me,r as d,s as A,a as _t,D as Fe,b as _r,T as Mr}from"./index-BRVJtlpg.js";import{u as Xe}from"./useQuery-c4uI0-mw.js";import{u as Qe}from"./useMutation-Co3zS-iv.js";import{C as ce,a as de,b as ue,c as ze,d as te}from"./card-DshrSqe_.js";import{B as Se}from"./badge-DIipK7_n.js";import{T as Dr,a as Er,b as qe,c as Ae}from"./tabs-gCXH3rtx.js";import{B as F}from"./button-DUMchw-5.js";import{S as U}from"./skeleton-BRnEF_O2.js";import{A as Mt,a as Dt,b as Et,c as Ot,d as Tt,e as Rt,f as Ft,g as qt,T as At}from"./alert-dialog-Bmbe1G0J.js";import{S as Wt,P as ot,a as Or}from"./switch-C4q2cqjK.js";import{L as I,I as V}from"./input-DV6Lx3xV.js";import{A as It,a as $t}from"./alert-DEob-oMN.js";import{l as Tr,D as Lt,a as Bt,b as Yt,c as Qt,d as zt,e as Vt,M as We,C as Rr,E as Fr}from"./dialog-D5yc6YIT.js";import{c as q,a as B}from"./createLucideIcon-BgXVvUV3.js";import{S as Ht,a as Gt,b as Ut,c as Kt,d as Ce}from"./select-CnLJr6RH.js";import{T as Ve}from"./triangle-alert-X-gCyETJ.js";import{M as qr,c as Xt,R as Ar,A as Jt,C as Wr,a as Ir}from"./index-C_LFyRAi.js";import{P as $r}from"./phone-BWCr68GR.js";import{E as Zt}from"./eye-DuuSYAst.js";import{u as Lr,a as Br,o as it,s as z,b as Yr,_ as Qr,c as zr,n as Vr,d as Hr,e as Gr}from"./zod-Bwzn1Ekw.js";import{T as Ur}from"./textarea-C2rwPglu.js";import{u as Kr,c as Xr,a as re,b as ve}from"./index-BvAaMg5g.js";import{u as er,c as Jr,a as ye}from"./index-mxaHoGKo.js";import{P as Zr,h as ea,R as ta,u as ra,F as aa,D as na}from"./index-Cxw8zBuL.js";import{P as tr}from"./index-lo5kFSbA.js";import{P as H}from"./index-CTgvODyT.js";import{R as sa,P as oa,O as ia,C as la}from"./index-C5GlQzlz.js";import{S as Ie}from"./separator-BmWluulQ.js";import{X as ca}from"./x-CPhmQE-z.js";import{P as ee}from"./paw-print-C47de1d9.js";import{C as Pe}from"./circle-alert-i5aifV0x.js";import{F as da}from"./file-text-Cgds61nj.js";import{C as ua}from"./check-CrdpHNud.js";import"./index-DeNaGSop.js";import"./index-DELqvLaR.js";import"./chevron-down-hlDrPeqJ.js";import"./chevron-up-BPkY7IkA.js";const ma=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],lt=q("activity",ma);const ha=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],fa=q("archive",ha);const pa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ga=q("calendar",pa);const xa=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ba=q("camera",xa);const va=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],ya=q("chevrons-up-down",va);const wa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ja=q("circle",wa);const Na=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ka=q("copy",Na);const Ca=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ct=q("download",Ca);const Pa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Sa=q("image",Pa);const _a=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dt=q("plus",_a);const Ma=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],rr=q("qr-code",Ma);const Da=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Je=q("refresh-cw",Da);const Ea=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Oa=q("search",Ea);const Ta=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ra=q("square-pen",Ta);const Fa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],qa=q("square",Fa);const Aa=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],Wa=q("syringe",Aa);const Ia=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$a=q("upload",Ia);const La=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Ba=q("weight",La);function Ya(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("w-full caption-bottom text-sm",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:n.jsx("table",{"data-slot":"table",className:s,...a})}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function Qa(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("[&_tr]:border-b",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx("thead",{"data-slot":"table-header",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function za(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("[&_tr:last-child]:border-0",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx("tbody",{"data-slot":"table-body",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function ar(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx("tr",{"data-slot":"table-row",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function ut(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx("th",{"data-slot":"table-head",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function mt(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx("td",{"data-slot":"table-cell",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function Va(t){const e=W.c(18),{days:r}=t,a=r===void 0?14:r,{user:s}=Ke(),o=s?.id??null;let i,c;e[0]!==a||e[1]!==o?(i=["scan_events",o,a],c=()=>o?Tr(o,a):Promise.resolve([]),e[0]=a,e[1]=o,e[2]=i,e[3]=c):(i=e[2],c=e[3]);const l=!!o;let u;e[4]!==i||e[5]!==c||e[6]!==l?(u={queryKey:i,queryFn:c,enabled:l,staleTime:3e4},e[4]=i,e[5]=c,e[6]=l,e[7]=u):u=e[7];const{data:h,isLoading:p,isError:b}=Xe(u);let w;e[8]===Symbol.for("react.memo_cache_sentinel")?(w=n.jsx(de,{children:"QR Scan Events"}),e[8]=w):w=e[8];let N;e[9]!==a?(N=n.jsxs(ue,{children:[w,n.jsxs(ze,{children:["Last ",a," days"]})]}),e[9]=a,e[10]=N):N=e[10];let y;e[11]!==h||e[12]!==b||e[13]!==p?(y=n.jsx(ce,{children:p?n.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading…"}):b?n.jsx("div",{className:"text-sm text-destructive",children:"Failed to load scans."}):h?.length?n.jsxs(Ya,{children:[n.jsx(Qa,{children:n.jsxs(ar,{children:[n.jsx(ut,{children:"When"}),n.jsx(ut,{children:"Pet"})]})}),n.jsx(za,{children:h.map(Ha)})]}):n.jsx("div",{className:"text-sm text-muted-foreground",children:"No scans yet."})}),e[11]=h,e[12]=b,e[13]=p,e[14]=y):y=e[14];let k;return e[15]!==N||e[16]!==y?(k=n.jsxs(te,{children:[N,y]}),e[15]=N,e[16]=y,e[17]=k):k=e[17],k}function Ha(t){return n.jsxs(ar,{children:[n.jsx(mt,{className:"whitespace-nowrap",children:new Date(t.scanned_at).toLocaleString()}),n.jsx(mt,{className:"font-medium",children:t.pet_name})]},t.id)}async function ht(t){return await(await Me(async()=>{const{default:r}=await import("./browser-Bq8OKPcv.js").then(a=>a.b);return{default:r}},__vite__mapDeps([0,1,2]))).default.toString(t,{type:"svg",errorCorrectionLevel:"M",margin:1,color:{dark:"#000000",light:"#ffffff"}})}async function ft(t){const e=(await Me(async()=>{const{default:s}=await import("./qr-code-styling-KH12ivli.js").then(o=>o.q);return{default:s}},__vite__mapDeps([3,1,2]))).default,a=await new e({width:512,height:512,data:t,shape:"circle",type:"svg",dotsOptions:{color:"#000000",type:"extra-rounded"},cornersSquareOptions:{color:"#000000",type:"extra-rounded"},cornersDotOptions:{color:"#000000",type:"dot"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:0},qrOptions:{errorCorrectionLevel:"H"}}).getRawData("svg");if(!a)throw new Error("Failed to generate SVG");return a instanceof Blob?await a.text():a.toString()}async function Ga(t,e=512){const r=(await Me(async()=>{const{default:o}=await import("./qr-code-styling-KH12ivli.js").then(i=>i.q);return{default:o}},__vite__mapDeps([3,1,2]))).default,s=await new r({width:e,height:e,data:t,shape:"circle",type:"canvas",dotsOptions:{color:"#000000",type:"extra-rounded"},cornersSquareOptions:{color:"#000000",type:"extra-rounded"},cornersDotOptions:{color:"#000000",type:"dot"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:0},qrOptions:{errorCorrectionLevel:"H"}}).getRawData("png");if(!s)throw new Error("Failed to generate PNG");return new Promise((o,i)=>{if(!(s instanceof Blob)){i(new Error("Expected Blob but got Buffer"));return}const c=new FileReader;c.onloadend=()=>{typeof c.result=="string"?o(c.result):i(new Error("Failed to convert blob to data URL"))},c.onerror=()=>i(new Error("Failed to read blob")),c.readAsDataURL(s)})}const Ua=[{label:"Small (256px)",value:"256"},{label:"Medium (512px)",value:"512"},{label:"Large (1024px)",value:"1024"},{label:"Extra Large (2048px)",value:"2048"}];function Ka({pet:t,open:e,onOpenChange:r}){const[a,s]=d.useState(!1),[o,i]=d.useState(null),[c,l]=d.useState("512"),[u,h]=d.useState("square");d.useEffect(()=>{if(e&&t?.short_id){s(!0);const y=`https://www.pawtraceqr.com/p/${t.short_id}`;(u==="round"?ft:ht)(y).then(M=>{const D=`data:image/svg+xml;base64,${btoa(M)}`;i(D)}).catch(()=>{i(null)}).finally(()=>s(!1))}else i(null)},[e,t?.short_id,u]);const p=t?.short_id?`https://www.pawtraceqr.com/p/${t.short_id}`:null,b=async y=>{if(y)try{await navigator.clipboard.writeText(y),alert("Copied to clipboard")}catch{alert("Failed to copy")}},w=async y=>{if(t?.short_id)try{const k=`https://www.pawtraceqr.com/p/${t.short_id}`;let M;u==="round"?M=await Ga(k,parseInt(y)):M=await(await Me(async()=>{const{default:C}=await import("./browser-Bq8OKPcv.js").then(f=>f.b);return{default:C}},__vite__mapDeps([0,1,2]))).default.toDataURL(k,{errorCorrectionLevel:"M",margin:1,width:parseInt(y),color:{dark:"#000000",light:"#ffffff"}});const D=document.createElement("a");D.href=M,D.download=`${t.name}-qr-${u}-${y}px.png`,D.click()}catch{alert("Failed to generate PNG")}},N=async()=>{if(t?.short_id)try{const y=`https://www.pawtraceqr.com/p/${t.short_id}`,M=await(u==="round"?ft:ht)(y),D=new Blob([M],{type:"image/svg+xml"}),O=URL.createObjectURL(D),C=document.createElement("a");C.href=O,C.download=`${t.name}-qr-${u}.svg`,C.click(),URL.revokeObjectURL(O)}catch{alert("Failed to generate SVG")}};return n.jsx(Lt,{open:e,onOpenChange:r,children:n.jsxs(Bt,{className:"sm:max-w-md border-2",children:[n.jsx(Yt,{className:"space-y-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 bg-primary rounded-xl flex items-center justify-center shadow-md",children:n.jsx(rr,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsxs(Qt,{className:"text-xl text-foreground",children:["QR Code ",t?`– ${t.name}`:""]}),n.jsx(zt,{className:"text-muted-foreground",children:"Scan to open the public pet page"})]})]})}),n.jsxs("div",{className:"flex flex-col items-center gap-4 py-4",children:[n.jsxs("div",{className:"w-full space-y-2",children:[n.jsx(I,{className:"text-sm font-semibold text-foreground",children:"QR Code Shape"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(F,{type:"button",variant:u==="square"?"default":"outline",className:"flex-1 gap-2",onClick:()=>h("square"),children:[n.jsx(qa,{className:"h-4 w-4"}),"Square"]}),n.jsxs(F,{type:"button",variant:u==="round"?"default":"outline",className:"flex-1 gap-2",onClick:()=>h("round"),children:[n.jsx(ja,{className:"h-4 w-4"}),"Round"]})]}),u==="round"&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Perfect for round metallic tags. Uses high error correction for reliable scanning."})]}),a?n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-8",children:[n.jsx(Je,{className:"h-4 w-4 animate-spin"}),"Generating QR code…"]}):o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`p-8 bg-white dark:bg-white border-4 border-primary shadow-lg ${u==="round"?"rounded-full":"rounded-md"}`,children:n.jsx("img",{src:o,alt:"QR code",className:"h-64 w-64 object-contain",style:{backgroundColor:"#ffffff"}})}),n.jsxs("div",{className:"w-full space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{className:"text-sm font-semibold text-foreground",children:"Public Page URL"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(V,{readOnly:!0,value:p??"",className:"text-xs bg-background text-foreground border-2"}),n.jsx(F,{type:"button",variant:"outline",size:"icon",onClick:()=>b(p),className:"flex-shrink-0",title:"Copy URL",children:n.jsx(ka,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{className:"text-sm font-semibold text-foreground",children:"Download Options"}),n.jsxs(F,{type:"button",onClick:N,variant:"outline",className:"w-full gap-2 border-2",children:[n.jsx(ct,{className:"h-4 w-4"}),"Download SVG (Vector)"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ht,{value:c,onValueChange:l,children:[n.jsx(Gt,{className:"flex-1",children:n.jsx(Ut,{})}),n.jsx(Kt,{children:Ua.map(y=>n.jsx(Ce,{value:y.value,children:y.label},y.value))})]}),n.jsxs(F,{type:"button",onClick:()=>w(c),className:"gap-2 bg-primary text-primary-foreground hover:bg-primary/90",children:[n.jsx(ct,{className:"h-4 w-4"}),"Download PNG"]})]})]})]})]}):n.jsx("div",{className:"text-sm text-muted-foreground py-8",children:"No QR code available"})]}),n.jsx(Vt,{children:n.jsx(F,{type:"button",variant:"outline",onClick:()=>r(!1),className:"border-2",children:"Close"})})]})})}async function Xa(t){const{data:e,error:r}=await A.rpc("reserve_qr_code");if(r||!e||e.length===0)throw new Error("No available QR codes in pool. Please contact support.");const a=e[0];try{const{data:s,error:o}=await A.from("pets").insert({...t,qr_code_id:a.qr_id,short_id:a.qr_short_id,qr_url:a.qr_qr_url}).select("*").single();if(o)throw o;const{error:i}=await A.rpc("finalize_qr_assignment",{p_qr_id:a.qr_id,p_pet_id:s.id});return i&&console.error("Failed to finalize QR assignment:",i),s}catch(s){throw await A.rpc("release_qr_code",{p_qr_id:a.qr_id}),s}}async function He(t,e){const{error:r}=await A.from("pets").update(e).eq("id",t);if(r)throw r;const{data:a,error:s}=await A.from("pets").select("*").eq("id",t).maybeSingle();return s?(console.warn("updatePet: select after update blocked by RLS:",s?.message),{id:t,...e}):a??{id:t,...e}}async function Ja(t){const{data:e,error:r}=await A.from("pets").select("*").eq("owner_id",t).order("created_at",{ascending:!1});if(r)throw r;return e??[]}async function pt(t,e,r){if(!r||r.size===0)throw new Error("Empty image blob");const a=r.type||"image/webp",s=a==="image/jpeg"||a==="image/jpg"?"jpg":a==="image/png"?"png":a==="image/avif"?"avif":"webp",o=Date.now(),i=`${t}/${e}-${o}.${s}`,{error:c}=await A.storage.from("pet-photos").upload(i,r,{contentType:a,upsert:!1});if(c)throw console.error("storage.upload error:",c),c;const{data:l}=A.storage.from("pet-photos").getPublicUrl(i);return l.publicUrl}async function Za(t){const{error:e}=await A.from("pets").delete().eq("id",t);if(e)throw e}async function en(t){if(!t)return;const e=t.indexOf("/pet-photos/");if(e===-1)return;const r=t.substring(e+12);if(!r)return;const{error:a}=await A.storage.from("pet-photos").remove([r]);a&&console.warn("storage.remove warning:",a.message)}function tn({pet:t,open:e,onOpenChange:r,onDeleted:a}){const[s,o]=d.useState(!1),i=async()=>{if(t){o(!0);try{t.photo_url&&await en(t.photo_url),await Za(t.id),a(),r(!1)}catch(c){alert(c?.message??"Failed to delete pet")}finally{o(!1)}}};return t?n.jsx(Mt,{open:e,onOpenChange:r,children:n.jsxs(Dt,{children:[n.jsxs(Et,{children:[n.jsxs(Ot,{className:"flex items-center gap-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-destructive"}),"Delete ",t.name,"?"]}),n.jsxs(Tt,{children:["This will permanently remove the pet profile",t.photo_url?" and its photo":"",". This action cannot be undone."]})]}),n.jsxs(Rt,{children:[n.jsx(Ft,{disabled:s,children:"Cancel"}),n.jsx(qt,{disabled:s,onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 gap-2",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Je,{className:"h-4 w-4 animate-spin"}),"Deleting…"]}):n.jsxs(n.Fragment,{children:[n.jsx(At,{className:"h-4 w-4"}),"Delete"]})})]})]})}):null}const nr=6048e5,rn=864e5,gt=Symbol.for("constructDateFrom");function K(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&gt in t?t[gt](e):t instanceof Date?new t.constructor(e):new Date(e)}function Q(t,e){return K(e||t,t)}let an={};function De(){return an}function we(t,e){const r=De(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Q(t,e?.in),o=s.getDay(),i=(o<a?7:0)+o-a;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function _e(t,e){return we(t,{...e,weekStartsOn:1})}function sr(t,e){const r=Q(t,e?.in),a=r.getFullYear(),s=K(r,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);const o=_e(s),i=K(r,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const c=_e(i);return r.getTime()>=o.getTime()?a+1:r.getTime()>=c.getTime()?a:a-1}function xt(t){const e=Q(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function nn(t,...e){const r=K.bind(null,e.find(a=>typeof a=="object"));return e.map(r)}function bt(t,e){const r=Q(t,e?.in);return r.setHours(0,0,0,0),r}function sn(t,e,r){const[a,s]=nn(r?.in,t,e),o=bt(a),i=bt(s),c=+o-xt(o),l=+i-xt(i);return Math.round((c-l)/rn)}function on(t,e){const r=sr(t,e),a=K(t,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),_e(a)}function ln(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function cn(t){return!(!ln(t)&&typeof t!="number"||isNaN(+Q(t)))}function dn(t,e){const r=Q(t,e?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const un={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mn=(t,e,r)=>{let a;const s=un[t];return typeof s=="string"?a=s:e===1?a=s.one:a=s.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function $e(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const hn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gn={date:$e({formats:hn,defaultWidth:"full"}),time:$e({formats:fn,defaultWidth:"full"}),dateTime:$e({formats:pn,defaultWidth:"full"})},xn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bn=(t,e,r,a)=>xn[t];function ge(t){return(e,r)=>{const a=r?.context?String(r.context):"standalone";let s;if(a==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,c=r?.width?String(r.width):i;s=t.formattingValues[c]||t.formattingValues[i]}else{const i=t.defaultWidth,c=r?.width?String(r.width):t.defaultWidth;s=t.values[c]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const vn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cn=(t,e)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Pn={ordinalNumber:Cn,era:ge({values:vn,defaultWidth:"wide"}),quarter:ge({values:yn,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ge({values:wn,defaultWidth:"wide"}),day:ge({values:jn,defaultWidth:"wide"}),dayPeriod:ge({values:Nn,defaultWidth:"wide",formattingValues:kn,defaultFormattingWidth:"wide"})};function xe(t){return(e,r={})=>{const a=r.width,s=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],c=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?_n(c,p=>p.test(i)):Sn(c,p=>p.test(i));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const h=e.slice(i.length);return{value:u,rest:h}}}function Sn(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function _n(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Mn(t){return(e,r={})=>{const a=e.match(t.matchPattern);if(!a)return null;const s=a[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const c=e.slice(s.length);return{value:i,rest:c}}}const Dn=/^(\d+)(th|st|nd|rd)?/i,En=/\d+/i,On={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tn={any:[/^b/i,/^(a|c)/i]},Rn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fn={any:[/1/i,/2/i,/3/i,/4/i]},qn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},An={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Wn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},In={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$n={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ln={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Bn={ordinalNumber:Mn({matchPattern:Dn,parsePattern:En,valueCallback:t=>parseInt(t,10)}),era:xe({matchPatterns:On,defaultMatchWidth:"wide",parsePatterns:Tn,defaultParseWidth:"any"}),quarter:xe({matchPatterns:Rn,defaultMatchWidth:"wide",parsePatterns:Fn,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xe({matchPatterns:qn,defaultMatchWidth:"wide",parsePatterns:An,defaultParseWidth:"any"}),day:xe({matchPatterns:Wn,defaultMatchWidth:"wide",parsePatterns:In,defaultParseWidth:"any"}),dayPeriod:xe({matchPatterns:$n,defaultMatchWidth:"any",parsePatterns:Ln,defaultParseWidth:"any"})},Yn={code:"en-US",formatDistance:mn,formatLong:gn,formatRelative:bn,localize:Pn,match:Bn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Qn(t,e){const r=Q(t,e?.in);return sn(r,dn(r))+1}function zn(t,e){const r=Q(t,e?.in),a=+_e(r)-+on(r);return Math.round(a/nr)+1}function or(t,e){const r=Q(t,e?.in),a=r.getFullYear(),s=De(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=K(e?.in||t,0);i.setFullYear(a+1,0,o),i.setHours(0,0,0,0);const c=we(i,e),l=K(e?.in||t,0);l.setFullYear(a,0,o),l.setHours(0,0,0,0);const u=we(l,e);return+r>=+c?a+1:+r>=+u?a:a-1}function Vn(t,e){const r=De(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=or(t,e),o=K(e?.in||t,0);return o.setFullYear(s,0,a),o.setHours(0,0,0,0),we(o,e)}function Hn(t,e){const r=Q(t,e?.in),a=+we(r,e)-+Vn(r,e);return Math.round(a/nr)+1}function _(t,e){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return r+a}const G={y(t,e){const r=t.getFullYear(),a=r>0?r:1-r;return _(e==="yy"?a%100:a,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):_(r+1,2)},d(t,e){return _(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return _(t.getHours()%12||12,e.length)},H(t,e){return _(t.getHours(),e.length)},m(t,e){return _(t.getMinutes(),e.length)},s(t,e){return _(t.getSeconds(),e.length)},S(t,e){const r=e.length,a=t.getMilliseconds(),s=Math.trunc(a*Math.pow(10,r-3));return _(s,e.length)}},oe={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vt={G:function(t,e,r){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const a=t.getFullYear(),s=a>0?a:1-a;return r.ordinalNumber(s,{unit:"year"})}return G.y(t,e)},Y:function(t,e,r,a){const s=or(t,a),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return _(i,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):_(o,e.length)},R:function(t,e){const r=sr(t);return _(r,e.length)},u:function(t,e){const r=t.getFullYear();return _(r,e.length)},Q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return _(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,r){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return _(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,r){const a=t.getMonth();switch(e){case"M":case"MM":return G.M(t,e);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,r){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return _(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,r,a){const s=Hn(t,a);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):_(s,e.length)},I:function(t,e,r){const a=zn(t);return e==="Io"?r.ordinalNumber(a,{unit:"week"}):_(a,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):G.d(t,e)},D:function(t,e,r){const a=Qn(t);return e==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):_(a,e.length)},E:function(t,e,r){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,r,a){const s=t.getDay(),o=(s-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return _(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,a){const s=t.getDay(),o=(s-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return _(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const a=t.getDay(),s=a===0?7:a;switch(e){case"i":return String(s);case"ii":return _(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const a=t.getHours();let s;switch(a===12?s=oe.noon:a===0?s=oe.midnight:s=a/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const a=t.getHours();let s;switch(a>=17?s=oe.evening:a>=12?s=oe.afternoon:a>=4?s=oe.morning:s=oe.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return G.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):G.H(t,e)},K:function(t,e,r){const a=t.getHours()%12;return e==="Ko"?r.ordinalNumber(a,{unit:"hour"}):_(a,e.length)},k:function(t,e,r){let a=t.getHours();return a===0&&(a=24),e==="ko"?r.ordinalNumber(a,{unit:"hour"}):_(a,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):G.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):G.s(t,e)},S:function(t,e){return G.S(t,e)},X:function(t,e,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return wt(a);case"XXXX":case"XX":return Z(a);case"XXXXX":case"XXX":default:return Z(a,":")}},x:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"x":return wt(a);case"xxxx":case"xx":return Z(a);case"xxxxx":case"xxx":default:return Z(a,":")}},O:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+yt(a,":");case"OOOO":default:return"GMT"+Z(a,":")}},z:function(t,e,r){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+yt(a,":");case"zzzz":default:return"GMT"+Z(a,":")}},t:function(t,e,r){const a=Math.trunc(+t/1e3);return _(a,e.length)},T:function(t,e,r){return _(+t,e.length)}};function yt(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),s=Math.trunc(a/60),o=a%60;return o===0?r+String(s):r+String(s)+e+_(o,2)}function wt(t,e){return t%60===0?(t>0?"-":"+")+_(Math.abs(t)/60,2):Z(t,e)}function Z(t,e=""){const r=t>0?"-":"+",a=Math.abs(t),s=_(Math.trunc(a/60),2),o=_(a%60,2);return r+s+e+o}const jt=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ir=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Gn=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],s=r[2];if(!s)return jt(t,e);let o;switch(a){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",jt(a,e)).replace("{{time}}",ir(s,e))},Un={p:ir,P:Gn},Kn=/^D+$/,Xn=/^Y+$/,Jn=["D","DD","YY","YYYY"];function Zn(t){return Kn.test(t)}function es(t){return Xn.test(t)}function ts(t,e,r){const a=rs(t,e,r);if(console.warn(a),Jn.includes(t))throw new RangeError(a)}function rs(t,e,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const as=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ns=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ss=/^'([^]*?)'?$/,os=/''/g,is=/[a-zA-Z]/;function ls(t,e,r){const a=De(),s=a.locale??Yn,o=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,c=Q(t,r?.in);if(!cn(c))throw new RangeError("Invalid time value");let l=e.match(ns).map(h=>{const p=h[0];if(p==="p"||p==="P"){const b=Un[p];return b(h,s.formatLong)}return h}).join("").match(as).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:cs(h)};if(vt[p])return{isToken:!0,value:h};if(p.match(is))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});s.localize.preprocessor&&(l=s.localize.preprocessor(c,l));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(h=>{if(!h.isToken)return h.value;const p=h.value;(es(p)||Zn(p))&&ts(p,e,String(t));const b=vt[p[0]];return b(c,p,s.localize,u)}).join("")}function cs(t){const e=t.match(ss);return e?e[1].replace(os,"'"):t}function ds(){const t=W.c(34),e=_t();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={queryKey:["location-shares"],queryFn:gs},t[0]=r):r=t[0];const{data:a,isLoading:s}=Xe(r);let o;t[1]!==e?(o={mutationFn:ps,onSuccess:()=>{e.invalidateQueries({queryKey:["location-shares"]})}},t[1]=e,t[2]=o):o=t[2];const i=Qe(o);let c;t[3]!==e?(c={mutationFn:fs,onSuccess:()=>{e.invalidateQueries({queryKey:["location-shares"]})}},t[3]=e,t[4]=c):c=t[4];const l=Qe(c),u=hs;if(s){let D;t[5]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(ue,{children:n.jsxs(de,{className:"flex items-center gap-2",children:[n.jsx(We,{className:"h-5 w-5"}),"Location Shares"]})}),t[5]=D):D=t[5];let O;return t[6]===Symbol.for("react.memo_cache_sentinel")?(O=n.jsxs(te,{children:[D,n.jsxs(ce,{className:"space-y-3",children:[n.jsx(U,{className:"h-24 w-full"}),n.jsx(U,{className:"h-24 w-full"})]})]}),t[6]=O):O=t[6],O}let h,p,b,w,N,y;if(t[7]!==l||t[8]!==i||t[9]!==a){y=Symbol.for("react.early_return_sentinel");e:{const D=a?.filter(ms)||[],O=D.filter(us).length;if(D.length===0){let x;t[16]===Symbol.for("react.memo_cache_sentinel")?(x=n.jsx(ue,{children:n.jsxs(de,{className:"flex items-center gap-2",children:[n.jsx(We,{className:"h-5 w-5"}),"Location Shares"]})}),t[16]=x):x=t[16];let g;t[17]===Symbol.for("react.memo_cache_sentinel")?(g=n.jsxs(te,{children:[x,n.jsx(ce,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"No location shares yet. When someone finds your pet and shares their location, it will appear here."})})]}),t[17]=g):g=t[17],y=g;break e}p=te;let C;t[18]===Symbol.for("react.memo_cache_sentinel")?(C=n.jsx(We,{className:"h-5 w-5"}),t[18]=C):C=t[18];let f;t[19]!==O?(f=O>0&&n.jsxs(Se,{variant:"destructive",className:"ml-auto",children:[O," New"]}),t[19]=O,t[20]=f):f=t[20],t[21]!==f?(N=n.jsx(ue,{children:n.jsxs(de,{className:"flex items-center gap-2",children:[C,"Location Shares",f]})}),t[21]=f,t[22]=N):N=t[22],h=ce,b="space-y-4";let S;t[23]!==l||t[24]!==i?(S=x=>n.jsxs("div",{className:`border rounded-lg p-4 space-y-3 ${x.viewed_at?"border-border":"border-primary bg-primary/5"}`,children:[n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-semibold",children:x.pet_name}),!x.viewed_at&&n.jsx(Se,{variant:"secondary",className:"text-xs",children:"New"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rr,{className:"h-3.5 w-3.5"}),ls(new Date(x.shared_at),"MMM d, yyyy 'at' h:mm a")]}),x.accuracy&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accuracy: ±",Math.round(x.accuracy),"m"]})]})}),x.finder_note&&n.jsxs("div",{className:"bg-muted/50 rounded p-3 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-muted-foreground",children:[n.jsx(qr,{className:"h-3 w-3"}),"Message from finder"]}),n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:x.finder_note})]}),x.finder_contact&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx($r,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("a",{href:x.finder_contact.includes("@")?`mailto:${x.finder_contact}`:`tel:${x.finder_contact}`,className:"text-primary hover:underline",children:x.finder_contact})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(F,{size:"sm",onClick:()=>u(Number(x.latitude),Number(x.longitude)),className:"flex-1 gap-2",children:[n.jsx(Fr,{className:"h-3.5 w-3.5"}),"Open in Maps"]}),!x.viewed_at&&n.jsx(F,{size:"sm",variant:"outline",onClick:()=>i.mutate(x.id),disabled:i.isPending,children:n.jsx(Zt,{className:"h-3.5 w-3.5"})}),n.jsx(F,{size:"sm",variant:"ghost",onClick:()=>l.mutate(x.id),disabled:l.isPending,children:n.jsx(fa,{className:"h-3.5 w-3.5"})})]})]},x.id),t[23]=l,t[24]=i,t[25]=S):S=t[25],w=D.map(S)}t[7]=l,t[8]=i,t[9]=a,t[10]=h,t[11]=p,t[12]=b,t[13]=w,t[14]=N,t[15]=y}else h=t[10],p=t[11],b=t[12],w=t[13],N=t[14],y=t[15];if(y!==Symbol.for("react.early_return_sentinel"))return y;let k;t[26]!==h||t[27]!==b||t[28]!==w?(k=n.jsx(h,{className:b,children:w}),t[26]=h,t[27]=b,t[28]=w,t[29]=k):k=t[29];let M;return t[30]!==p||t[31]!==N||t[32]!==k?(M=n.jsxs(p,{children:[N,k]}),t[30]=p,t[31]=N,t[32]=k,t[33]=M):M=t[33],M}function us(t){return!t.viewed_at}function ms(t){return!t.archived_at}function hs(t,e){const r=`https://www.google.com/maps/search/?api=1&query=${t},${e}`;window.open(r,"_blank")}async function fs(t){const{error:e}=await A.from("location_shares").update({archived_at:new Date().toISOString()}).eq("id",t);if(e)throw e}async function ps(t){const{error:e}=await A.from("location_shares").update({viewed_at:new Date().toISOString()}).eq("id",t);if(e)throw e}async function gs(){const{data:t}=await A.auth.getUser(),{user:e}=t;if(!e)return[];const{data:r,error:a}=await A.from("location_shares").select(`
          id,
          pet_id,
          latitude,
          longitude,
          accuracy,
          finder_note,
          finder_contact,
          shared_at,
          viewed_at,
          archived_at,
          pets!inner(name)
        `).eq("owner_id",e.id).is("archived_at",null).order("shared_at",{ascending:!1}).limit(10);if(a)throw a;return(r||[]).map(xs)}function xs(t){return{...t,pet_name:t.pets.name}}var Ee="Popover",[lr]=Xr(Ee,[Xt]),je=Xt(),[bs,J]=lr(Ee),cr=t=>{const{__scopePopover:e,children:r,open:a,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,c=je(e),l=d.useRef(null),[u,h]=d.useState(!1),[p,b]=Kr({prop:a,defaultProp:s??!1,onChange:o,caller:Ee});return n.jsx(Ar,{...c,children:n.jsx(bs,{scope:e,contentId:re(),triggerRef:l,open:p,onOpenChange:b,onOpenToggle:d.useCallback(()=>b(w=>!w),[b]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>h(!0),[]),onCustomAnchorRemove:d.useCallback(()=>h(!1),[]),modal:i,children:r})})};cr.displayName=Ee;var dr="PopoverAnchor",vs=d.forwardRef((t,e)=>{const{__scopePopover:r,...a}=t,s=J(dr,r),o=je(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=s;return d.useEffect(()=>(i(),()=>c()),[i,c]),n.jsx(Jt,{...o,...a,ref:e})});vs.displayName=dr;var ur="PopoverTrigger",mr=d.forwardRef((t,e)=>{const{__scopePopover:r,...a}=t,s=J(ur,r),o=je(r),i=er(e,s.triggerRef),c=n.jsx(H.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xr(s.open),...a,ref:i,onClick:ve(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:n.jsx(Jt,{asChild:!0,...o,children:c})});mr.displayName=ur;var Ze="PopoverPortal",[ys,ws]=lr(Ze,{forceMount:void 0}),hr=t=>{const{__scopePopover:e,forceMount:r,children:a,container:s}=t,o=J(Ze,e);return n.jsx(ys,{scope:e,forceMount:r,children:n.jsx(tr,{present:r||o.open,children:n.jsx(Zr,{asChild:!0,container:s,children:a})})})};hr.displayName=Ze;var me="PopoverContent",fr=d.forwardRef((t,e)=>{const r=ws(me,t.__scopePopover),{forceMount:a=r.forceMount,...s}=t,o=J(me,t.__scopePopover);return n.jsx(tr,{present:a||o.open,children:o.modal?n.jsx(Ns,{...s,ref:e}):n.jsx(ks,{...s,ref:e})})});fr.displayName=me;var js=Jr("PopoverContent.RemoveScroll"),Ns=d.forwardRef((t,e)=>{const r=J(me,t.__scopePopover),a=d.useRef(null),s=er(e,a),o=d.useRef(!1);return d.useEffect(()=>{const i=a.current;if(i)return ea(i)},[]),n.jsx(ta,{as:js,allowPinchZoom:!0,children:n.jsx(pr,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,i=>{i.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),ks=d.forwardRef((t,e)=>{const r=J(me,t.__scopePopover),a=d.useRef(!1),s=d.useRef(!1);return n.jsx(pr,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(a.current||r.triggerRef.current?.focus(),o.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(a.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;r.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),pr=d.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:h,...p}=t,b=J(me,r),w=je(r);return ra(),n.jsx(aa,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:o,children:n.jsx(na,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>b.onOpenChange(!1),children:n.jsx(Wr,{"data-state":xr(b.open),role:"dialog",id:b.contentId,...w,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gr="PopoverClose",Cs=d.forwardRef((t,e)=>{const{__scopePopover:r,...a}=t,s=J(gr,r);return n.jsx(H.button,{type:"button",...a,ref:e,onClick:ve(t.onClick,()=>s.onOpenChange(!1))})});Cs.displayName=gr;var Ps="PopoverArrow",Ss=d.forwardRef((t,e)=>{const{__scopePopover:r,...a}=t,s=je(r);return n.jsx(Ir,{...s,...a,ref:e})});Ss.displayName=Ps;function xr(t){return t?"open":"closed"}var _s=cr,Ms=mr,Ds=hr,Es=fr;function Os(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let a;return e[2]!==r?(a=n.jsx(_s,{"data-slot":"popover",...r}),e[2]=r,e[3]=a):a=e[3],a}function Ts(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let a;return e[2]!==r?(a=n.jsx(Ms,{"data-slot":"popover-trigger",...r}),e[2]=r,e[3]=a):a=e[3],a}function Rs(t){const e=W.c(12);let r,a,s,o;e[0]!==t?({className:r,align:s,sideOffset:o,...a}=t,e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o):(r=e[1],a=e[2],s=e[3],o=e[4]);const i=s===void 0?"center":s,c=o===void 0?4:o;let l;e[5]!==r?(l=B("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),e[5]=r,e[6]=l):l=e[6];let u;return e[7]!==i||e[8]!==a||e[9]!==c||e[10]!==l?(u=n.jsx(Ds,{children:n.jsx(Es,{"data-slot":"popover-content",align:i,sideOffset:c,className:l,...a})}),e[7]=i,e[8]=a,e[9]=c,e[10]=l,e[11]=u):u=e[11],u}var Nt=1,Fs=.9,qs=.8,As=.17,Le=.1,Be=.999,Ws=.9999,Is=.99,$s=/[\\\/_+.#"@\[\(\{&]/,Ls=/[\\\/_+.#"@\[\(\{&]/g,Bs=/[\s-]/,br=/[\s-]/g;function Ge(t,e,r,a,s,o,i){if(o===e.length)return s===t.length?Nt:Is;var c=`${s},${o}`;if(i[c]!==void 0)return i[c];for(var l=a.charAt(o),u=r.indexOf(l,s),h=0,p,b,w,N;u>=0;)p=Ge(t,e,r,a,u+1,o+1,i),p>h&&(u===s?p*=Nt:$s.test(t.charAt(u-1))?(p*=qs,w=t.slice(s,u-1).match(Ls),w&&s>0&&(p*=Math.pow(Be,w.length))):Bs.test(t.charAt(u-1))?(p*=Fs,N=t.slice(s,u-1).match(br),N&&s>0&&(p*=Math.pow(Be,N.length))):(p*=As,s>0&&(p*=Math.pow(Be,u-s))),t.charAt(u)!==e.charAt(o)&&(p*=Ws)),(p<Le&&r.charAt(u-1)===a.charAt(o+1)||a.charAt(o+1)===a.charAt(o)&&r.charAt(u-1)!==a.charAt(o))&&(b=Ge(t,e,r,a,u+1,o+2,i),b*Le>p&&(p=b*Le)),p>h&&(h=p),u=r.indexOf(l,u+1);return i[c]=h,h}function kt(t){return t.toLowerCase().replace(br," ")}function Ys(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Ge(t,e,kt(t),kt(e),0,0,{})}var be='[cmdk-group=""]',Ye='[cmdk-group-items=""]',Qs='[cmdk-group-heading=""]',vr='[cmdk-item=""]',Ct=`${vr}:not([aria-disabled="true"])`,Ue="cmdk-item-select",ie="data-value",zs=(t,e,r)=>Ys(t,e,r),yr=d.createContext(void 0),Ne=()=>d.useContext(yr),wr=d.createContext(void 0),et=()=>d.useContext(wr),jr=d.createContext(void 0),Nr=d.forwardRef((t,e)=>{let r=le(()=>{var m,j;return{search:"",value:(j=(m=t.value)!=null?m:t.defaultValue)!=null?j:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=le(()=>new Set),s=le(()=>new Map),o=le(()=>new Map),i=le(()=>new Set),c=kr(t),{label:l,children:u,value:h,onValueChange:p,filter:b,shouldFilter:w,loop:N,disablePointerSelection:y=!1,vimBindings:k=!0,...M}=t,D=re(),O=re(),C=re(),f=d.useRef(null),S=ro();ae(()=>{if(h!==void 0){let m=h.trim();r.current.value=m,x.emit()}},[h]),ae(()=>{S(6,tt)},[]);let x=d.useMemo(()=>({subscribe:m=>(i.current.add(m),()=>i.current.delete(m)),snapshot:()=>r.current,setState:(m,j,P)=>{var v,E,T,Y;if(!Object.is(r.current[m],j)){if(r.current[m]=j,m==="search")fe(),$(),S(1,ne);else if(m==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let L=document.getElementById(C);L?L.focus():(v=document.getElementById(D))==null||v.focus()}if(S(7,()=>{var L;r.current.selectedItemId=(L=se())==null?void 0:L.id,x.emit()}),P||S(5,tt),((E=c.current)==null?void 0:E.value)!==void 0){let L=j??"";(Y=(T=c.current).onValueChange)==null||Y.call(T,L);return}}x.emit()}},emit:()=>{i.current.forEach(m=>m())}}),[]),g=d.useMemo(()=>({value:(m,j,P)=>{var v;j!==((v=o.current.get(m))==null?void 0:v.value)&&(o.current.set(m,{value:j,keywords:P}),r.current.filtered.items.set(m,R(j,P)),S(2,()=>{$(),x.emit()}))},item:(m,j)=>(a.current.add(m),j&&(s.current.has(j)?s.current.get(j).add(m):s.current.set(j,new Set([m]))),S(3,()=>{fe(),$(),r.current.value||ne(),x.emit()}),()=>{o.current.delete(m),a.current.delete(m),r.current.filtered.items.delete(m);let P=se();S(4,()=>{fe(),P?.getAttribute("id")===m&&ne(),x.emit()})}),group:m=>(s.current.has(m)||s.current.set(m,new Set),()=>{o.current.delete(m),s.current.delete(m)}),filter:()=>c.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:D,inputId:C,labelId:O,listInnerRef:f}),[]);function R(m,j){var P,v;let E=(v=(P=c.current)==null?void 0:P.filter)!=null?v:zs;return m?E(m,r.current.search,j):0}function $(){if(!r.current.search||c.current.shouldFilter===!1)return;let m=r.current.filtered.items,j=[];r.current.filtered.groups.forEach(v=>{let E=s.current.get(v),T=0;E.forEach(Y=>{let L=m.get(Y);T=Math.max(L,T)}),j.push([v,T])});let P=f.current;pe().sort((v,E)=>{var T,Y;let L=v.getAttribute("id"),ke=E.getAttribute("id");return((T=m.get(ke))!=null?T:0)-((Y=m.get(L))!=null?Y:0)}).forEach(v=>{let E=v.closest(Ye);E?E.appendChild(v.parentElement===E?v:v.closest(`${Ye} > *`)):P.appendChild(v.parentElement===P?v:v.closest(`${Ye} > *`))}),j.sort((v,E)=>E[1]-v[1]).forEach(v=>{var E;let T=(E=f.current)==null?void 0:E.querySelector(`${be}[${ie}="${encodeURIComponent(v[0])}"]`);T?.parentElement.appendChild(T)})}function ne(){let m=pe().find(P=>P.getAttribute("aria-disabled")!=="true"),j=m?.getAttribute(ie);x.setState("value",j||void 0)}function fe(){var m,j,P,v;if(!r.current.search||c.current.shouldFilter===!1){r.current.filtered.count=a.current.size;return}r.current.filtered.groups=new Set;let E=0;for(let T of a.current){let Y=(j=(m=o.current.get(T))==null?void 0:m.value)!=null?j:"",L=(v=(P=o.current.get(T))==null?void 0:P.keywords)!=null?v:[],ke=R(Y,L);r.current.filtered.items.set(T,ke),ke>0&&E++}for(let[T,Y]of s.current)for(let L of Y)if(r.current.filtered.items.get(L)>0){r.current.filtered.groups.add(T);break}r.current.filtered.count=E}function tt(){var m,j,P;let v=se();v&&(((m=v.parentElement)==null?void 0:m.firstChild)===v&&((P=(j=v.closest(be))==null?void 0:j.querySelector(Qs))==null||P.scrollIntoView({block:"nearest"})),v.scrollIntoView({block:"nearest"}))}function se(){var m;return(m=f.current)==null?void 0:m.querySelector(`${vr}[aria-selected="true"]`)}function pe(){var m;return Array.from(((m=f.current)==null?void 0:m.querySelectorAll(Ct))||[])}function Te(m){let j=pe()[m];j&&x.setState("value",j.getAttribute(ie))}function Re(m){var j;let P=se(),v=pe(),E=v.findIndex(Y=>Y===P),T=v[E+m];(j=c.current)!=null&&j.loop&&(T=E+m<0?v[v.length-1]:E+m===v.length?v[0]:v[E+m]),T&&x.setState("value",T.getAttribute(ie))}function rt(m){let j=se(),P=j?.closest(be),v;for(;P&&!v;)P=m>0?eo(P,be):to(P,be),v=P?.querySelector(Ct);v?x.setState("value",v.getAttribute(ie)):Re(m)}let at=()=>Te(pe().length-1),nt=m=>{m.preventDefault(),m.metaKey?at():m.altKey?rt(1):Re(1)},st=m=>{m.preventDefault(),m.metaKey?Te(0):m.altKey?rt(-1):Re(-1)};return d.createElement(H.div,{ref:e,tabIndex:-1,...M,"cmdk-root":"",onKeyDown:m=>{var j;(j=M.onKeyDown)==null||j.call(M,m);let P=m.nativeEvent.isComposing||m.keyCode===229;if(!(m.defaultPrevented||P))switch(m.key){case"n":case"j":{k&&m.ctrlKey&&nt(m);break}case"ArrowDown":{nt(m);break}case"p":case"k":{k&&m.ctrlKey&&st(m);break}case"ArrowUp":{st(m);break}case"Home":{m.preventDefault(),Te(0);break}case"End":{m.preventDefault(),at();break}case"Enter":{m.preventDefault();let v=se();if(v){let E=new Event(Ue);v.dispatchEvent(E)}}}}},d.createElement("label",{"cmdk-label":"",htmlFor:g.inputId,id:g.labelId,style:no},l),Oe(t,m=>d.createElement(wr.Provider,{value:x},d.createElement(yr.Provider,{value:g},m))))}),Vs=d.forwardRef((t,e)=>{var r,a;let s=re(),o=d.useRef(null),i=d.useContext(jr),c=Ne(),l=kr(t),u=(a=(r=l.current)==null?void 0:r.forceMount)!=null?a:i?.forceMount;ae(()=>{if(!u)return c.item(s,i?.id)},[u]);let h=Cr(s,o,[t.value,t.children,o],t.keywords),p=et(),b=X(S=>S.value&&S.value===h.current),w=X(S=>u||c.filter()===!1?!0:S.search?S.filtered.items.get(s)>0:!0);d.useEffect(()=>{let S=o.current;if(!(!S||t.disabled))return S.addEventListener(Ue,N),()=>S.removeEventListener(Ue,N)},[w,t.onSelect,t.disabled]);function N(){var S,x;y(),(x=(S=l.current).onSelect)==null||x.call(S,h.current)}function y(){p.setState("value",h.current,!0)}if(!w)return null;let{disabled:k,value:M,onSelect:D,forceMount:O,keywords:C,...f}=t;return d.createElement(H.div,{ref:ye(o,e),...f,id:s,"cmdk-item":"",role:"option","aria-disabled":!!k,"aria-selected":!!b,"data-disabled":!!k,"data-selected":!!b,onPointerMove:k||c.getDisablePointerSelection()?void 0:y,onClick:k?void 0:N},t.children)}),Hs=d.forwardRef((t,e)=>{let{heading:r,children:a,forceMount:s,...o}=t,i=re(),c=d.useRef(null),l=d.useRef(null),u=re(),h=Ne(),p=X(w=>s||h.filter()===!1?!0:w.search?w.filtered.groups.has(i):!0);ae(()=>h.group(i),[]),Cr(i,c,[t.value,t.heading,l]);let b=d.useMemo(()=>({id:i,forceMount:s}),[s]);return d.createElement(H.div,{ref:ye(c,e),...o,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},r&&d.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Oe(t,w=>d.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},d.createElement(jr.Provider,{value:b},w))))}),Gs=d.forwardRef((t,e)=>{let{alwaysRender:r,...a}=t,s=d.useRef(null),o=X(i=>!i.search);return!r&&!o?null:d.createElement(H.div,{ref:ye(s,e),...a,"cmdk-separator":"",role:"separator"})}),Us=d.forwardRef((t,e)=>{let{onValueChange:r,...a}=t,s=t.value!=null,o=et(),i=X(u=>u.search),c=X(u=>u.selectedItemId),l=Ne();return d.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),d.createElement(H.input,{ref:e,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:s?t.value:i,onChange:u=>{s||o.setState("search",u.target.value),r?.(u.target.value)}})}),Ks=d.forwardRef((t,e)=>{let{children:r,label:a="Suggestions",...s}=t,o=d.useRef(null),i=d.useRef(null),c=X(u=>u.selectedItemId),l=Ne();return d.useEffect(()=>{if(i.current&&o.current){let u=i.current,h=o.current,p,b=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let w=u.offsetHeight;h.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return b.observe(u),()=>{cancelAnimationFrame(p),b.unobserve(u)}}},[]),d.createElement(H.div,{ref:ye(o,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":a,id:l.listId},Oe(t,u=>d.createElement("div",{ref:ye(i,l.listInnerRef),"cmdk-list-sizer":""},u)))}),Xs=d.forwardRef((t,e)=>{let{open:r,onOpenChange:a,overlayClassName:s,contentClassName:o,container:i,...c}=t;return d.createElement(sa,{open:r,onOpenChange:a},d.createElement(oa,{container:i},d.createElement(ia,{"cmdk-overlay":"",className:s}),d.createElement(la,{"aria-label":t.label,"cmdk-dialog":"",className:o},d.createElement(Nr,{ref:e,...c}))))}),Js=d.forwardRef((t,e)=>X(r=>r.filtered.count===0)?d.createElement(H.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),Zs=d.forwardRef((t,e)=>{let{progress:r,children:a,label:s="Loading...",...o}=t;return d.createElement(H.div,{ref:e,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Oe(t,i=>d.createElement("div",{"aria-hidden":!0},i)))}),he=Object.assign(Nr,{List:Ks,Item:Vs,Input:Us,Group:Hs,Separator:Gs,Dialog:Xs,Empty:Js,Loading:Zs});function eo(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function to(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function kr(t){let e=d.useRef(t);return ae(()=>{e.current=t}),e}var ae=typeof window>"u"?d.useEffect:d.useLayoutEffect;function le(t){let e=d.useRef();return e.current===void 0&&(e.current=t()),e}function X(t){let e=et(),r=()=>t(e.snapshot());return d.useSyncExternalStore(e.subscribe,r,r)}function Cr(t,e,r,a=[]){let s=d.useRef(),o=Ne();return ae(()=>{var i;let c=(()=>{var u;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(u=h.current.textContent)==null?void 0:u.trim():s.current}})(),l=a.map(u=>u.trim());o.value(t,c,l),(i=e.current)==null||i.setAttribute(ie,c),s.current=c}),s}var ro=()=>{let[t,e]=d.useState(),r=le(()=>new Map);return ae(()=>{r.current.forEach(a=>a()),r.current=new Map},[t]),(a,s)=>{r.current.set(a,s),e({})}};function ao(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Oe({asChild:t,children:e},r){return t&&d.isValidElement(e)?d.cloneElement(ao(e),{ref:e.ref},r(e.props.children)):r(e)}var no={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function so(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx(he,{"data-slot":"command",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function oo(t){const e=W.c(9);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=n.jsx(Oa,{className:"size-4 shrink-0 opacity-50"}),e[3]=s):s=e[3];let o;e[4]!==r?(o=B("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",r),e[4]=r,e[5]=o):o=e[5];let i;return e[6]!==a||e[7]!==o?(i=n.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[s,n.jsx(he.Input,{"data-slot":"command-input",className:o,...a})]}),e[6]=a,e[7]=o,e[8]=i):i=e[8],i}function io(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx(he.List,{"data-slot":"command-list",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function lo(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let a;return e[2]!==r?(a=n.jsx(he.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...r}),e[2]=r,e[3]=a):a=e[3],a}function co(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx(he.Group,{"data-slot":"command-group",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}function uo(t){const e=W.c(8);let r,a;e[0]!==t?({className:r,...a}=t,e[0]=t,e[1]=r,e[2]=a):(r=e[1],a=e[2]);let s;e[3]!==r?(s=B("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==a||e[6]!==s?(o=n.jsx(he.Item,{"data-slot":"command-item",className:s,...a}),e[5]=a,e[6]=s,e[7]=o):o=e[7],o}const Pr=[{name:"Golden Retriever",defaultColors:["Golden"]},{name:"Labrador Retriever",defaultColors:["Yellow","Black","Chocolate"]},{name:"German Shepherd",defaultColors:["Black/Tan","Sable","Black"]},{name:"French Bulldog",defaultColors:["Fawn","Brindle","Cream","Pied"]},{name:"Poodle",defaultColors:["White","Black","Apricot","Red"]},{name:"Bulldog",defaultColors:["Fawn","Brindle","White","Piebald"]},{name:"Beagle",defaultColors:["Tri-color","Lemon/White","Red/White"]},{name:"Rottweiler",defaultColors:["Black/Rust"]},{name:"Dachshund",defaultColors:["Red","Black/Tan","Chocolate/Tan","Dapple"]},{name:"Yorkshire Terrier",defaultColors:["Blue/Tan"]}],Sr=[{name:"Bicolor / Tuxedo",defaultColors:["Black/White","Gray/White","Seal/White"]},{name:"Calico",defaultColors:["Black/Orange/White","Dilute (Blue/Cream/White)"]},{name:"Pointed",defaultColors:["Seal point","Blue point","Chocolate point","Lilac point","Flame point"]},{name:"Shaded",defaultColors:["Shaded Silver","Shaded Golden"]},{name:"Smoke",defaultColors:["Black Smoke","Blue Smoke"]},{name:"Solid",defaultColors:["Black","White","Blue/Gray","Red/Orange","Cream"]},{name:"Spotted",defaultColors:["Brown Spotted","Silver Spotted"]},{name:"Tabby",defaultColors:["Brown Tabby","Gray/Blue Tabby","Orange Tabby","Silver Tabby","Torbie"]},{name:"Tortoiseshell (Tortie)",defaultColors:["Black/Orange","Chocolate/Cream","Dilute (Blue/Cream)"]}];function mo(t,e){return!t||!e?[]:t==="dog"?Pr.find(a=>a.name===e)?.defaultColors??[]:t==="cat"?Sr.find(a=>a.name===e)?.defaultColors??[]:[]}const ho=Pr.map(t=>t.name),fo=Sr.map(t=>t.name);function po({label:t="Photo",value:e,onChange:r,options:a,accept:s="image/*",className:o}){const i=d.useRef(null),[c,l]=d.useState(!1),[u,h]=d.useState(!1),[p,b]=d.useState(null),w=d.useCallback(()=>{i.current?.click()},[]),N=d.useCallback(()=>{r(null),b(null)},[r]),y=d.useCallback(async C=>{if(!C||!C.type.startsWith("image/")){b("Please select a valid image file");return}if(C.size>10*1024*1024){b("File size must be less than 10MB");return}b(null),l(!0);try{const f=await go(C,a);r(f)}catch(f){b("Failed to optimize image. Please try another file."),console.error("Image optimization error:",f)}finally{l(!1)}},[a,r]),k=d.useCallback(C=>{C.preventDefault(),C.stopPropagation(),h(!0)},[]),M=d.useCallback(C=>{C.preventDefault(),C.stopPropagation(),h(!1)},[]),D=d.useCallback(C=>{C.preventDefault(),C.stopPropagation(),h(!1);const f=C.dataTransfer.files?.[0];f&&y(f)},[y]),O=e?Math.round((1-e.approxKB/e.original.sizeKB)*100):0;return n.jsxs("div",{className:o,children:[n.jsx(I,{className:"mb-2 block font-medium",children:t}),e?n.jsx("div",{className:"border rounded-lg p-4 bg-card",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:e.dataUrl,alt:"preview",className:"h-32 w-32 rounded-lg object-cover border-2 border-border"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:n.jsx(Sa,{className:"h-8 w-8 text-white"})})]}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm truncate",children:e.original.name}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.width," × ",e.height,"px"]})]}),n.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:N,className:"h-8 w-8 p-0",children:n.jsx(ca,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-muted-foreground",children:"Original"}),n.jsxs("p",{className:"font-medium",children:[e.original.sizeKB.toLocaleString()," KB"]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-muted-foreground",children:"Optimized"}),n.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:[e.approxKB.toLocaleString()," KB"]})]})]}),O>0&&n.jsx("div",{className:"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-900 rounded-md px-3 py-2",children:n.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:["↓ ",O,"% smaller · ",e.mimeType]})}),n.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:w,className:"w-full",children:"Replace Image"})]})]})}):n.jsx("div",{onDragOver:k,onDragLeave:M,onDrop:D,onClick:w,className:`
            relative border-2 border-dashed rounded-lg p-8 transition-all cursor-pointer
            hover:border-primary/50 hover:bg-accent/50
            ${u?"border-primary bg-accent scale-[1.02]":"border-border"}
            ${c?"pointer-events-none opacity-60":""}
          `,children:n.jsx("div",{className:"flex flex-col items-center justify-center text-center space-y-3",children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"}),n.jsx("p",{className:"text-sm font-medium",children:"Optimizing image..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:n.jsx($a,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Drop your image here, or click to browse"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, WebP up to 10MB"})]})]})})}),p&&n.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-900 rounded-md px-3 py-2",children:p}),n.jsx(V,{ref:i,type:"file",accept:s,className:"hidden",onChange:C=>{const f=C.target.files?.[0];f&&y(f),C.currentTarget.value=""}})]})}async function go(t,e){const r=await t.arrayBuffer(),a=new Blob([r]),s=await bo(a),o=e?.maxWidth??1200,i=e?.maxHeight??1200,{width:c,height:l}=xo(s.width,s.height,o,i),u=document.createElement("canvas");u.width=c,u.height=l;const h=u.getContext("2d",{alpha:!0});h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(s,0,0,c,l);const p=e?.preferWebP??!0,b=e?.quality??.82,w=u.toDataURL("image/webp").startsWith("data:image/webp"),N=p&&w?"image/webp":"image/jpeg",y=await vo(u,N,b),k=await yo(y);return{blob:y,dataUrl:k,width:c,height:l,approxKB:Math.round(y.size/1024),mimeType:N,original:{name:t.name,sizeKB:Math.round(t.size/1024),type:t.type}}}function xo(t,e,r,a){const s=Math.min(r/t,a/e,1);return{width:Math.round(t*s),height:Math.round(e*s)}}function bo(t){return new Promise((e,r)=>{const a=URL.createObjectURL(t),s=new Image;s.onload=()=>{URL.revokeObjectURL(a),e(s)},s.onerror=()=>{URL.revokeObjectURL(a),r(new Error("Failed to load image"))},s.src=a})}function vo(t,e,r){return new Promise((a,s)=>{t.toBlob(o=>{o?a(o):s(new Error("Canvas to blob conversion failed"))},e,r)})}function yo(t){return new Promise((e,r)=>{const a=new FileReader;a.onload=()=>e(String(a.result)),a.onerror=()=>r(new Error("Failed to read blob")),a.readAsDataURL(t)})}function wo(t){const[e,r]=d.useState(Fe),[a,s]=d.useState(!0);return d.useEffect(()=>{if(!t){s(!1);return}(async()=>{try{const{data:l,error:u}=await A.from("pet_themes").select("theme_preset, custom_colors, background_image_url").eq("pet_id",t).maybeSingle();if(u)throw u;r(l?l.theme_preset:Fe)}catch(l){console.error("Failed to load pet theme:",l),r(Fe)}finally{s(!1)}})()},[t]),{themeId:e,isLoading:a,updatePetTheme:async c=>{if(t){r(c);try{const{error:l}=await A.from("pet_themes").upsert({pet_id:t,theme_preset:c,updated_at:new Date().toISOString()});if(l)throw l}catch(l){console.error("Failed to save pet theme:",l)}}},applyPetTheme:(c=!1)=>{_r(e,c)}}}const jo=it({id:z().optional(),name:z().min(1,"Name is required"),species:Qr(["dog","cat","other"],{message:"Choose a species"}),breed:z().optional(),color:z().optional(),weight:Yr([Vr().min(0,"Weight must be positive"),Hr(),Gr()]).transform(t=>typeof t=="number"&&!isNaN(t)?t:void 0).optional(),birthdate:z().optional(),microchipId:z().optional(),description:z().optional(),notes:z().optional(),vaccinations:it({rabies:zr().default(!1),rabiesExpires:z().optional()}).default({rabies:!1,rabiesExpires:""}),photoPreview:z().optional()});async function Pt(t){return await(await fetch(t)).blob()}function St({mode:t,open:e,onOpenChange:r,initialPet:a,onSubmit:s}){const{user:o}=Ke(),[i,c]=d.useState(!1),l=Lr({resolver:Br(jo),defaultValues:{id:a?.id,name:a?.name??"",species:a?.species,breed:a?.breed??"",color:a?.color??"",weight:a?.weight??void 0,birthdate:a?.birthdate??"",microchipId:a?.microchipId??"",description:a?.description??"",notes:a?.notes??"",vaccinations:{rabies:a?.vaccinations?.rabies??!1,rabiesExpires:a?.vaccinations?.rabiesExpires??""},photoPreview:a?.photoPreview??""},mode:"onSubmit"}),u=l.watch("species"),h=l.watch("breed"),[p,b]=d.useState(!1),{themeId:w,updatePetTheme:N}=wo(a?.id),[y,k]=d.useState(w);d.useEffect(()=>{k(w)},[w]);const M=d.useRef(null),D=d.useMemo(()=>u==="dog"?ho:u==="cat"?fo:[],[u]),O=d.useMemo(()=>mo(u??"other",h),[u,h]),C=async f=>{if(!o?.id){alert("You must be signed in.");return}c(!0);const S={rabies:!!f.vaccinations?.rabies,rabiesExpires:f.vaccinations?.rabies&&f.vaccinations.rabiesExpires||void 0},x={owner_id:o.id,name:f.name,species:f.species,breed:f.breed||null,color:f.color||null,weight:typeof f.weight=="number"?f.weight:null,birthdate:f.birthdate||null,microchip_id:f.microchipId||null,description:f.description||null,notes:f.notes||null,vaccinations:S};try{let g;if(t==="add"){g=await Xa({...x});let R=M.current;if(!R&&f.photoPreview&&(R=await Pt(f.photoPreview)),R&&R.size>0){const $=await pt(o.id,g.id,R);g=await He(g.id,{photo_url:$})}}else{const R=f.id||a?.id;if(!R)throw new Error("Missing pet id for update.");let $=M.current;!$&&f.photoPreview&&($=await Pt(f.photoPreview));const ne={name:x.name,species:x.species,breed:x.breed,color:x.color,weight:x.weight,birthdate:x.birthdate,microchip_id:x.microchip_id,description:x.description,notes:x.notes,vaccinations:x.vaccinations};if($&&$.size>0){const fe=await pt(o.id,R,$);ne.photo_url=fe}g=await He(R,ne)}g?.id&&await N(y),s?.(f),r(!1),t==="add"&&l.reset()}catch(g){console.error(g),alert(g?.message??"Failed to save pet")}finally{c(!1)}};return n.jsx(Lt,{open:e,onOpenChange:f=>!i&&r(f),children:n.jsxs(Bt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-slate-900",children:[n.jsx(Yt,{className:"space-y-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-xl flex items-center justify-center ring-4 ring-primary/5",children:n.jsx(ee,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(Qt,{className:"text-2xl",children:t==="add"?"Add New Pet":"Edit Pet"}),n.jsx(zt,{className:"text-base",children:t==="add"?"Enter your pet's details to create their profile":"Update your pet's information"})]})]})}),n.jsxs("form",{onSubmit:l.handleSubmit(C),className:"space-y-6 mt-4",children:[n.jsxs("section",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[n.jsx(Wt,{className:"h-4 w-4 text-primary"}),"Basic Information"]}),n.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:["Name ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(V,{id:"name",...l.register("name"),placeholder:"e.g., Milo, Luna, Max",className:"h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20"}),l.formState.errors.name&&n.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1.5 animate-in fade-in-50",children:[n.jsx(Pe,{className:"h-3.5 w-3.5"}),l.formState.errors.name.message]})]}),n.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{className:"text-sm font-medium flex items-center gap-2",children:["Species ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs(Ht,{value:u,onValueChange:f=>{l.setValue("species",f,{shouldValidate:!0}),l.setValue("breed",""),l.setValue("color","")},children:[n.jsx(Gt,{className:"h-11",children:n.jsx(Ut,{placeholder:"Select species"})}),n.jsxs(Kt,{children:[n.jsx(Ce,{value:"dog",children:"🐕 Dog"}),n.jsx(Ce,{value:"cat",children:"🐱 Cat"}),n.jsx(Ce,{value:"other",children:"🐾 Other"})]})]}),l.formState.errors.species&&n.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1.5",children:[n.jsx(Pe,{className:"h-3.5 w-3.5"}),l.formState.errors.species.message]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{htmlFor:"birthdate",className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(ga,{className:"h-3.5 w-3.5"}),"Birthdate"]}),n.jsx(V,{id:"birthdate",type:"date",...l.register("birthdate"),className:"h-11"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(ee,{className:"h-3.5 w-3.5"}),u==="cat"?"Pattern":"Breed",u==="other"&&n.jsx("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(V,{placeholder:u==="dog"?"e.g., Golden Retriever":u==="cat"?"e.g., Tabby, Calico":"e.g., Rabbit, Guinea Pig",...l.register("breed"),className:"h-11 flex-1"}),D.length>0&&n.jsxs(Os,{open:p,onOpenChange:b,children:[n.jsx(Ts,{asChild:!0,children:n.jsxs(F,{type:"button",variant:"outline",className:"w-36 justify-between h-11",children:["Suggestions ",n.jsx(ya,{className:"h-4 w-4 opacity-60"})]})}),n.jsx(Rs,{className:"p-0 w-64",children:n.jsxs(so,{children:[n.jsx(oo,{placeholder:"Search…"}),n.jsxs(io,{children:[n.jsx(lo,{children:"No matches found."}),n.jsx(co,{children:D.map(f=>n.jsx(uo,{value:f,onSelect:S=>{l.setValue("breed",S),b(!1)},children:f},f))})]})]})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{htmlFor:"color",className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(ot,{className:"h-3.5 w-3.5"}),"Color"]}),n.jsx(V,{id:"color",...l.register("color"),placeholder:"e.g., Brown, White, Mixed",className:"h-11"}),O.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 pt-1",children:O.map(f=>n.jsx("button",{type:"button",onClick:()=>l.setValue("color",f,{shouldValidate:!0}),className:"rounded-full border border-primary/20 bg-primary/5 px-3 py-1 text-xs font-medium hover:bg-primary/10 transition-colors",children:f},f))})]}),n.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{htmlFor:"weight",className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Ba,{className:"h-3.5 w-3.5"}),"Weight (lbs)"]}),n.jsx(V,{id:"weight",type:"number",step:"0.1",placeholder:"e.g., 45.5",...l.register("weight",{valueAsNumber:!0}),className:"h-11"}),l.formState.errors.weight&&n.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1.5",children:[n.jsx(Pe,{className:"h-3.5 w-3.5"}),l.formState.errors.weight.message]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(I,{htmlFor:"microchipId",className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(da,{className:"h-3.5 w-3.5"}),"Microchip ID"]}),n.jsx(V,{id:"microchipId",...l.register("microchipId"),placeholder:"e.g., 981000012345678",className:"h-11"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{htmlFor:"description",className:"text-sm font-medium",children:"Physical Description"}),n.jsx(V,{id:"description",...l.register("description"),placeholder:"e.g., White paws, brown spot on left ear",className:"h-11"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{htmlFor:"notes",className:"text-sm font-medium",children:"Additional Notes"}),n.jsx(Ur,{id:"notes",...l.register("notes"),placeholder:"Allergies, medications, behavioral notes, vet contact info...",className:"min-h-[80px] resize-none"})]})]})]}),n.jsx(Ie,{}),n.jsxs("section",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[n.jsx(Wa,{className:"h-4 w-4 text-primary"}),"Vaccinations"]}),n.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-primary/20",children:[n.jsx(It,{className:"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950",children:n.jsx($t,{className:"text-xs text-blue-800 dark:text-blue-200",children:"Keep track of your pet's vaccination records for their health and safety"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 bg-secondary/30 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("input",{id:"rabies",type:"checkbox",className:"h-4 w-4 rounded border-primary text-primary focus:ring-primary",checked:!!l.watch("vaccinations.rabies"),onChange:f=>l.setValue("vaccinations.rabies",f.target.checked)}),n.jsx(I,{htmlFor:"rabies",className:"text-sm font-medium cursor-pointer",children:"Rabies Vaccination"})]}),n.jsxs("div",{className:"flex items-center gap-2 sm:w-48",children:[n.jsx(I,{htmlFor:"rabiesExpires",className:"text-xs text-muted-foreground whitespace-nowrap",children:"Expires:"}),n.jsx(V,{id:"rabiesExpires",type:"date",disabled:!l.watch("vaccinations.rabies"),...l.register("vaccinations.rabiesExpires"),className:"h-9"})]})]})]})]}),n.jsx(Ie,{}),n.jsxs("section",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[n.jsx(ot,{className:"h-4 w-4 text-primary"}),"Page Theme"]}),n.jsxs("div",{className:"pl-6 border-l-2 border-primary/20",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose a color theme for your pet's public page"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.values(Mr).map(f=>n.jsxs("button",{type:"button",onClick:()=>k(f.id),className:B("relative p-3 rounded-lg border-2 transition-all hover:scale-105",y===f.id?"border-primary shadow-md":"border-border hover:border-primary/50"),children:[n.jsx("div",{className:B("h-16 rounded-md mb-2 bg-gradient-to-br",f.previewGradient)}),n.jsx("p",{className:"text-xs font-medium text-center",children:f.name}),y===f.id&&n.jsx("div",{className:"absolute top-2 right-2 h-5 w-5 bg-primary rounded-full flex items-center justify-center",children:n.jsx(ua,{className:"h-3 w-3 text-primary-foreground"})})]},f.id))})]})]}),n.jsx(Ie,{}),n.jsxs("section",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[n.jsx(ba,{className:"h-4 w-4 text-primary"}),"Pet Photo"]}),n.jsx("div",{className:"pl-6 border-l-2 border-primary/20",children:n.jsx(po,{label:"",value:l.watch("photoPreview")?{blob:new Blob,dataUrl:l.watch("photoPreview"),width:0,height:0,approxKB:0,mimeType:"image/*",original:{name:"",sizeKB:0,type:""}}:null,onChange:f=>{M.current=f?.blob??null,l.setValue("photoPreview",f?.dataUrl??"")},options:{maxWidth:1200,maxHeight:1200,quality:.82,preferWebP:!0}})})]}),n.jsxs(Vt,{className:"gap-2 sm:gap-0 pt-4",children:[n.jsx(F,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:i,className:"transition-all hover:scale-105",children:"Cancel"}),n.jsx(F,{type:"submit",disabled:i,className:"transition-all hover:scale-105",children:i?n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t==="add"?"Creating...":"Updating..."]}):n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ee,{className:"h-4 w-4"}),t==="add"?"Create Pet Profile":"Save Changes"]})})]})]})]})})}function oi(){const{user:t}=Ke(),e=_t(),r=t?.id??null,{data:a,isLoading:s,isError:o}=Xe({queryKey:["pets",r],queryFn:async()=>r?Ja(r):[],enabled:!!r,staleTime:3e4}),[i,c]=d.useState(!1),[l,u]=d.useState(null),[h,p]=d.useState(null),[b,w]=d.useState(null),[N,y]=d.useState(null),[k,M]=d.useState(!1),D=g=>{const $=`${window.location.origin}/p/${g.short_id}`;window.open($,"_blank")},O=async()=>{await e.invalidateQueries({queryKey:["pets",r]}),u(null),c(!1)},C=async()=>{await e.invalidateQueries({queryKey:["pets",r]}),p(null)},f=Qe({mutationFn:async({id:g,missing:R})=>He(g,{missing:R,missing_since:R?new Date().toISOString():null}),onSuccess:async()=>{await e.invalidateQueries({queryKey:["pets",r]})}}),S=async(g,R)=>{if(R)y(g);else try{M(!0),await f.mutateAsync({id:g.id,missing:!1})}catch($){alert($?.message??"Failed to update")}finally{M(!1)}},x=async()=>{if(N)try{M(!0),await f.mutateAsync({id:N.id,missing:!0})}catch(g){alert(g?.message??"Failed to update")}finally{M(!1),y(null)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-xl flex items-center justify-center ring-4 ring-primary/5",children:n.jsx(ee,{className:"h-5 w-5 text-primary"})}),"Dashboard"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your pets, QR codes, and track activity"})]}),n.jsxs(Dr,{defaultValue:"pets",className:"space-y-4",children:[n.jsxs(Er,{className:"grid w-full max-w-2xl grid-cols-3",children:[n.jsxs(qe,{value:"pets",className:"gap-2",children:[n.jsx(ee,{className:"h-4 w-4"}),"My Pets"]}),n.jsxs(qe,{value:"locations",className:"gap-2",children:[n.jsx(lt,{className:"h-4 w-4"}),"Locations"]}),n.jsxs(qe,{value:"activity",className:"gap-2",children:[n.jsx(lt,{className:"h-4 w-4"}),"Activity"]})]}),n.jsxs(Ae,{value:"pets",className:"space-y-4",children:[n.jsxs(te,{className:"shadow-lg border-primary/10",children:[n.jsx(ue,{className:"space-y-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs(de,{className:"text-2xl flex items-center gap-2",children:[n.jsx(Wt,{className:"h-5 w-5 text-primary"}),"Registered Pets"]}),n.jsx(ze,{className:"text-base",children:"Manage profiles, photos, QR tags, and missing status"})]}),n.jsxs(F,{onClick:()=>c(!0),disabled:!r,className:"gap-2 transition-all hover:scale-105",children:[n.jsx(dt,{className:"h-4 w-4"}),"Add Pet"]})]})}),n.jsx(ce,{children:s?n.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((g,R)=>n.jsxs(te,{className:"p-4 space-y-3",children:[n.jsx(U,{className:"h-5 w-40"}),n.jsx(U,{className:"h-4 w-24"}),n.jsx(U,{className:"h-32 w-full rounded-md"}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(U,{className:"h-9 w-16"}),n.jsx(U,{className:"h-9 w-16"}),n.jsx(U,{className:"h-9 w-16"})]})]},R))}):o?n.jsxs(It,{variant:"destructive",children:[n.jsx(Pe,{className:"h-4 w-4"}),n.jsx($t,{children:"Failed to load pets. Please try again."})]}):a&&a.length>0?n.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(g=>n.jsxs(te,{className:"overflow-hidden transition-all duration-200 hover:shadow-lg hover:scale-[1.02] border-primary/10",children:[n.jsxs(ue,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs(de,{className:"text-lg truncate flex items-center gap-2",children:[n.jsx(ee,{className:"h-4 w-4 text-primary flex-shrink-0"}),g.name]}),n.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[g.missing&&n.jsxs(Se,{variant:"destructive",className:"gap-1 animate-pulse",children:[n.jsx(Ve,{className:"h-3 w-3"}),"Missing"]}),n.jsx(Se,{variant:"secondary",className:"capitalize text-xs",children:g.species})]})]}),n.jsx(ze,{className:"line-clamp-2 text-sm",children:g.breed||g.description||"No description"})]}),g.photo_url&&n.jsx("div",{className:"px-4 pb-3",children:n.jsx("img",{src:g.photo_url,alt:`${g.name} photo`,className:"w-full h-40 rounded-lg object-cover ring-1 ring-primary/10",loading:"lazy"})}),n.jsxs(ce,{className:"space-y-3 pt-3 border-t",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(F,{size:"sm",onClick:()=>u(g),className:"gap-1.5 flex-1 transition-all hover:scale-105",children:[n.jsx(Ra,{className:"h-3.5 w-3.5"}),"Edit"]}),n.jsxs(F,{size:"sm",variant:"outline",onClick:()=>D(g),className:"gap-1.5 flex-1 transition-all hover:scale-105",children:[n.jsx(Zt,{className:"h-3.5 w-3.5"}),"View"]}),n.jsxs(F,{size:"sm",variant:"outline",onClick:()=>w(g),className:"gap-1.5 flex-1 transition-all hover:scale-105",title:"View QR Code",children:[n.jsx(rr,{className:"h-3.5 w-3.5"}),"QR"]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(I,{htmlFor:`missing-${g.id}`,className:"text-sm font-medium cursor-pointer",children:"Mark Missing"}),n.jsx(Or,{id:`missing-${g.id}`,checked:!!g.missing,disabled:k||f.isPending,onCheckedChange:R=>S(g,R)})]}),n.jsxs(F,{size:"sm",variant:"ghost",onClick:()=>p(g),className:"gap-1.5 text-destructive hover:text-destructive hover:bg-destructive/10",children:[n.jsx(At,{className:"h-3.5 w-3.5"}),"Delete"]})]})]})]},g.id))}):n.jsxs("div",{className:"text-center py-12 space-y-4",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"h-20 w-20 bg-primary/10 rounded-full flex items-center justify-center",children:n.jsx(ee,{className:"h-10 w-10 text-primary/60"})})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-lg font-medium text-foreground",children:"No pets yet"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Click ",n.jsx("span",{className:"font-medium text-foreground",children:"Add Pet"})," to create your first pet profile"]})]}),n.jsxs(F,{onClick:()=>c(!0),className:"gap-2 mt-4",children:[n.jsx(dt,{className:"h-4 w-4"}),"Add Your First Pet"]})]})})]}),n.jsx(St,{mode:"add",open:i,onOpenChange:c,onSubmit:O}),l&&n.jsx(St,{mode:"edit",open:!!l,onOpenChange:g=>!g&&u(null),initialPet:{id:l.id,name:l.name,species:l.species,breed:l.breed??void 0,color:l.color??void 0,weight:l.weight??void 0,birthdate:l.birthdate??void 0,microchipId:l.microchip_id??void 0,description:l.description??void 0,notes:l.notes??void 0,vaccinations:l.vaccinations?{rabies:l.vaccinations.rabies??!1,rabiesExpires:l.vaccinations.rabiesExpires??void 0}:void 0,photoPreview:l.photo_url??void 0},onSubmit:O}),r&&n.jsx(Ka,{pet:b,open:!!b,onOpenChange:g=>!g&&w(null),ownerId:r}),n.jsx(tn,{pet:h,open:!!h,onOpenChange:g=>!g&&p(null),onDeleted:C}),n.jsx(Mt,{open:!!N,onOpenChange:g=>!g&&y(null),children:n.jsxs(Dt,{children:[n.jsxs(Et,{children:[n.jsxs(Ot,{className:"flex items-center gap-2",children:[n.jsx(Ve,{className:"h-5 w-5 text-orange-500"}),"Mark ",N?.name," as missing?"]}),n.jsx(Tt,{children:"This helps highlight their profile and can trigger your outreach flow. You can turn this off later."})]}),n.jsxs(Rt,{children:[n.jsx(Ft,{disabled:k,children:"Cancel"}),n.jsx(qt,{disabled:k,onClick:x,className:"gap-2",children:k?n.jsxs(n.Fragment,{children:[n.jsx(Je,{className:"h-4 w-4 animate-spin"}),"Saving…"]}):"Yes, mark missing"})]})]})})]}),n.jsx(Ae,{value:"locations",className:"mt-4",children:n.jsx(ds,{})}),n.jsx(Ae,{value:"activity",className:"mt-4",children:n.jsx(Va,{days:30})})]})]})}export{oi as default};
