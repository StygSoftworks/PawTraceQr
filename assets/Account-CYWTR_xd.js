const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-i6Cfs9b8.js","./index-C9vIuHov.css"])))=>i.map(i=>d[i]);
import{c as ie,j as s,d as me,r as V,T as he,u as pe,_ as xe}from"./index-i6Cfs9b8.js";import{u as Z,a as ee,o as ne,b as se,s as J,l as ue}from"./zod-BcDoN5MM.js";import{M as fe,S as je,u as ge}from"./useProfile-CsGlyru3.js";import{a as $,C as H,c as ce,b as oe,d as de,e as ye}from"./card-unPYtR4G.js";import{B as U}from"./button-DznmDcQc.js";import{L as S,I}from"./input-DOBs8y62.js";import{S as ae}from"./index-BPUJsWnk.js";import{A as W,a as X}from"./alert-DoYMIvgh.js";import{T as ve,a as be,b as re,c as te}from"./tabs-BzFz0fcg.js";import{P as Ne,a as we,S as le}from"./switch-CkvF8Yno.js";import{B as _e}from"./badge-m7swUxc1.js";import{C as Se}from"./check-XfUAzQw3.js";import"./createLucideIcon-SwlWEdXL.js";import"./useQuery-Ck6fs015.js";import"./useMutation-7PdUdc88.js";import"./index-xf7y12yH.js";import"./index-BhfT22v6.js";function Ce(e){const a=ie.c(44),{theme:r,isSelected:_,darkMode:C,onClick:i}=e,l=C?r.colors.dark:r.colors.light,t=`relative cursor-pointer transition-all duration-200 hover:shadow-lg ${_?"ring-2 ring-primary shadow-xl":""}`;let n;a[0]!==_?(n=_&&s.jsx("div",{className:"absolute top-2 right-2 h-6 w-6 bg-primary rounded-full flex items-center justify-center",children:s.jsx(Se,{className:"h-4 w-4 text-primary-foreground"})}),a[0]=_,a[1]=n):n=a[1];let c;a[2]!==r.name?(c=s.jsx("h3",{className:"font-semibold text-lg",children:r.name}),a[2]=r.name,a[3]=c):c=a[3];let d;a[4]!==r.category?(d=s.jsx(_e,{variant:"outline",className:"text-xs",children:r.category}),a[4]=r.category,a[5]=d):d=a[5];let m;a[6]!==c||a[7]!==d?(m=s.jsxs("div",{className:"flex items-center justify-between",children:[c,d]}),a[6]=c,a[7]=d,a[8]=m):m=a[8];let h;a[9]!==r.description?(h=s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),a[9]=r.description,a[10]=h):h=a[10];const b=`h-20 rounded-lg bg-gradient-to-br ${r.previewGradient} border`;let p;a[11]!==l.cardBorder?(p={borderColor:l.cardBorder},a[11]=l.cardBorder,a[12]=p):p=a[12];let x;a[13]!==b||a[14]!==p?(x=s.jsx("div",{className:b,style:p}),a[13]=b,a[14]=p,a[15]=x):x=a[15];let g;a[16]!==l.primary?(g=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.primary},title:"Primary"}),a[16]=l.primary,a[17]=g):g=a[17];let o;a[18]!==l.secondary?(o=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.secondary},title:"Secondary"}),a[18]=l.secondary,a[19]=o):o=a[19];let u;a[20]!==l.accent?(u=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.accent},title:"Accent"}),a[20]=l.accent,a[21]=u):u=a[21];let f;a[22]!==l.cardBg?(f=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.cardBg},title:"Card Background"}),a[22]=l.cardBg,a[23]=f):f=a[23];let y;a[24]!==l.buttonPrimary?(y=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.buttonPrimary},title:"Button"}),a[24]=l.buttonPrimary,a[25]=y):y=a[25];let N;a[26]!==g||a[27]!==o||a[28]!==u||a[29]!==f||a[30]!==y?(N=s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[g,o,u,f,y]}),a[26]=g,a[27]=o,a[28]=u,a[29]=f,a[30]=y,a[31]=N):N=a[31];let j;a[32]!==N||a[33]!==m||a[34]!==h||a[35]!==x?(j=s.jsxs("div",{className:"space-y-3",children:[m,h,x,N]}),a[32]=N,a[33]=m,a[34]=h,a[35]=x,a[36]=j):j=a[36];let w;a[37]!==j||a[38]!==n?(w=s.jsxs($,{className:"p-4",children:[n,j]}),a[37]=j,a[38]=n,a[39]=w):w=a[39];let k;return a[40]!==i||a[41]!==t||a[42]!==w?(k=s.jsx(H,{className:t,onClick:i,children:w}),a[40]=i,a[41]=t,a[42]=w,a[43]=k):k=a[43],k}function ke(){const e=ie.c(62),{themeId:a,darkMode:r,updateTheme:_,isLoading:C}=me(),[i,l]=V.useState(a),[t,n]=V.useState(r),[c,d]=V.useState(!1);let m,h;e[0]!==r||e[1]!==a?(m=()=>{l(a),n(r)},h=[a,r],e[0]=r,e[1]=a,e[2]=m,e[3]=h):(m=e[2],h=e[3]),V.useEffect(m,h);let b;e[4]!==r||e[5]!==t||e[6]!==a?(b=v=>{l(v),d(v!==a||t!==r)},e[4]=r,e[5]=t,e[6]=a,e[7]=b):b=e[7];const p=b;let x;e[8]!==r||e[9]!==t||e[10]!==i||e[11]!==a?(x=()=>{n(!t),d(i!==a||!t!==r)},e[8]=r,e[9]=t,e[10]=i,e[11]=a,e[12]=x):x=e[12];const g=x;let o;e[13]!==t||e[14]!==i||e[15]!==_?(o=async()=>{await _(i,t),d(!1)},e[13]=t,e[14]=i,e[15]=_,e[16]=o):o=e[16];const u=o;let f;e[17]!==r||e[18]!==a?(f=()=>{l(a),n(r),d(!1)},e[17]=r,e[18]=a,e[19]=f):f=e[19];const y=f;if(C){let v;return e[20]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(H,{children:s.jsx($,{className:"p-8",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})})}),e[20]=v):v=e[20],v}let N;e[21]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(ce,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(Ne,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(oe,{children:"Appearance"}),s.jsx(de,{children:"Customize your application theme and color preferences"})]})]})}),e[21]=N):N=e[21];let j;e[22]!==t?(j=t?s.jsx(fe,{className:"h-5 w-5 text-primary"}):s.jsx(je,{className:"h-5 w-5 text-primary"}),e[22]=t,e[23]=j):j=e[23];let w;e[24]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(S,{htmlFor:"dark-mode",className:"text-base font-medium cursor-pointer",children:"Dark Mode"}),e[24]=w):w=e[24];const k=t?"Using dark theme":"Using light theme";let P;e[25]!==k?(P=s.jsxs("div",{children:[w,s.jsx("p",{className:"text-sm text-muted-foreground",children:k})]}),e[25]=k,e[26]=P):P=e[26];let T;e[27]!==P||e[28]!==j?(T=s.jsxs("div",{className:"flex items-center gap-3",children:[j,P]}),e[27]=P,e[28]=j,e[29]=T):T=e[29];let A;e[30]!==g||e[31]!==t?(A=s.jsx(we,{id:"dark-mode",checked:t,onCheckedChange:g}),e[30]=g,e[31]=t,e[32]=A):A=e[32];let E;e[33]!==T||e[34]!==A?(E=s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/30",children:[T,A]}),e[33]=T,e[34]=A,e[35]=E):E=e[35];let M;e[36]!==c?(M=c&&s.jsxs(W,{className:"border-primary/50 bg-primary/5",children:[s.jsx(le,{className:"h-4 w-4 text-primary"}),s.jsx(X,{children:'You have unsaved changes. Click "Apply Theme" to save your preferences.'})]}),e[36]=c,e[37]=M):M=e[37];let O;e[38]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Your Theme"}),e[38]=O):O=e[38];let z;e[39]===Symbol.for("react.memo_cache_sentinel")?(z=Object.values(he),e[39]=z):z=e[39];let B;e[40]!==p||e[41]!==t||e[42]!==i?(B=s.jsxs("div",{children:[O,s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(v=>s.jsx(Ce,{theme:v,isSelected:i===v.id,darkMode:t,onClick:()=>p(v.id)},v.id))})]}),e[40]=p,e[41]=t,e[42]=i,e[43]=B):B=e[43];const K=!c;let F;e[44]!==u||e[45]!==K?(F=s.jsx(U,{onClick:u,disabled:K,className:"flex-1",children:"Apply Theme"}),e[44]=u,e[45]=K,e[46]=F):F=e[46];const Q=!c;let D;e[47]!==y||e[48]!==Q?(D=s.jsx(U,{onClick:y,disabled:Q,variant:"outline",children:"Reset"}),e[47]=y,e[48]=Q,e[49]=D):D=e[49];let R;e[50]!==F||e[51]!==D?(R=s.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t",children:[F,D]}),e[50]=F,e[51]=D,e[52]=R):R=e[52];let L;e[53]!==E||e[54]!==M||e[55]!==B||e[56]!==R?(L=s.jsxs(H,{children:[N,s.jsxs($,{className:"space-y-6",children:[E,M,B,R]})]}),e[53]=E,e[54]=M,e[55]=B,e[56]=R,e[57]=L):L=e[57];let Y;e[58]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(le,{className:"h-5 w-5 text-primary"})}),e[58]=Y):Y=e[58];let q;e[59]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(H,{className:"border-primary/20 bg-primary/5",children:s.jsx($,{className:"p-6",children:s.jsxs("div",{className:"flex gap-4",children:[Y,s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Per-Pet Themes Coming Soon!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Future updates will allow you to customize themes for individual pet pages, including custom background images and unique color schemes for each of your pets."})]})]})})}),e[59]=q):q=e[59];let G;return e[60]!==L?(G=s.jsxs("div",{className:"space-y-6",children:[L,q]}),e[60]=L,e[61]=G):G=e[61],G}const Pe=ne({display_name:J().min(1,"Please enter your name").max(80),avatar_url:J().url("Must be a valid URL").or(ue("")).optional(),phone:J().max(15,"Must be at most 15 characters").optional(),share_email:se().optional(),share_phone:se().optional()}),Te=ne({new_password:J().min(8,"At least 8 characters")});function Ge(){const{user:e,signOut:a}=pe(),{data:r,isLoading:_,update:C}=ge(),{register:i,handleSubmit:l,reset:t,formState:{errors:n,isSubmitting:c}}=Z({resolver:ee(Pe),defaultValues:{display_name:"",avatar_url:"",phone:""}});V.useEffect(()=>{r&&t({display_name:r.display_name??"",avatar_url:r.avatar_url??"",phone:r.phone??"",share_email:r.share_email??!1,share_phone:r.share_phone??!1})},[r,t]);const{register:d,handleSubmit:m,reset:h,formState:{errors:b,isSubmitting:p}}=Z({resolver:ee(Te),defaultValues:{new_password:""}}),x=async o=>{await C.mutateAsync(o)},g=async o=>{const{error:u}=await(await xe(async()=>{const{supabase:f}=await import("./index-i6Cfs9b8.js").then(y=>y.E);return{supabase:f}},__vite__mapDeps([0,1]),import.meta.url)).supabase.auth.updateUser({password:o.new_password});if(u)throw u;h({new_password:""})};return e?s.jsxs("div",{className:"mx-auto max-w-4xl space-y-6 p-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Account Settings"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your profile, appearance, and security settings"})]}),s.jsxs(ve,{defaultValue:"profile",className:"w-full",children:[s.jsxs(be,{className:"grid w-full grid-cols-2",children:[s.jsx(re,{value:"profile",children:"Profile & Security"}),s.jsx(re,{value:"appearance",children:"Appearance"})]}),s.jsx(te,{value:"profile",className:"space-y-6 mt-6",children:s.jsxs(H,{children:[s.jsxs(ce,{children:[s.jsx(oe,{children:"Profile Information"}),s.jsx(de,{children:"Manage your profile and sign-in details"})]}),s.jsxs($,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(S,{children:"Email"}),s.jsx(I,{value:e.email??"",disabled:!0})]}),s.jsx(ae,{}),s.jsxs("form",{onSubmit:l(x),className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(S,{htmlFor:"display_name",children:"Display name"}),s.jsx(I,{id:"display_name",placeholder:"Jane Doe",...i("display_name")}),n.display_name&&s.jsx("p",{className:"text-sm text-destructive",children:n.display_name.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(S,{htmlFor:"avatar_url",children:"Avatar URL (optional)"}),s.jsx(I,{id:"avatar_url",placeholder:"https://…",...i("avatar_url")}),n.avatar_url&&s.jsx("p",{className:"text-sm text-destructive",children:n.avatar_url.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(S,{htmlFor:"phone",children:"Phone number (optional)"}),s.jsx(I,{id:"phone",placeholder:"+1 (555) 123-4567",...i("phone")}),n.phone&&s.jsx("p",{className:"text-sm text-destructive",children:n.phone.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(S,{children:"Sharing preferences"}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...i("share_email"),id:"share_email",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",defaultChecked:r?.share_email??!1}),s.jsx(S,{htmlFor:"share_email",className:"select-none",children:"Share my email with pet finders"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...i("share_phone"),id:"share_phone",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",defaultChecked:r?.share_phone??!1}),s.jsx(S,{htmlFor:"share_phone",className:"select-none",children:"Share my phone number with pet finders"})]})]})]}),C.isError&&s.jsx(W,{variant:"destructive",children:s.jsx(X,{children:String(C.error?.message??"Save failed")})}),C.isSuccess&&s.jsx(W,{children:s.jsx(X,{children:"Profile updated."})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{type:"submit",disabled:c||_,children:c?"Saving…":"Save changes"}),s.jsx(U,{type:"button",variant:"outline",onClick:()=>t(),children:"Reset"})]})]}),s.jsx(ae,{}),s.jsxs("form",{onSubmit:m(g),className:"grid gap-3",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(S,{htmlFor:"new_password",children:"New password"}),s.jsx(I,{id:"new_password",type:"password",placeholder:"••••••••",...d("new_password")}),b.new_password&&s.jsx("p",{className:"text-sm text-destructive",children:b.new_password.message})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(U,{type:"submit",disabled:p,children:p?"Updating…":"Update password"})})]})]}),s.jsxs(ye,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Signed in as ",s.jsx("span",{className:"text-foreground",children:e.email})]}),s.jsx(U,{variant:"ghost",onClick:()=>a(),children:"Sign out"})]})]})}),s.jsx(te,{value:"appearance",className:"mt-6",children:s.jsx(ke,{})})]})]}):null}export{Ge as default};
