import{j as e}from"./radix-ui-Bptolu_l.js";import{r as n}from"./forms-BenlWNMe.js";import{b as ye,u as _e}from"./react-query-DgYD4zqU.js";import{u as Ce}from"./useAdminCheck-CA6DP32c.js";import{s as de}from"./index-CF7rRjM7.js";import{d as g,C as p,b as X,a as Z,c as oe}from"./card-CIySVGy3.js";import{B as S}from"./button-BLh6466_.js";import{L as ee,I as le}from"./input-D5K7R9e5.js";import{B as D}from"./badge-Bx5bWiwT.js";import{T as Te,a as Se,b as se,c as b,d as Re,e as N,Q as ke}from"./QRCodeDialog-CGlsO4yk.js";import{S as q,a as B,b as $,c as H,d as h}from"./select-6HIOZ6ea.js";import{c as De,d as Qe,D as Ae,a as Le,b as Fe,e as Ee}from"./dialog-BvdlrsBK.js";import{A as y,a as _}from"./alert-BehdoEGx.js";import{b as O,A as U,a as K}from"./avatar-DMdAgOnT.js";import{S as Ie}from"./switch-DlVR02HA.js";import{Q as ne,l as M,ac as W,ad as Y,ae as Me,j as re,V as ce,T as ae,ab as me,h as te,E as Pe,y as Ve,z as ze,e as qe,af as Be,ag as $e,ah as He,H as Oe}from"./icons-D6Vx8KFF.js";import{g as Ue}from"./billing-X1lU7Ov_.js";import{f as ie}from"./date-fns-CSQe5d3I.js";import"./react-dom-CWqaeSHD.js";import"./pdf-DO90N-Wx.js";import"./supabase-Dq_AJ6PJ.js";import"./router-fBLXKt6a.js";import"./utils-CBfrqCZ4.js";import"./index-CdJFUDDL.js";import"./qr-C9SoBEpz.js";import"./opentype-CPIVssqb.js";async function Ke(){const{data:a,error:c}=await de.rpc("get_all_pets_admin");if(c)throw c;return a??[]}async function xe(a){const{data:c,error:d}=await de.rpc("admin_lookup_qr_code",{p_short_id:a});if(d)throw d;const r=c;return!r||r.length===0?null:r[0]}async function We(a,c,d){const{data:r,error:m}=await de.rpc("admin_reassign_pet_qr",{p_pet_id:a,p_new_short_id:c,p_new_tag_type:d??null});if(m)throw m;const x=r;return!x||x.length===0?{success:!1,message:"No result returned from reassignment",pet_id:null,pet_name:null,new_short_id:null,new_tag_type:null,old_short_id:null,displaced_pet_id:null,displaced_pet_name:null}:x[0]}function Ye({pet:a,open:c,onOpenChange:d,onReassigned:r}){const[m,x]=n.useState(""),[R,f]=n.useState("dog"),[t,o]=n.useState(null),[P,u]=n.useState(null),[v,C]=n.useState(!1),[Q,A]=n.useState(!1);n.useEffect(()=>{c&&a&&(x(""),f(a.tag_type),o(null),u(null),A(!1))},[c,a]);const L=n.useCallback(Ge(async i=>{if(!i.trim()){o(null),u(null);return}o("loading"),u(null);try{const w=await xe(i.trim());w?(o(w),f(w.tag_type)):o("not_found")}catch(w){u(w instanceof Error?w.message:"Failed to lookup QR code"),o(null)}},400),[]);n.useEffect(()=>{L(m)},[m,L]);const F=async()=>{if(!(!a||!m.trim())){C(!0);try{const i=await We(a.pet_id,m.trim(),R);i.success?(r(),d(!1)):u(i.message)}catch(i){u(i instanceof Error?i.message:"Failed to reassign QR code")}finally{C(!1)}}};if(!a)return null;const E=t&&typeof t=="object"&&t.pet_id&&t.pet_id!==a.pet_id,l=t&&typeof t=="object"&&t.pet_id===a.pet_id,T=t&&typeof t=="object"&&!t.pet_id,V=t==="loading",I=t==="not_found",G=m.trim()&&typeof t=="object"&&t!==null&&!l&&(!E||Q);return e.jsx(De,{open:c,onOpenChange:d,children:e.jsxs(Qe,{className:"sm:max-w-lg",children:[e.jsxs(Ae,{children:[e.jsxs(Le,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Reassign QR Code"]}),e.jsx(Fe,{children:"Change the QR code assigned to this pet."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(O,{className:"h-12 w-12",children:a.photo_url?e.jsx(U,{src:a.photo_url,alt:a.pet_name}):e.jsx(K,{children:e.jsx(M,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a.pet_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Current ID: ",e.jsx("span",{className:"font-mono",children:a.short_id})]}),e.jsxs(D,{variant:a.tag_type==="dog"?"default":"secondary",className:"mt-1",children:[a.tag_type==="dog"?e.jsx(W,{className:"h-3 w-3 mr-1"}):e.jsx(Y,{className:"h-3 w-3 mr-1"}),a.tag_type==="dog"?"Dog Tag":"Cat Tag"]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Me,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"new-short-id",children:"New Short ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{id:"new-short-id",value:m,onChange:i=>x(i.target.value),placeholder:"Enter short ID to assign...",className:"pl-10",disabled:v})]})]}),V&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(ce,{className:"h-4 w-4 animate-spin"}),"Looking up QR code..."]}),I&&e.jsxs(y,{variant:"destructive",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs(_,{children:['No QR code with ID "',m,'" exists in the system.']})]}),T&&e.jsxs(y,{children:[e.jsx(me,{className:"h-4 w-4 text-green-600"}),e.jsx(_,{className:"text-green-600",children:"This QR code is available and not assigned to any pet."})]}),l&&e.jsx(y,{children:e.jsx(_,{children:"This is the pet's current QR code."})}),E&&t&&typeof t=="object"&&e.jsxs(y,{variant:"destructive",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"This QR code is currently assigned to another pet!"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-8 w-8",children:t.photo_url?e.jsx(U,{src:t.photo_url,alt:t.pet_name??""}):e.jsx(K,{children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.pet_name}),e.jsx("div",{className:"text-xs",children:t.owner_email})]})]}),e.jsxs("p",{className:"text-sm mt-2",children:[e.jsx("strong",{children:"Warning:"})," The above pet will be left without a QR code."]})]})})]}),t&&typeof t=="object"&&!l&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"tag-type",children:"Tag Type"}),e.jsxs(q,{value:R,onValueChange:i=>f(i),disabled:v,children:[e.jsx(B,{id:"tag-type",children:e.jsx($,{})}),e.jsxs(H,{children:[e.jsx(h,{value:"dog",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Dog Tag (larger)"]})}),e.jsx(h,{value:"cat",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Cat Tag (smaller)"]})})]})]}),t.tag_type!==R&&e.jsxs("p",{className:"text-xs text-amber-600",children:["Tag type will change from ",t.tag_type," to ",R,"."]})]}),E&&e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(Ie,{id:"confirm-reassign",checked:Q,onCheckedChange:A,disabled:v}),e.jsx(ee,{htmlFor:"confirm-reassign",className:"text-sm cursor-pointer",children:"I understand the other pet will lose its QR code"})]}),P&&e.jsxs(y,{variant:"destructive",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx(_,{children:P})]})]})]}),e.jsxs(Ee,{children:[e.jsx(S,{variant:"outline",onClick:()=>d(!1),disabled:v,children:"Cancel"}),e.jsx(S,{onClick:F,disabled:!G||v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 animate-spin mr-2"}),"Reassigning..."]}):"Reassign"})]})]})})}function Ge(a,c){let d;return(...r)=>{clearTimeout(d),d=setTimeout(()=>a(...r),c)}}function Je(a,c){let d;return(...r)=>{clearTimeout(d),d=setTimeout(()=>a(...r),c)}}function _s(){const{isAdmin:a,isLoading:c}=Ce(),d=ye(),[r,m]=n.useState(""),[x,R]=n.useState("all"),[f,t]=n.useState("all"),[o,P]=n.useState("all"),[u,v]=n.useState(null),[C,Q]=n.useState(null),[A,L]=n.useState(null),[F,E]=n.useState(""),[l,T]=n.useState(null),[V,I]=n.useState(null),G=n.useCallback(Je(async s=>{if(!s.trim()){T(null),I(null);return}T("loading"),I(null);try{const j=await xe(s.trim());T(j||"not_found")}catch(j){I(j instanceof Error?j.message:"Failed to lookup"),T(null)}},400),[]),{data:i,isLoading:w,isError:he}=_e({queryKey:["admin-all-pets"],queryFn:Ke,enabled:a,staleTime:3e4}),ue=s=>{E(s),G(s)},je=()=>{d.invalidateQueries({queryKey:["admin-all-pets"]})},ge=()=>{if(l&&typeof l=="object"&&l.short_id){const s=window.location.origin;window.open(`${s}/p/${l.short_id}`,"_blank")}},z=n.useMemo(()=>i?i.filter(s=>{const j=r===""||s.pet_name.toLowerCase().includes(r.toLowerCase())||s.owner_email?.toLowerCase().includes(r.toLowerCase())||s.short_id.toLowerCase().includes(r.toLowerCase()),J=x==="all"||s.species===x,we=f==="all"||s.tag_type===f,be=o==="all"||o==="missing"&&s.missing||o==="not_missing"&&!s.missing;return j&&J&&we&&be}):[],[i,r,x,f,o]),k=n.useMemo(()=>i?{total:i.length,dogs:i.filter(s=>s.species==="dog").length,cats:i.filter(s=>s.species==="cat").length,other:i.filter(s=>s.species==="other").length,missing:i.filter(s=>s.missing).length,active:i.filter(s=>s.subscription_status==="active").length}:{total:0,dogs:0,cats:0,other:0,missing:0,active:0},[i]),pe=s=>{const J=`${window.location.origin}/p/${s.short_id}`;window.open(J,"_blank")},fe=s=>{const j={id:s.pet_id,owner_id:s.owner_id,name:s.pet_name,species:s.species,breed:s.breed,color:s.color,weight:s.weight,birthdate:s.birthdate,microchip_id:s.microchip_id,description:s.description,notes:s.notes,vaccinations:s.vaccinations,photo_url:s.photo_url,created_at:s.created_at,updated_at:s.updated_at,missing:s.missing,missing_since:s.missing_since,qr_url:s.qr_url,short_id:s.short_id,tag_type:s.tag_type,environment:s.environment,paypal_subscription_id:s.paypal_subscription_id,subscription_status:s.subscription_status,subscription_activated_at:s.subscription_activated_at,subscription_expires_at:s.subscription_expires_at,subscription_plan_id:s.subscription_plan_id};Q(j)},Ne=s=>{v(u===s?null:s)},ve=s=>{switch(s){case"indoor":return e.jsx(Oe,{className:"h-3.5 w-3.5"});case"outdoor":return e.jsx(He,{className:"h-3.5 w-3.5"});case"indoor_outdoor":return e.jsx($e,{className:"h-3.5 w-3.5"});default:return null}};return c?e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-10",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):a?e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-10 max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight",children:"All Pets"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage all pets across all users"})]}),e.jsx(M,{className:"h-8 w-8 text-primary"})]}),e.jsxs(g,{className:"mb-6",children:[e.jsxs(X,{children:[e.jsxs(Z,{className:"text-lg flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5"}),"QR Code Lookup"]}),e.jsx(oe,{children:"Search for a QR code by its short ID to see which pet it belongs to"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{placeholder:"Enter short ID (e.g., abc123)...",value:F,onChange:s=>ue(s.target.value),className:"pl-10"})]})})}),l==="loading"&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm mt-4",children:[e.jsx(ce,{className:"h-4 w-4 animate-spin"}),"Looking up QR code..."]}),l==="not_found"&&F&&e.jsxs(y,{variant:"destructive",className:"mt-4",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsxs(_,{children:['No QR code found with ID "',F,'"']})]}),V&&e.jsxs(y,{variant:"destructive",className:"mt-4",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx(_,{children:V})]}),l&&typeof l=="object"&&e.jsx("div",{className:"mt-4 p-4 border rounded-lg bg-muted/30",children:e.jsx("div",{className:"flex items-start gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-mono text-lg font-semibold",children:l.short_id}),e.jsxs(D,{variant:l.tag_type==="dog"?"default":"secondary",children:[l.tag_type==="dog"?e.jsx(W,{className:"h-3 w-3 mr-1"}):e.jsx(Y,{className:"h-3 w-3 mr-1"}),l.tag_type==="dog"?"Dog Tag":"Cat Tag"]})]}),l.pet_id?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-12 w-12",children:l.photo_url?e.jsx(U,{src:l.photo_url,alt:l.pet_name??""}):e.jsx(K,{children:e.jsx(M,{className:"h-6 w-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.pet_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l.species}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l.owner_email}),l.owner_name&&e.jsx("div",{className:"text-xs text-muted-foreground",children:l.owner_name})]}),e.jsxs(S,{variant:"ghost",size:"sm",onClick:ge,className:"ml-auto",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"View"]})]}):e.jsxs(y,{className:"mt-2",children:[e.jsx(me,{className:"h-4 w-4 text-green-600"}),e.jsx(_,{className:"text-green-600",children:"This QR code is not assigned to any pet (available in pool)."})]})]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[e.jsx(g,{children:e.jsxs(p,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:k.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Pets"})]})}),e.jsx(g,{children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),k.dogs]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dogs"})]})}),e.jsx(g,{children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),k.cats]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cats"})]})}),e.jsx(g,{children:e.jsxs(p,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:k.other}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Other"})]})}),e.jsx(g,{children:e.jsxs(p,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-destructive",children:k.missing}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Missing"})]})}),e.jsx(g,{children:e.jsxs(p,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.active}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Subs"})]})})]}),e.jsxs(g,{className:"mb-6",children:[e.jsx(X,{children:e.jsx(Z,{className:"text-lg",children:"Filters"})}),e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{placeholder:"Search by name, email, or ID...",value:r,onChange:s=>m(s.target.value),className:"pl-10"})]}),e.jsxs(q,{value:x,onValueChange:R,children:[e.jsx(B,{children:e.jsx($,{placeholder:"All Species"})}),e.jsxs(H,{children:[e.jsx(h,{value:"all",children:"All Species"}),e.jsx(h,{value:"dog",children:"Dogs"}),e.jsx(h,{value:"cat",children:"Cats"}),e.jsx(h,{value:"other",children:"Other"})]})]}),e.jsxs(q,{value:f,onValueChange:t,children:[e.jsx(B,{children:e.jsx($,{placeholder:"All Tag Types"})}),e.jsxs(H,{children:[e.jsx(h,{value:"all",children:"All Tag Types"}),e.jsx(h,{value:"dog",children:"Dog Tags"}),e.jsx(h,{value:"cat",children:"Cat Tags"})]})]}),e.jsxs(q,{value:o,onValueChange:P,children:[e.jsx(B,{children:e.jsx($,{placeholder:"All Status"})}),e.jsxs(H,{children:[e.jsx(h,{value:"all",children:"All Status"}),e.jsx(h,{value:"missing",children:"Missing Only"}),e.jsx(h,{value:"not_missing",children:"Not Missing"})]})]})]})})]}),e.jsxs(g,{children:[e.jsxs(X,{children:[e.jsxs(Z,{children:["Pets (",z.length,")"]}),e.jsx(oe,{children:r||x!=="all"||f!=="all"||o!=="all"?`Showing ${z.length} of ${i?.length??0} pets`:`Total of ${i?.length??0} pets`})]}),e.jsx(p,{children:w?e.jsx("p",{className:"text-muted-foreground",children:"Loading pets..."}):he?e.jsx("p",{className:"text-destructive",children:"Error loading pets"}):z.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No pets found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Te,{children:[e.jsx(Se,{children:e.jsxs(se,{children:[e.jsx(b,{className:"w-[50px]"}),e.jsx(b,{children:"Pet"}),e.jsx(b,{children:"Owner"}),e.jsx(b,{children:"Species"}),e.jsx(b,{children:"Tag Type"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Created"}),e.jsx(b,{className:"text-right",children:"Actions"})]})}),e.jsx(Re,{children:z.map(s=>e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:"group",children:[e.jsx(N,{children:e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>Ne(s.pet_id),className:"h-8 w-8",children:u===s.pet_id?e.jsx(Ve,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})})}),e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-10 w-10",children:s.photo_url?e.jsx(U,{src:s.photo_url,alt:s.pet_name}):e.jsx(K,{children:e.jsx(M,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.pet_name}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:s.short_id})]})]})}),e.jsx(N,{children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:s.owner_email??"Unknown"}),s.owner_name&&e.jsx("div",{className:"text-xs text-muted-foreground",children:s.owner_name})]})}),e.jsx(N,{children:e.jsx(D,{variant:"outline",className:"capitalize",children:s.species})}),e.jsx(N,{children:e.jsx(D,{variant:s.tag_type==="dog"?"default":"secondary",children:s.tag_type==="dog"?"Dog Size":"Cat Size"})}),e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[s.missing&&e.jsx(D,{variant:"destructive",className:"w-fit",children:"Missing"}),e.jsx(D,{variant:Ue(s.subscription_status),className:"w-fit capitalize",children:s.subscription_status})]})}),e.jsx(N,{children:e.jsx("div",{className:"text-sm",children:ie(new Date(s.created_at),"MMM d, yyyy")})}),e.jsx(N,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>pe(s),title:"View public page",children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>fe(s),title:"View QR code",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>L(s),title:"Reassign QR code",children:e.jsx(Be,{className:"h-4 w-4"})})]})})]},s.pet_id),u===s.pet_id&&e.jsx(se,{children:e.jsx(N,{colSpan:8,className:"bg-muted/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4 px-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Pet Details"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[s.breed&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground inline",children:"Breed: "}),e.jsx("dd",{className:"inline",children:s.breed}),e.jsx("br",{})]}),s.color&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground inline",children:"Color: "}),e.jsx("dd",{className:"inline",children:s.color}),e.jsx("br",{})]}),s.weight&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground inline",children:"Weight: "}),e.jsxs("dd",{className:"inline",children:[s.weight," lbs"]}),e.jsx("br",{})]}),s.birthdate&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground inline",children:"Birthdate: "}),e.jsx("dd",{className:"inline",children:ie(new Date(s.birthdate),"MMM d, yyyy")}),e.jsx("br",{})]}),s.microchip_id&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground inline",children:"Microchip: "}),e.jsx("dd",{className:"inline font-mono",children:s.microchip_id}),e.jsx("br",{})]}),e.jsx("dt",{className:"text-muted-foreground inline",children:"Environment: "}),e.jsxs("dd",{className:"inline flex items-center gap-1",children:[ve(s.environment),e.jsx("span",{className:"capitalize",children:s.environment.replace("_"," ")})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Additional Info"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[s.description&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground",children:"Description:"}),e.jsx("dd",{className:"mb-2",children:s.description})]}),s.notes&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground",children:"Notes:"}),e.jsx("dd",{className:"mb-2",children:s.notes})]}),s.vaccinations?.rabies&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"text-muted-foreground inline",children:"Rabies Vaccination: "}),e.jsxs("dd",{className:"inline",children:["Yes",s.vaccinations.rabiesExpires&&` (expires ${ie(new Date(s.vaccinations.rabiesExpires),"MMM d, yyyy")})`]})]})]})]})]})})})]}))})]})})})]}),C&&e.jsx(ke,{pet:C,open:!!C,onOpenChange:s=>!s&&Q(null),ownerId:C.owner_id}),e.jsx(Ye,{pet:A,open:!!A,onOpenChange:s=>!s&&L(null),onReassigned:je})]}):e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-10",children:e.jsx(g,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("p",{children:"You don't have permission to view this page. (Admins/Owners only)"})]})})})})}export{_s as default};
