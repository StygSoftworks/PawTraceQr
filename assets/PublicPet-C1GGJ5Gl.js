import{c as B,f as q,a as Q,j as e,L as M,s as G}from"./index-Deiel6_c.js";import{u as K}from"./useQuery-GRybGthg.js";import{C as y,c as L,b as z,d as J,a as P}from"./card-BFQQ9ZX3.js";import{B as v}from"./badge-aiSUfDSr.js";import{B as u}from"./button-CgUHE8Ug.js";import{S as p}from"./skeleton-_Sa-fWT5.js";import{T as S,b as U,c as V,a as W,D as X}from"./dialog-CelFpYnC.js";import{A as T,a as H}from"./alert-BC0LOgqK.js";import{L as Y}from"./Logo-BnwFG1iP.js";import{c as D}from"./createLucideIcon-D7_bvTD-.js";import{P as _,M as Z}from"./paw-print-CQFDGy9y.js";import{H as ee}from"./heart-BD8C7qry.js";import{I as se}from"./info-BPbPKtt8.js";import{M as E}from"./mail-CVuE47GR.js";import"./utils-CBfrqCZ4.js";import"./index-C_ctEAKX.js";import"./index-fUIRwRZ5.js";import"./x-GMM7-eVt.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],re=D("clock",ae);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],F=D("house",te);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],A=D("phone",le);function O(s){if(!s)return"";const r=new Date(s).getTime(),c=Date.now();if(isNaN(r)||c<=r)return"just now";const f=c-r,l=Math.floor(f/(1e3*60)),n=Math.floor(l/60),i=Math.floor(n/24);if(i>0){const t=n%24;return`${i} day${i>1?"s":""}${t?`, ${t} hour${t>1?"s":""}`:""}`}if(n>0){const t=l%60;return`${n} hour${n>1?"s":""}${t?`, ${t} min`:""}`}return`${l} min`}function _e(){const s=B.c(29),{id:r}=q(),[c,f]=Q.useState(!1);let l;s[0]!==r?(l=["public-pet",r],s[0]=r,s[1]=l):l=s[1];const n=!!r;let i;s[2]!==r?(i=async()=>{const{data:R,error:I}=await G.from("public_pets").select("*").eq("short_id",r).maybeSingle();if(I)throw I;return R},s[2]=r,s[3]=i):i=s[3];let t;s[4]!==l||s[5]!==n||s[6]!==i?(t={queryKey:l,enabled:n,queryFn:i,staleTime:6e4},s[4]=l,s[5]=n,s[6]=i,s[7]=t):t=s[7];const{data:a,isLoading:k,isError:C}=K(t);let j;s[8]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"})]}),s[8]=j):j=s[8];let g;s[9]===Symbol.for("react.memo_cache_sentinel")?(g=e.jsx(Y,{}),s[9]=g):g=s[9];let N;s[10]===Symbol.for("react.memo_cache_sentinel")?(N=e.jsx("header",{className:"sticky top-0 z-30 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 shadow-sm",children:e.jsxs("div",{className:"mx-auto flex h-16 max-w-5xl items-center justify-between px-4 sm:px-6",children:[g,e.jsx(u,{asChild:!0,variant:"outline",size:"sm",className:"gap-2",children:e.jsxs(M,{to:"/",children:[e.jsx(F,{className:"h-4 w-4"}),"Home"]})})]})}),s[10]=N):N=s[10];let o;s[11]!==a||s[12]!==C||s[13]!==k?(o=e.jsx("main",{className:"relative mx-auto max-w-5xl px-4 sm:px-6 py-8 md:py-12",children:k?e.jsx(y,{className:"overflow-hidden shadow-xl",children:e.jsxs("div",{className:"grid gap-6 p-6 lg:grid-cols-[400px,1fr]",children:[e.jsx(p,{className:"h-96 w-full rounded-lg"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"h-8 w-48"}),e.jsx(p,{className:"h-6 w-64"}),e.jsx(p,{className:"h-4 w-full"}),e.jsx(p,{className:"h-4 w-full"}),e.jsx(p,{className:"h-24 w-full"})]})]})}):C||!a?e.jsxs(y,{className:"shadow-xl",children:[e.jsx(L,{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 bg-destructive/10 rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"h-6 w-6 text-destructive"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-2xl",children:"Pet Not Found"}),e.jsx(J,{className:"text-base",children:"This QR code may be invalid or the pet profile is no longer available"})]})]})}),e.jsx(P,{children:e.jsx(u,{asChild:!0,className:"gap-2",children:e.jsxs(M,{to:"/",children:[e.jsx(F,{className:"h-4 w-4"}),"Go to Homepage"]})})})]}):e.jsxs("div",{className:"space-y-6",children:[a.missing&&e.jsxs(T,{variant:"destructive",className:"animate-in fade-in-50 slide-in-from-top-2 duration-300",children:[e.jsx(S,{className:"h-5 w-5"}),e.jsxs(H,{className:"text-base font-medium",children:[e.jsx("span",{className:"block mb-1",children:"🚨 This pet is currently MISSING!"}),a.missing_since&&e.jsxs("span",{className:"text-sm opacity-90",children:["Missing for ",O(a.missing_since)]})]})]}),e.jsxs(y,{className:"overflow-hidden shadow-xl border-primary/10",children:[e.jsx(L,{className:"space-y-4 bg-slate-50/50 dark:bg-slate-900/50",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-xl flex items-center justify-center ring-4 ring-primary/5",children:e.jsx(_,{className:"h-5 w-5 text-primary"})}),e.jsx(z,{className:"text-3xl tracking-tight",children:a.name})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(v,{variant:"secondary",className:"capitalize text-sm px-3 py-1",children:[a.species==="dog"?"🐕":a.species==="cat"?"🐱":"🐾"," ",a.species]}),a.breed&&e.jsx(v,{variant:"outline",className:"text-sm px-3 py-1",children:a.breed}),a.color&&e.jsx(v,{variant:"outline",className:"text-sm px-3 py-1",children:a.color})]})]}),e.jsx(v,{variant:a.missing?"destructive":"default",className:`text-sm px-4 py-2 gap-2 ${a.missing?"animate-pulse":""}`,children:a.missing?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4"}),"Missing"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"h-4 w-4"}),"Safe at Home"]})})]})}),e.jsxs(P,{className:"grid gap-8 p-6 lg:grid-cols-[1fr,400px]",children:[e.jsxs("div",{className:"space-y-6 order-2 lg:order-1",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),"About ",a.name]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.description||"No additional description provided."})]}),(a.owner_email||a.owner_phone)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(A,{className:"h-5 w-5 text-primary"}),"Contact Owner"]}),e.jsx(T,{className:"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950",children:e.jsx(H,{className:"text-blue-800 dark:text-blue-200",children:"If you've found this pet, please contact the owner using the information below"})}),e.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-primary/20",children:[a.owner_phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("a",{href:`tel:${a.owner_phone}`,className:"text-primary hover:underline font-medium",children:a.owner_phone})]})]}),a.owner_email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(E,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("a",{href:`mailto:${a.owner_email}`,className:"text-primary hover:underline font-medium",children:a.owner_email})]})]}),a.missing&&e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx("div",{className:"h-10 w-10 bg-orange-100 dark:bg-orange-950 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Seen"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.missing_since?O(a.missing_since)+" ago":"Recently"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[a.owner_phone&&e.jsx(u,{asChild:!0,className:"flex-1 gap-2",variant:"success",children:e.jsxs("a",{href:`tel:${a.owner_phone}`,children:[e.jsx(A,{className:"h-4 w-4"}),"Call Owner"]})}),a.owner_email&&e.jsx(u,{asChild:!0,variant:"outline",className:"flex-1 gap-2",children:e.jsxs("a",{href:`mailto:${a.owner_email}`,children:[e.jsx(E,{className:"h-4 w-4"}),"Send Email"]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"Found This Pet?"]}),e.jsx(T,{children:e.jsx(H,{className:"space-y-2",children:e.jsx("p",{className:"text-sm",children:"Please share your location with the owner when you contact them. This helps reunite pets faster!"})})})]})]}),e.jsx("div",{className:"space-y-4 order-1 lg:order-2",children:a.photo_url?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>f(!0),className:"group relative w-full overflow-hidden rounded-xl border-2 border-primary/10 ring-4 ring-primary/5 transition-all hover:scale-[1.02] hover:shadow-lg cursor-pointer",children:[e.jsx("img",{src:a.photo_url,alt:`${a.name}`,className:"w-full h-auto max-h-[600px] object-contain bg-white"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:e.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity bg-black/70 px-4 py-2 rounded-lg text-sm",children:"Click to enlarge"})})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Click image to view full size"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 rounded-xl border-2 border-dashed border-primary/20 bg-slate-50 dark:bg-slate-900",children:[e.jsx(_,{className:"h-16 w-16 text-primary/30 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No photo provided"})]})})]})]}),e.jsx(y,{className:"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:e.jsxs(P,{className:"p-6 text-center space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Powered by PawTrace"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Protect your own pet with a smart QR tag"}),e.jsx(u,{asChild:!0,variant:"outline",className:"gap-2",children:e.jsx(M,{to:"/register",children:"Create Free Account"})})]})})]})}),s[11]=a,s[12]=C,s[13]=k,s[14]=o):o=s[14];let b;s[15]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsx(_,{className:"h-5 w-5"}),s[15]=b):b=s[15];const $=a?.name;let m;s[16]!==$?(m=e.jsx(U,{className:"p-6 pb-0",children:e.jsxs(V,{className:"flex items-center gap-2",children:[b,$,"'s Photo"]})}),s[16]=$,s[17]=m):m=s[17];let d;s[18]!==a?(d=a?.photo_url&&e.jsx("div",{className:"p-6 pt-4 overflow-auto",children:e.jsx("img",{src:a.photo_url,alt:`${a.name} full size`,className:"w-full h-auto rounded-lg"})}),s[18]=a,s[19]=d):d=s[19];let x;s[20]!==m||s[21]!==d?(x=e.jsxs(W,{className:"max-w-4xl max-h-[90vh] p-0",children:[m,d]}),s[20]=m,s[21]=d,s[22]=x):x=s[22];let h;s[23]!==c||s[24]!==x?(h=e.jsx(X,{open:c,onOpenChange:f,children:x}),s[23]=c,s[24]=x,s[25]=h):h=s[25];let w;return s[26]!==h||s[27]!==o?(w=e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[j,N,o,h]}),s[26]=h,s[27]=o,s[28]=w):w=s[28],w}export{_e as default};
