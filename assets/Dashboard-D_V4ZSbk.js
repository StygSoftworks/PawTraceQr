const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browser-D04LV2X3.js","./index-qHN8JUzl.js","./index-CziBY1zU.css"])))=>i.map(i=>d[i]);
import{c as W,j as a,u as Tt,_ as An,s as K,a as Xe,r as d,D as lt,b as Fn,T as Bn}from"./index-qHN8JUzl.js";import{u as Mt}from"./useQuery-qoEsCVFG.js";import{u as vt}from"./useMutation-DUtgXSpa.js";import{C as Ee,a as Re,b as De,c as wt,d as Ne}from"./card-BODpxPvT.js";import{B as Ye}from"./badge-wi5LYo8P.js";import{T as Wn,a as Ln,b as ct,c as dt}from"./tabs-SU2mn_ql.js";import{B as Q}from"./button-tobOAEAn.js";import{S as ue}from"./skeleton-B17MdNFK.js";import{A as rr,a as nr,b as ar,c as sr,d as or,e as ir,f as lr,g as cr,T as dr}from"./alert-dialog-CdSmfIZ_.js";import{u as $n,S as ur,P as At,a as qn}from"./switch-DWOiumSO.js";import{L as ee,I as le}from"./input-CTx03tUk.js";import{A as mr,a as fr}from"./alert-CIzEAwLW.js";import{l as Vn,D as hr,a as pr,b as gr,c as xr,d as vr,e as wr,M as ut,C as Hn,E as zn}from"./dialog-BYDqoWIe.js";import{c as X,a as H}from"./utils-DZe2gSb_.js";import{T as yt,M as Un,c as Je,R as yr,A as Et,C as br,a as jr}from"./index-1WXq63Bv.js";import{P as Yn}from"./phone-bbrhZ1ni.js";import{E as Nr}from"./eye-C4VoXWfx.js";import{u as Qn,a as Kn,o as Ft,s as ie,n as Gn,_ as Xn,b as Jn}from"./zod-DNXHFnix.js";import{T as Zn}from"./textarea-ByMz_DzL.js";import{P as L,r as Sr}from"./index-C9IopEGe.js";import{u as ea,a as bt,c as Cr,b as ce,d as ta,e as V,f as me,g as ra,P as kr}from"./index-Cnq1M-sX.js";import{u as re,c as Pr,a as qe}from"./index-B9cq6VX5.js";import{P as _r,h as Tr,u as Mr,R as Er,F as Rr,D as Dr,a as na,b as aa,O as sa,C as oa}from"./index-mKUmtv_d.js";import{C as Or}from"./chevron-down-C3JHFPcY.js";import{C as Ir}from"./check-CF-w6r38.js";import{C as ia}from"./chevron-up-LQbeJBei.js";import{S as mt}from"./separator-DX9tfBM5.js";import{X as la}from"./x-DpsI2qSb.js";import{P as je}from"./paw-print-DvI5OTen.js";import{C as Ue}from"./circle-alert-B2FQO-iy.js";import{F as ca}from"./file-text-C3ziCHSu.js";import"./index-DMgKJOEx.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bt=X("activity",da);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],ma=X("archive",ua);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ha=X("calendar",fa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ga=X("camera",pa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],va=X("chevrons-up-down",xa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ya=X("copy",wa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ja=X("download",ba);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Sa=X("image",Na);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wt=X("plus",Ca);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ar=X("qr-code",ka);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qe=X("refresh-cw",Pa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ta=X("search",_a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ea=X("square-pen",Ma);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]],Da=X("syringe",Ra);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ia=X("upload",Oa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Fa=X("weight",Aa);function Ba(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("w-full caption-bottom text-sm",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:a.jsx("table",{"data-slot":"table",className:s,...n})}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function Wa(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("[&_tr]:border-b",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx("thead",{"data-slot":"table-header",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function La(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("[&_tr:last-child]:border-0",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx("tbody",{"data-slot":"table-body",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function Fr(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx("tr",{"data-slot":"table-row",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function Lt(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx("th",{"data-slot":"table-head",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function $t(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx("td",{"data-slot":"table-cell",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function $a(t){const e=W.c(18),{days:r}=t,n=r===void 0?14:r,{user:s}=Tt(),o=s?.id??null;let i,c;e[0]!==n||e[1]!==o?(i=["scan_events",o,n],c=()=>o?Vn(o,n):Promise.resolve([]),e[0]=n,e[1]=o,e[2]=i,e[3]=c):(i=e[2],c=e[3]);const l=!!o;let u;e[4]!==i||e[5]!==c||e[6]!==l?(u={queryKey:i,queryFn:c,enabled:l,staleTime:3e4},e[4]=i,e[5]=c,e[6]=l,e[7]=u):u=e[7];const{data:m,isLoading:f,isError:x}=Mt(u);let w;e[8]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(Re,{children:"QR Scan Events"}),e[8]=w):w=e[8];let v;e[9]!==n?(v=a.jsxs(De,{children:[w,a.jsxs(wt,{children:["Last ",n," days"]})]}),e[9]=n,e[10]=v):v=e[10];let p;e[11]!==m||e[12]!==x||e[13]!==f?(p=a.jsx(Ee,{children:f?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading…"}):x?a.jsx("div",{className:"text-sm text-destructive",children:"Failed to load scans."}):m?.length?a.jsxs(Ba,{children:[a.jsx(Wa,{children:a.jsxs(Fr,{children:[a.jsx(Lt,{children:"When"}),a.jsx(Lt,{children:"Pet"})]})}),a.jsx(La,{children:m.map(qa)})]}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"No scans yet."})}),e[11]=m,e[12]=x,e[13]=f,e[14]=p):p=e[14];let j;return e[15]!==v||e[16]!==p?(j=a.jsxs(Ne,{children:[v,p]}),e[15]=v,e[16]=p,e[17]=j):j=e[17],j}function qa(t){return a.jsxs(Fr,{children:[a.jsx($t,{className:"whitespace-nowrap",children:new Date(t.scanned_at).toLocaleString()}),a.jsx($t,{className:"font-medium",children:t.pet_name})]},t.id)}async function Va(t){return await(await An(async()=>{const{default:r}=await import("./browser-D04LV2X3.js").then(n=>n.b);return{default:r}},__vite__mapDeps([0,1,2]),import.meta.url)).default.toDataURL(t,{errorCorrectionLevel:"M",margin:1,scale:8,color:{dark:"#000000",light:"#ffffff"}})}async function Ha(t){return await(await fetch(t)).blob()}async function za(t,e,r){const n=`${t}/${e}.png`,{error:s}=await K.storage.from("pet-qr").upload(n,r,{contentType:"image/png",upsert:!0});if(s)throw s;const{data:o}=K.storage.from("pet-qr").getPublicUrl(n);return o.publicUrl}async function Rt(t,e){const r=`https://www.pawtraceqr.com/p/${e}`,n=await Va(r),s=await Ha(n);return await za(t,e,s)}let Ua=t=>crypto.getRandomValues(new Uint8Array(t)),Ya=(t,e,r)=>{let n=(2<<Math.log2(t.length-1))-1,s=-~(1.6*n*e/t.length);return(o=e)=>{let i="";for(;;){let c=r(s),l=s|0;for(;l--;)if(i+=t[c[l]&n]||"",i.length>=o)return i}}},Qa=(t,e=21)=>Ya(t,e|0,Ua);const Ka="0123456789abcdefghijklmnopqrstuvwxyz";function Ga(t=4){return Qa(Ka,t)()}async function Xa(t){let e=3;for(let r=0;r<7;r++){const n=Ga(e),{data:s,error:o}=await K.from("pets").insert({...t,short_id:n}).select("*").single();if(!o)return s;if(o.code==="23505"&&o.message.includes("pets_short_id_key")){e++;continue}throw o}throw new Error("Could not generate a unique short id for pet.")}async function $e(t,e){const{error:r}=await K.from("pets").update(e).eq("id",t);if(r)throw r;const{data:n,error:s}=await K.from("pets").select("*").eq("id",t).maybeSingle();return s?(console.warn("updatePet: select after update blocked by RLS:",s?.message),{id:t,...e}):n??{id:t,...e}}async function Ja(t){const{data:e,error:r}=await K.from("pets").select("*").eq("owner_id",t).order("created_at",{ascending:!1});if(r)throw r;return e??[]}async function qt(t,e,r){if(!r||r.size===0)throw new Error("Empty image blob");const n=r.type||"image/webp",s=n==="image/jpeg"||n==="image/jpg"?"jpg":n==="image/png"?"png":n==="image/avif"?"avif":"webp",o=Date.now(),i=`${t}/${e}-${o}.${s}`,{error:c}=await K.storage.from("pet-photos").upload(i,r,{contentType:n,upsert:!1});if(c)throw console.error("storage.upload error:",c),c;const{data:l}=K.storage.from("pet-photos").getPublicUrl(i);return l.publicUrl}async function Za(t){const{error:e}=await K.from("pets").delete().eq("id",t);if(e)throw e}async function es(t){if(!t)return;const e=t.indexOf("/pet-photos/");if(e===-1)return;const r=t.substring(e+12);if(!r)return;const{error:n}=await K.storage.from("pet-photos").remove([r]);n&&console.warn("storage.remove warning:",n.message)}async function ts(t){const{data:e,error:r}=await K.from("pets").select("id, qr_url").eq("owner_id",t);if(r)throw r;for(const n of e??[])if(!n.qr_url){const s=await Rt(t,n.id),{error:o}=await K.from("pets").update({qr_url:s}).eq("id",n.id);if(o)throw o}}function rs({pet:t,open:e,onOpenChange:r,ownerId:n}){const s=Xe(),[o,i]=d.useState(!1),[c,l]=d.useState(t?.qr_url??null),u=async()=>{if(!(!t||c)){i(!0);try{const v=await Rt(n,t.short_id);await $e(t.id,{qr_url:v}),l(v),await s.invalidateQueries({queryKey:["pets",n]})}catch(v){alert(v?.message??"Failed to generate QR code")}finally{i(!1)}}},m=v=>{v&&t&&!t.qr_url&&!c&&u(),r(v)},f=async v=>{if(v)try{await navigator.clipboard.writeText(v),alert("Copied to clipboard")}catch{alert("Failed to copy")}},x=v=>{if(!v||!t)return;const p=document.createElement("a");p.href=v,p.download=`${t.name}-qr.png`,p.target="_blank",p.rel="noopener noreferrer",p.click()},w=c||t?.qr_url;return a.jsx(hr,{open:e,onOpenChange:m,children:a.jsxs(pr,{className:"sm:max-w-md bg-white dark:bg-[#1E1F24] border-2",children:[a.jsx(gr,{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 bg-[#3B3A7A] rounded-xl flex items-center justify-center shadow-md",children:a.jsx(Ar,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsxs(xr,{className:"text-xl text-foreground",children:["QR Code ",t?`– ${t.name}`:""]}),a.jsx(vr,{className:"text-muted-foreground",children:"Scan to open the public pet page"})]})]})}),a.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:o?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-8",children:[a.jsx(Qe,{className:"h-4 w-4 animate-spin"}),"Generating QR code…"]}):w?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-8 bg-white rounded-md border-4 border-[#3B3A7A] shadow-lg",children:a.jsx("img",{src:w,alt:"QR code",className:"h-64 w-64 object-contain",style:{backgroundColor:"#ffffff"}})}),a.jsxs("div",{className:"w-full space-y-2",children:[a.jsx(ee,{className:"text-sm font-semibold text-foreground",children:"QR Code URL"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(le,{readOnly:!0,value:w,className:"text-xs bg-background text-foreground border-2"}),a.jsx(Q,{type:"button",variant:"outline",size:"icon",onClick:()=>f(w),className:"flex-shrink-0",title:"Copy URL",children:a.jsx(ya,{className:"h-4 w-4"})})]}),a.jsxs(Q,{type:"button",onClick:()=>x(w),className:"w-full gap-2 bg-[#3B3A7A] hover:bg-[#3B3A7A]/90 text-white",children:[a.jsx(ja,{className:"h-4 w-4"}),"Download QR Code"]})]})]}):a.jsx("div",{className:"text-sm text-muted-foreground py-8",children:"No QR code available"})}),a.jsx(wr,{children:a.jsx(Q,{type:"button",variant:"outline",onClick:()=>r(!1),className:"border-2",children:"Close"})})]})})}function ns({pet:t,open:e,onOpenChange:r,onDeleted:n}){const[s,o]=d.useState(!1),i=async()=>{if(t){o(!0);try{t.photo_url&&await es(t.photo_url),await Za(t.id),n(),r(!1)}catch(c){alert(c?.message??"Failed to delete pet")}finally{o(!1)}}};return t?a.jsx(rr,{open:e,onOpenChange:r,children:a.jsxs(nr,{children:[a.jsxs(ar,{children:[a.jsxs(sr,{className:"flex items-center gap-2",children:[a.jsx(yt,{className:"h-5 w-5 text-destructive"}),"Delete ",t.name,"?"]}),a.jsxs(or,{children:["This will permanently remove the pet profile",t.photo_url?" and its photo":"",". This action cannot be undone."]})]}),a.jsxs(ir,{children:[a.jsx(lr,{disabled:s,children:"Cancel"}),a.jsx(cr,{disabled:s,onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 gap-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx(Qe,{className:"h-4 w-4 animate-spin"}),"Deleting…"]}):a.jsxs(a.Fragment,{children:[a.jsx(dr,{className:"h-4 w-4"}),"Delete"]})})]})]})}):null}const Br=6048e5,as=864e5,Vt=Symbol.for("constructDateFrom");function fe(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Vt in t?t[Vt](e):t instanceof Date?new t.constructor(e):new Date(e)}function oe(t,e){return fe(e||t,t)}let ss={};function Ze(){return ss}function Ve(t,e){const r=Ze(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=oe(t,e?.in),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Ke(t,e){return Ve(t,{...e,weekStartsOn:1})}function Wr(t,e){const r=oe(t,e?.in),n=r.getFullYear(),s=fe(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=Ke(s),i=fe(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const c=Ke(i);return r.getTime()>=o.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Ht(t){const e=oe(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function os(t,...e){const r=fe.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function zt(t,e){const r=oe(t,e?.in);return r.setHours(0,0,0,0),r}function is(t,e,r){const[n,s]=os(r?.in,t,e),o=zt(n),i=zt(s),c=+o-Ht(o),l=+i-Ht(i);return Math.round((c-l)/as)}function ls(t,e){const r=Wr(t,e),n=fe(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Ke(n)}function cs(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ds(t){return!(!cs(t)&&typeof t!="number"||isNaN(+oe(t)))}function us(t,e){const r=oe(t,e?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const ms={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fs=(t,e,r)=>{let n;const s=ms[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function ft(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const hs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ps={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gs={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xs={date:ft({formats:hs,defaultWidth:"full"}),time:ft({formats:ps,defaultWidth:"full"}),dateTime:ft({formats:gs,defaultWidth:"full"})},vs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ws=(t,e,r,n)=>vs[t];function Fe(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,c=r?.width?String(r.width):i;s=t.formattingValues[c]||t.formattingValues[i]}else{const i=t.defaultWidth,c=r?.width?String(r.width):t.defaultWidth;s=t.values[c]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const ys={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bs={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},js={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ns={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ss={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Cs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ks=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ps={ordinalNumber:ks,era:Fe({values:ys,defaultWidth:"wide"}),quarter:Fe({values:bs,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Fe({values:js,defaultWidth:"wide"}),day:Fe({values:Ns,defaultWidth:"wide"}),dayPeriod:Fe({values:Ss,defaultWidth:"wide",formattingValues:Cs,defaultFormattingWidth:"wide"})};function Be(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],c=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?Ts(c,f=>f.test(i)):_s(c,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const m=e.slice(i.length);return{value:u,rest:m}}}function _s(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Ts(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Ms(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const c=e.slice(s.length);return{value:i,rest:c}}}const Es=/^(\d+)(th|st|nd|rd)?/i,Rs=/\d+/i,Ds={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Os={any:[/^b/i,/^(a|c)/i]},Is={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},As={any:[/1/i,/2/i,/3/i,/4/i]},Fs={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ws={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ls={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$s={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vs={ordinalNumber:Ms({matchPattern:Es,parsePattern:Rs,valueCallback:t=>parseInt(t,10)}),era:Be({matchPatterns:Ds,defaultMatchWidth:"wide",parsePatterns:Os,defaultParseWidth:"any"}),quarter:Be({matchPatterns:Is,defaultMatchWidth:"wide",parsePatterns:As,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Be({matchPatterns:Fs,defaultMatchWidth:"wide",parsePatterns:Bs,defaultParseWidth:"any"}),day:Be({matchPatterns:Ws,defaultMatchWidth:"wide",parsePatterns:Ls,defaultParseWidth:"any"}),dayPeriod:Be({matchPatterns:$s,defaultMatchWidth:"any",parsePatterns:qs,defaultParseWidth:"any"})},Hs={code:"en-US",formatDistance:fs,formatLong:xs,formatRelative:ws,localize:Ps,match:Vs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zs(t,e){const r=oe(t,e?.in);return is(r,us(r))+1}function Us(t,e){const r=oe(t,e?.in),n=+Ke(r)-+ls(r);return Math.round(n/Br)+1}function Lr(t,e){const r=oe(t,e?.in),n=r.getFullYear(),s=Ze(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=fe(e?.in||t,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const c=Ve(i,e),l=fe(e?.in||t,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const u=Ve(l,e);return+r>=+c?n+1:+r>=+u?n:n-1}function Ys(t,e){const r=Ze(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Lr(t,e),o=fe(e?.in||t,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Ve(o,e)}function Qs(t,e){const r=oe(t,e?.in),n=+Ve(r,e)-+Ys(r,e);return Math.round(n/Br)+1}function A(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const de={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return A(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):A(r+1,2)},d(t,e){return A(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return A(t.getHours()%12||12,e.length)},H(t,e){return A(t.getHours(),e.length)},m(t,e){return A(t.getMinutes(),e.length)},s(t,e){return A(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return A(s,e.length)}},_e={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ut={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return de.y(t,e)},Y:function(t,e,r,n){const s=Lr(t,n),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return A(i,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):A(o,e.length)},R:function(t,e){const r=Wr(t);return A(r,e.length)},u:function(t,e){const r=t.getFullYear();return A(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return A(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return A(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return de.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return A(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=Qs(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):A(s,e.length)},I:function(t,e,r){const n=Us(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):A(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):de.d(t,e)},D:function(t,e,r){const n=zs(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):A(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return A(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return A(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return A(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=_e.noon:n===0?s=_e.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=_e.evening:n>=12?s=_e.afternoon:n>=4?s=_e.morning:s=_e.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return de.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):de.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):A(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):A(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):de.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):de.s(t,e)},S:function(t,e){return de.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Qt(n);case"XXXX":case"XX":return be(n);case"XXXXX":case"XXX":default:return be(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Qt(n);case"xxxx":case"xx":return be(n);case"xxxxx":case"xxx":default:return be(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Yt(n,":");case"OOOO":default:return"GMT"+be(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Yt(n,":");case"zzzz":default:return"GMT"+be(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return A(n,e.length)},T:function(t,e,r){return A(+t,e.length)}};function Yt(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+e+A(o,2)}function Qt(t,e){return t%60===0?(t>0?"-":"+")+A(Math.abs(t)/60,2):be(t,e)}function be(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=A(Math.trunc(n/60),2),o=A(n%60,2);return r+s+e+o}const Kt=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$r=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ks=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Kt(t,e);let o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Kt(n,e)).replace("{{time}}",$r(s,e))},Gs={p:$r,P:Ks},Xs=/^D+$/,Js=/^Y+$/,Zs=["D","DD","YY","YYYY"];function eo(t){return Xs.test(t)}function to(t){return Js.test(t)}function ro(t,e,r){const n=no(t,e,r);if(console.warn(n),Zs.includes(t))throw new RangeError(n)}function no(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ao=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,so=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oo=/^'([^]*?)'?$/,io=/''/g,lo=/[a-zA-Z]/;function co(t,e,r){const n=Ze(),s=n.locale??Hs,o=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,c=oe(t,r?.in);if(!ds(c))throw new RangeError("Invalid time value");let l=e.match(so).map(m=>{const f=m[0];if(f==="p"||f==="P"){const x=Gs[f];return x(m,s.formatLong)}return m}).join("").match(ao).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const f=m[0];if(f==="'")return{isToken:!1,value:uo(m)};if(Ut[f])return{isToken:!0,value:m};if(f.match(lo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(l=s.localize.preprocessor(c,l));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(m=>{if(!m.isToken)return m.value;const f=m.value;(to(f)||eo(f))&&ro(f,e,String(t));const x=Ut[f[0]];return x(c,f,s.localize,u)}).join("")}function uo(t){const e=t.match(oo);return e?e[1].replace(io,"'"):t}function mo(){const t=W.c(34),e=Xe();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={queryKey:["location-shares"],queryFn:vo},t[0]=r):r=t[0];const{data:n,isLoading:s}=Mt(r);let o;t[1]!==e?(o={mutationFn:xo,onSuccess:()=>{e.invalidateQueries({queryKey:["location-shares"]})}},t[1]=e,t[2]=o):o=t[2];const i=vt(o);let c;t[3]!==e?(c={mutationFn:go,onSuccess:()=>{e.invalidateQueries({queryKey:["location-shares"]})}},t[3]=e,t[4]=c):c=t[4];const l=vt(c),u=po;if(s){let N;t[5]===Symbol.for("react.memo_cache_sentinel")?(N=a.jsx(De,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(ut,{className:"h-5 w-5"}),"Location Shares"]})}),t[5]=N):N=t[5];let k;return t[6]===Symbol.for("react.memo_cache_sentinel")?(k=a.jsxs(Ne,{children:[N,a.jsxs(Ee,{className:"space-y-3",children:[a.jsx(ue,{className:"h-24 w-full"}),a.jsx(ue,{className:"h-24 w-full"})]})]}),t[6]=k):k=t[6],k}let m,f,x,w,v,p;if(t[7]!==l||t[8]!==i||t[9]!==n){p=Symbol.for("react.early_return_sentinel");e:{const N=n?.filter(ho)||[],k=N.filter(fo).length;if(N.length===0){let y;t[16]===Symbol.for("react.memo_cache_sentinel")?(y=a.jsx(De,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[a.jsx(ut,{className:"h-5 w-5"}),"Location Shares"]})}),t[16]=y):y=t[16];let R;t[17]===Symbol.for("react.memo_cache_sentinel")?(R=a.jsxs(Ne,{children:[y,a.jsx(Ee,{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"No location shares yet. When someone finds your pet and shares their location, it will appear here."})})]}),t[17]=R):R=t[17],p=R;break e}f=Ne;let T;t[18]===Symbol.for("react.memo_cache_sentinel")?(T=a.jsx(ut,{className:"h-5 w-5"}),t[18]=T):T=t[18];let g;t[19]!==k?(g=k>0&&a.jsxs(Ye,{variant:"destructive",className:"ml-auto",children:[k," New"]}),t[19]=k,t[20]=g):g=t[20],t[21]!==g?(v=a.jsx(De,{children:a.jsxs(Re,{className:"flex items-center gap-2",children:[T,"Location Shares",g]})}),t[21]=g,t[22]=v):v=t[22],m=Ee,x="space-y-4";let E;t[23]!==l||t[24]!==i?(E=y=>a.jsxs("div",{className:`border rounded-lg p-4 space-y-3 ${y.viewed_at?"border-border":"border-primary bg-primary/5"}`,children:[a.jsx("div",{className:"flex items-start justify-between gap-3",children:a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-semibold",children:y.pet_name}),!y.viewed_at&&a.jsx(Ye,{variant:"secondary",className:"text-xs",children:"New"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Hn,{className:"h-3.5 w-3.5"}),co(new Date(y.shared_at),"MMM d, yyyy 'at' h:mm a")]}),y.accuracy&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accuracy: ±",Math.round(y.accuracy),"m"]})]})}),y.finder_note&&a.jsxs("div",{className:"bg-muted/50 rounded p-3 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-muted-foreground",children:[a.jsx(Un,{className:"h-3 w-3"}),"Message from finder"]}),a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:y.finder_note})]}),y.finder_contact&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Yn,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsx("a",{href:y.finder_contact.includes("@")?`mailto:${y.finder_contact}`:`tel:${y.finder_contact}`,className:"text-primary hover:underline",children:y.finder_contact})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(Q,{size:"sm",onClick:()=>u(Number(y.latitude),Number(y.longitude)),className:"flex-1 gap-2",children:[a.jsx(zn,{className:"h-3.5 w-3.5"}),"Open in Maps"]}),!y.viewed_at&&a.jsx(Q,{size:"sm",variant:"outline",onClick:()=>i.mutate(y.id),disabled:i.isPending,children:a.jsx(Nr,{className:"h-3.5 w-3.5"})}),a.jsx(Q,{size:"sm",variant:"ghost",onClick:()=>l.mutate(y.id),disabled:l.isPending,children:a.jsx(ma,{className:"h-3.5 w-3.5"})})]})]},y.id),t[23]=l,t[24]=i,t[25]=E):E=t[25],w=N.map(E)}t[7]=l,t[8]=i,t[9]=n,t[10]=m,t[11]=f,t[12]=x,t[13]=w,t[14]=v,t[15]=p}else m=t[10],f=t[11],x=t[12],w=t[13],v=t[14],p=t[15];if(p!==Symbol.for("react.early_return_sentinel"))return p;let j;t[26]!==m||t[27]!==x||t[28]!==w?(j=a.jsx(m,{className:x,children:w}),t[26]=m,t[27]=x,t[28]=w,t[29]=j):j=t[29];let _;return t[30]!==f||t[31]!==v||t[32]!==j?(_=a.jsxs(f,{children:[v,j]}),t[30]=f,t[31]=v,t[32]=j,t[33]=_):_=t[33],_}function fo(t){return!t.viewed_at}function ho(t){return!t.archived_at}function po(t,e){const r=`https://www.google.com/maps/search/?api=1&query=${t},${e}`;window.open(r,"_blank")}async function go(t){const{error:e}=await K.from("location_shares").update({archived_at:new Date().toISOString()}).eq("id",t);if(e)throw e}async function xo(t){const{error:e}=await K.from("location_shares").update({viewed_at:new Date().toISOString()}).eq("id",t);if(e)throw e}async function vo(){const{data:t}=await K.auth.getUser(),{user:e}=t;if(!e)return[];const{data:r,error:n}=await K.from("location_shares").select(`
          id,
          pet_id,
          latitude,
          longitude,
          accuracy,
          finder_note,
          finder_contact,
          shared_at,
          viewed_at,
          archived_at,
          pets!inner(name)
        `).eq("owner_id",e.id).is("archived_at",null).order("shared_at",{ascending:!1}).limit(10);if(n)throw n;return(r||[]).map(wo)}function wo(t){return{...t,pet_name:t.pets.name}}function yo(t){const e=Xe(),[r,n]=d.useState(!1);return{backfillAllQR:async()=>{if(t){n(!0);try{await ts(t),await e.invalidateQueries({queryKey:["pets",t]}),alert("QR backfill completed successfully")}catch(o){alert(o?.message??"Backfill failed")}finally{n(!1)}}},isBackfilling:r}}function Gt(t,[e,r]){return Math.min(r,Math.max(e,t))}var qr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bo="VisuallyHidden",jo=d.forwardRef((t,e)=>a.jsx(L.span,{...t,ref:e,style:{...qr,...t.style}}));jo.displayName=bo;var No=[" ","Enter","ArrowUp","ArrowDown"],So=[" ","Enter"],Se="Select",[et,tt,Co]=ta(Se),[Ie]=Cr(Se,[Co,Je]),rt=Je(),[ko,pe]=Ie(Se),[Po,_o]=Ie(Se),Vr=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:o,value:i,defaultValue:c,onValueChange:l,dir:u,name:m,autoComplete:f,disabled:x,required:w,form:v}=t,p=rt(e),[j,_]=d.useState(null),[N,k]=d.useState(null),[T,g]=d.useState(!1),E=ea(u),[y,R]=bt({prop:n,defaultProp:s??!1,onChange:o,caller:Se}),[$,S]=bt({prop:i,defaultProp:c,onChange:l,caller:Se}),B=d.useRef(null),z=j?v||!!j.closest("form"):!0,[ne,G]=d.useState(new Set),J=Array.from(ne).map(U=>U.props.value).join(";");return a.jsx(yr,{...p,children:a.jsxs(ko,{required:w,scope:e,trigger:j,onTriggerChange:_,valueNode:N,onValueNodeChange:k,valueNodeHasChildren:T,onValueNodeHasChildrenChange:g,contentId:ce(),value:$,onValueChange:S,open:y,onOpenChange:R,dir:E,triggerPointerDownPosRef:B,disabled:x,children:[a.jsx(et.Provider,{scope:e,children:a.jsx(Po,{scope:t.__scopeSelect,onNativeOptionAdd:d.useCallback(U=>{G(Z=>new Set(Z).add(U))},[]),onNativeOptionRemove:d.useCallback(U=>{G(Z=>{const te=new Set(Z);return te.delete(U),te})},[]),children:r})}),z?a.jsxs(mn,{"aria-hidden":!0,required:w,tabIndex:-1,name:m,autoComplete:f,value:$,onChange:U=>S(U.target.value),disabled:x,form:v,children:[$===void 0?a.jsx("option",{value:""}):null,Array.from(ne)]},J):null]})})};Vr.displayName=Se;var Hr="SelectTrigger",zr=d.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,o=rt(r),i=pe(Hr,r),c=i.disabled||n,l=re(e,i.onTriggerChange),u=tt(r),m=d.useRef("touch"),[f,x,w]=hn(p=>{const j=u().filter(k=>!k.disabled),_=j.find(k=>k.value===i.value),N=pn(j,p,_);N!==void 0&&i.onValueChange(N.value)}),v=p=>{c||(i.onOpenChange(!0),w()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return a.jsx(Et,{asChild:!0,...o,children:a.jsx(L.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":fn(i.value)?"":void 0,...s,ref:l,onClick:V(s.onClick,p=>{p.currentTarget.focus(),m.current!=="mouse"&&v(p)}),onPointerDown:V(s.onPointerDown,p=>{m.current=p.pointerType;const j=p.target;j.hasPointerCapture(p.pointerId)&&j.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:V(s.onKeyDown,p=>{const j=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&x(p.key),!(j&&p.key===" ")&&No.includes(p.key)&&(v(),p.preventDefault())})})})});zr.displayName=Hr;var Ur="SelectValue",Yr=d.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:i="",...c}=t,l=pe(Ur,r),{onValueNodeHasChildrenChange:u}=l,m=o!==void 0,f=re(e,l.onValueNodeChange);return me(()=>{u(m)},[u,m]),a.jsx(L.span,{...c,ref:f,style:{pointerEvents:"none"},children:fn(l.value)?a.jsx(a.Fragment,{children:i}):o})});Yr.displayName=Ur;var To="SelectIcon",Qr=d.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return a.jsx(L.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});Qr.displayName=To;var Mo="SelectPortal",Kr=t=>a.jsx(_r,{asChild:!0,...t});Kr.displayName=Mo;var Ce="SelectContent",Gr=d.forwardRef((t,e)=>{const r=pe(Ce,t.__scopeSelect),[n,s]=d.useState();if(me(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?Sr.createPortal(a.jsx(Xr,{scope:t.__scopeSelect,children:a.jsx(et.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),o):null}return a.jsx(Jr,{...t,ref:e})});Gr.displayName=Ce;var se=10,[Xr,ge]=Ie(Ce),Eo="SelectContentImpl",Ro=Pr("SelectContent.RemoveScroll"),Jr=d.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:c,sideOffset:l,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:x,collisionPadding:w,sticky:v,hideWhenDetached:p,avoidCollisions:j,..._}=t,N=pe(Ce,r),[k,T]=d.useState(null),[g,E]=d.useState(null),y=re(e,b=>T(b)),[R,$]=d.useState(null),[S,B]=d.useState(null),z=tt(r),[ne,G]=d.useState(!1),J=d.useRef(!1);d.useEffect(()=>{if(k)return Tr(k)},[k]),Mr();const U=d.useCallback(b=>{const[O,...I]=z().map(Y=>Y.ref.current),[F]=I.slice(-1),q=document.activeElement;for(const Y of b)if(Y===q||(Y?.scrollIntoView({block:"nearest"}),Y===O&&g&&(g.scrollTop=0),Y===F&&g&&(g.scrollTop=g.scrollHeight),Y?.focus(),document.activeElement!==q))return},[z,g]),Z=d.useCallback(()=>U([R,k]),[U,R,k]);d.useEffect(()=>{ne&&Z()},[ne,Z]);const{onOpenChange:te,triggerPointerDownPosRef:ae}=N;d.useEffect(()=>{if(k){let b={x:0,y:0};const O=F=>{b={x:Math.abs(Math.round(F.pageX)-(ae.current?.x??0)),y:Math.abs(Math.round(F.pageY)-(ae.current?.y??0))}},I=F=>{b.x<=10&&b.y<=10?F.preventDefault():k.contains(F.target)||te(!1),document.removeEventListener("pointermove",O),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",O),document.addEventListener("pointerup",I,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",I,{capture:!0})}}},[k,te,ae]),d.useEffect(()=>{const b=()=>te(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[te]);const[Pe,ve]=hn(b=>{const O=z().filter(q=>!q.disabled),I=O.find(q=>q.ref.current===document.activeElement),F=pn(O,b,I);F&&setTimeout(()=>F.ref.current.focus())}),h=d.useCallback((b,O,I)=>{const F=!J.current&&!I;(N.value!==void 0&&N.value===O||F)&&($(b),F&&(J.current=!0))},[N.value]),P=d.useCallback(()=>k?.focus(),[k]),M=d.useCallback((b,O,I)=>{const F=!J.current&&!I;(N.value!==void 0&&N.value===O||F)&&B(b)},[N.value]),C=n==="popper"?jt:Zr,D=C===jt?{side:c,sideOffset:l,align:u,alignOffset:m,arrowPadding:f,collisionBoundary:x,collisionPadding:w,sticky:v,hideWhenDetached:p,avoidCollisions:j}:{};return a.jsx(Xr,{scope:r,content:k,viewport:g,onViewportChange:E,itemRefCallback:h,selectedItem:R,onItemLeave:P,itemTextRefCallback:M,focusSelectedItem:Z,selectedItemText:S,position:n,isPositioned:ne,searchRef:Pe,children:a.jsx(Er,{as:Ro,allowPinchZoom:!0,children:a.jsx(Rr,{asChild:!0,trapped:N.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:V(s,b=>{N.trigger?.focus({preventScroll:!0}),b.preventDefault()}),children:a.jsx(Dr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:a.jsx(C,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:b=>b.preventDefault(),..._,...D,onPlaced:()=>G(!0),ref:y,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:V(_.onKeyDown,b=>{const O=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!O&&b.key.length===1&&ve(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let F=z().filter(q=>!q.disabled).map(q=>q.ref.current);if(["ArrowUp","End"].includes(b.key)&&(F=F.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const q=b.target,Y=F.indexOf(q);F=F.slice(Y+1)}setTimeout(()=>U(F)),b.preventDefault()}})})})})})})});Jr.displayName=Eo;var Do="SelectItemAlignedPosition",Zr=d.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,o=pe(Ce,r),i=ge(Ce,r),[c,l]=d.useState(null),[u,m]=d.useState(null),f=re(e,y=>m(y)),x=tt(r),w=d.useRef(!1),v=d.useRef(!0),{viewport:p,selectedItem:j,selectedItemText:_,focusSelectedItem:N}=i,k=d.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&u&&p&&j&&_){const y=o.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),$=o.valueNode.getBoundingClientRect(),S=_.getBoundingClientRect();if(o.dir!=="rtl"){const q=S.left-R.left,Y=$.left-q,we=y.left-Y,ye=y.width+we,st=Math.max(ye,R.width),ot=window.innerWidth-se,it=Gt(Y,[se,Math.max(se,ot-st)]);c.style.minWidth=ye+"px",c.style.left=it+"px"}else{const q=R.right-S.right,Y=window.innerWidth-$.right-q,we=window.innerWidth-y.right-Y,ye=y.width+we,st=Math.max(ye,R.width),ot=window.innerWidth-se,it=Gt(Y,[se,Math.max(se,ot-st)]);c.style.minWidth=ye+"px",c.style.right=it+"px"}const B=x(),z=window.innerHeight-se*2,ne=p.scrollHeight,G=window.getComputedStyle(u),J=parseInt(G.borderTopWidth,10),U=parseInt(G.paddingTop,10),Z=parseInt(G.borderBottomWidth,10),te=parseInt(G.paddingBottom,10),ae=J+U+ne+te+Z,Pe=Math.min(j.offsetHeight*5,ae),ve=window.getComputedStyle(p),h=parseInt(ve.paddingTop,10),P=parseInt(ve.paddingBottom,10),M=y.top+y.height/2-se,C=z-M,D=j.offsetHeight/2,b=j.offsetTop+D,O=J+U+b,I=ae-O;if(O<=M){const q=B.length>0&&j===B[B.length-1].ref.current;c.style.bottom="0px";const Y=u.clientHeight-p.offsetTop-p.offsetHeight,we=Math.max(C,D+(q?P:0)+Y+Z),ye=O+we;c.style.height=ye+"px"}else{const q=B.length>0&&j===B[0].ref.current;c.style.top="0px";const we=Math.max(M,J+p.offsetTop+(q?h:0)+D)+I;c.style.height=we+"px",p.scrollTop=O-M+p.offsetTop}c.style.margin=`${se}px 0`,c.style.minHeight=Pe+"px",c.style.maxHeight=z+"px",n?.(),requestAnimationFrame(()=>w.current=!0)}},[x,o.trigger,o.valueNode,c,u,p,j,_,o.dir,n]);me(()=>k(),[k]);const[T,g]=d.useState();me(()=>{u&&g(window.getComputedStyle(u).zIndex)},[u]);const E=d.useCallback(y=>{y&&v.current===!0&&(k(),N?.(),v.current=!1)},[k,N]);return a.jsx(Io,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:w,onScrollButtonChange:E,children:a.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:a.jsx(L.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Zr.displayName=Do;var Oo="SelectPopperPosition",jt=d.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=se,...o}=t,i=rt(r);return a.jsx(br,{...i,...o,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jt.displayName=Oo;var[Io,Dt]=Ie(Ce,{}),Nt="SelectViewport",en=d.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,o=ge(Nt,r),i=Dt(Nt,r),c=re(e,o.onViewportChange),l=d.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(et.Slot,{scope:r,children:a.jsx(L.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:V(s.onScroll,u=>{const m=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:x}=i;if(x?.current&&f){const w=Math.abs(l.current-m.scrollTop);if(w>0){const v=window.innerHeight-se*2,p=parseFloat(f.style.minHeight),j=parseFloat(f.style.height),_=Math.max(p,j);if(_<v){const N=_+w,k=Math.min(v,N),T=N-k;f.style.height=k+"px",f.style.bottom==="0px"&&(m.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}l.current=m.scrollTop})})})]})});en.displayName=Nt;var tn="SelectGroup",[Ao,Fo]=Ie(tn),Bo=d.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ce();return a.jsx(Ao,{scope:r,id:s,children:a.jsx(L.div,{role:"group","aria-labelledby":s,...n,ref:e})})});Bo.displayName=tn;var rn="SelectLabel",Wo=d.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Fo(rn,r);return a.jsx(L.div,{id:s.id,...n,ref:e})});Wo.displayName=rn;var Ge="SelectItem",[Lo,nn]=Ie(Ge),an=d.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...i}=t,c=pe(Ge,r),l=ge(Ge,r),u=c.value===n,[m,f]=d.useState(o??""),[x,w]=d.useState(!1),v=re(e,N=>l.itemRefCallback?.(N,n,s)),p=ce(),j=d.useRef("touch"),_=()=>{s||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(Lo,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:d.useCallback(N=>{f(k=>k||(N?.textContent??"").trim())},[]),children:a.jsx(et.ItemSlot,{scope:r,value:n,disabled:s,textValue:m,children:a.jsx(L.div,{role:"option","aria-labelledby":p,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:V(i.onFocus,()=>w(!0)),onBlur:V(i.onBlur,()=>w(!1)),onClick:V(i.onClick,()=>{j.current!=="mouse"&&_()}),onPointerUp:V(i.onPointerUp,()=>{j.current==="mouse"&&_()}),onPointerDown:V(i.onPointerDown,N=>{j.current=N.pointerType}),onPointerMove:V(i.onPointerMove,N=>{j.current=N.pointerType,s?l.onItemLeave?.():j.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:V(i.onPointerLeave,N=>{N.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:V(i.onKeyDown,N=>{l.searchRef?.current!==""&&N.key===" "||(So.includes(N.key)&&_(),N.key===" "&&N.preventDefault())})})})})});an.displayName=Ge;var Le="SelectItemText",sn=d.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...o}=t,i=pe(Le,r),c=ge(Le,r),l=nn(Le,r),u=_o(Le,r),[m,f]=d.useState(null),x=re(e,_=>f(_),l.onItemTextChange,_=>c.itemTextRefCallback?.(_,l.value,l.disabled)),w=m?.textContent,v=d.useMemo(()=>a.jsx("option",{value:l.value,disabled:l.disabled,children:w},l.value),[l.disabled,l.value,w]),{onNativeOptionAdd:p,onNativeOptionRemove:j}=u;return me(()=>(p(v),()=>j(v)),[p,j,v]),a.jsxs(a.Fragment,{children:[a.jsx(L.span,{id:l.textId,...o,ref:x}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Sr.createPortal(o.children,i.valueNode):null]})});sn.displayName=Le;var on="SelectItemIndicator",ln=d.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return nn(on,r).isSelected?a.jsx(L.span,{"aria-hidden":!0,...n,ref:e}):null});ln.displayName=on;var St="SelectScrollUpButton",cn=d.forwardRef((t,e)=>{const r=ge(St,t.__scopeSelect),n=Dt(St,t.__scopeSelect),[s,o]=d.useState(!1),i=re(e,n.onScrollButtonChange);return me(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollTop>0;o(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?a.jsx(un,{...t,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});cn.displayName=St;var Ct="SelectScrollDownButton",dn=d.forwardRef((t,e)=>{const r=ge(Ct,t.__scopeSelect),n=Dt(Ct,t.__scopeSelect),[s,o]=d.useState(!1),i=re(e,n.onScrollButtonChange);return me(()=>{if(r.viewport&&r.isPositioned){let c=function(){const u=l.scrollHeight-l.clientHeight,m=Math.ceil(l.scrollTop)<u;o(m)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?a.jsx(un,{...t,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=r;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});dn.displayName=Ct;var un=d.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,o=ge("SelectScrollButton",r),i=d.useRef(null),c=tt(r),l=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>l(),[l]),me(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),a.jsx(L.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:V(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:V(s.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:V(s.onPointerLeave,()=>{l()})})}),$o="SelectSeparator",qo=d.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return a.jsx(L.div,{"aria-hidden":!0,...n,ref:e})});qo.displayName=$o;var kt="SelectArrow",Vo=d.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=rt(r),o=pe(kt,r),i=ge(kt,r);return o.open&&i.position==="popper"?a.jsx(jr,{...s,...n,ref:e}):null});Vo.displayName=kt;var Ho="SelectBubbleInput",mn=d.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=d.useRef(null),o=re(n,s),i=$n(e);return d.useEffect(()=>{const c=s.current;if(!c)return;const l=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==e&&m){const f=new Event("change",{bubbles:!0});m.call(c,e),c.dispatchEvent(f)}},[i,e]),a.jsx(L.select,{...r,style:{...qr,...r.style},ref:o,defaultValue:e})});mn.displayName=Ho;function fn(t){return t===""||t===void 0}function hn(t){const e=ra(t),r=d.useRef(""),n=d.useRef(0),s=d.useCallback(i=>{const c=r.current+i;e(c),(function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))})(c)},[e]),o=d.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function pn(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=zo(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const l=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function zo(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Uo=Vr,Yo=zr,Qo=Yr,Ko=Qr,Go=Kr,Xo=Gr,Jo=en,Zo=an,ei=sn,ti=ln,ri=cn,ni=dn;function ai(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let n;return e[2]!==r?(n=a.jsx(Uo,{"data-slot":"select",...r}),e[2]=r,e[3]=n):n=e[3],n}function si(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let n;return e[2]!==r?(n=a.jsx(Qo,{"data-slot":"select-value",...r}),e[2]=r,e[3]=n):n=e[3],n}function oi(t){const e=W.c(13);let r,n,s,o;e[0]!==t?({className:n,size:o,children:r,...s}=t,e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=o):(r=e[1],n=e[2],s=e[3],o=e[4]);const i=o===void 0?"default":o;let c;e[5]!==n?(c=H("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=c):c=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(Ko,{asChild:!0,children:a.jsx(Or,{className:"size-4 opacity-50"})}),e[7]=l):l=e[7];let u;return e[8]!==r||e[9]!==s||e[10]!==i||e[11]!==c?(u=a.jsxs(Yo,{"data-slot":"select-trigger","data-size":i,className:c,...s,children:[r,l]}),e[8]=r,e[9]=s,e[10]=i,e[11]=c,e[12]=u):u=e[12],u}function ii(t){const e=W.c(20);let r,n,s,o;e[0]!==t?({className:n,children:r,position:o,...s}=t,e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=o):(r=e[1],n=e[2],s=e[3],o=e[4]);const i=o===void 0?"popper":o,c=i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let l;e[5]!==n||e[6]!==c?(l=H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",c,n),e[5]=n,e[6]=c,e[7]=l):l=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(li,{}),e[8]=u):u=e[8];const m=i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let f;e[9]!==m?(f=H("p-1",m),e[9]=m,e[10]=f):f=e[10];let x;e[11]!==r||e[12]!==f?(x=a.jsx(Jo,{className:f,children:r}),e[11]=r,e[12]=f,e[13]=x):x=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(ci,{}),e[14]=w):w=e[14];let v;return e[15]!==i||e[16]!==s||e[17]!==l||e[18]!==x?(v=a.jsx(Go,{children:a.jsxs(Xo,{"data-slot":"select-content",className:l,position:i,...s,children:[u,x,w]})}),e[15]=i,e[16]=s,e[17]=l,e[18]=x,e[19]=v):v=e[19],v}function ht(t){const e=W.c(13);let r,n,s;e[0]!==t?({className:n,children:r,...s}=t,e[0]=t,e[1]=r,e[2]=n,e[3]=s):(r=e[1],n=e[2],s=e[3]);let o;e[4]!==n?(o=H("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),e[4]=n,e[5]=o):o=e[5];let i;e[6]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:a.jsx(ti,{children:a.jsx(Ir,{className:"size-4"})})}),e[6]=i):i=e[6];let c;e[7]!==r?(c=a.jsx(ei,{children:r}),e[7]=r,e[8]=c):c=e[8];let l;return e[9]!==s||e[10]!==o||e[11]!==c?(l=a.jsxs(Zo,{"data-slot":"select-item",className:o,...s,children:[i,c]}),e[9]=s,e[10]=o,e[11]=c,e[12]=l):l=e[12],l}function li(t){const e=W.c(9);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("flex cursor-default items-center justify-center py-1",r),e[3]=r,e[4]=s):s=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx(ia,{className:"size-4"}),e[5]=o):o=e[5];let i;return e[6]!==n||e[7]!==s?(i=a.jsx(ri,{"data-slot":"select-scroll-up-button",className:s,...n,children:o}),e[6]=n,e[7]=s,e[8]=i):i=e[8],i}function ci(t){const e=W.c(9);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("flex cursor-default items-center justify-center py-1",r),e[3]=r,e[4]=s):s=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx(Or,{className:"size-4"}),e[5]=o):o=e[5];let i;return e[6]!==n||e[7]!==s?(i=a.jsx(ni,{"data-slot":"select-scroll-down-button",className:s,...n,children:o}),e[6]=n,e[7]=s,e[8]=i):i=e[8],i}var nt="Popover",[gn]=Cr(nt,[Je]),He=Je(),[di,xe]=gn(nt),xn=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,c=He(e),l=d.useRef(null),[u,m]=d.useState(!1),[f,x]=bt({prop:n,defaultProp:s??!1,onChange:o,caller:nt});return a.jsx(yr,{...c,children:a.jsx(di,{scope:e,contentId:ce(),triggerRef:l,open:f,onOpenChange:x,onOpenToggle:d.useCallback(()=>x(w=>!w),[x]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>m(!0),[]),onCustomAnchorRemove:d.useCallback(()=>m(!1),[]),modal:i,children:r})})};xn.displayName=nt;var vn="PopoverAnchor",ui=d.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=xe(vn,r),o=He(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=s;return d.useEffect(()=>(i(),()=>c()),[i,c]),a.jsx(Et,{...o,...n,ref:e})});ui.displayName=vn;var wn="PopoverTrigger",yn=d.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=xe(wn,r),o=He(r),i=re(e,s.triggerRef),c=a.jsx(L.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Cn(s.open),...n,ref:i,onClick:V(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:a.jsx(Et,{asChild:!0,...o,children:c})});yn.displayName=wn;var Ot="PopoverPortal",[mi,fi]=gn(Ot,{forceMount:void 0}),bn=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,o=xe(Ot,e);return a.jsx(mi,{scope:e,forceMount:r,children:a.jsx(kr,{present:r||o.open,children:a.jsx(_r,{asChild:!0,container:s,children:n})})})};bn.displayName=Ot;var Oe="PopoverContent",jn=d.forwardRef((t,e)=>{const r=fi(Oe,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,o=xe(Oe,t.__scopePopover);return a.jsx(kr,{present:n||o.open,children:o.modal?a.jsx(pi,{...s,ref:e}):a.jsx(gi,{...s,ref:e})})});jn.displayName=Oe;var hi=Pr("PopoverContent.RemoveScroll"),pi=d.forwardRef((t,e)=>{const r=xe(Oe,t.__scopePopover),n=d.useRef(null),s=re(e,n),o=d.useRef(!1);return d.useEffect(()=>{const i=n.current;if(i)return Tr(i)},[]),a.jsx(Er,{as:hi,allowPinchZoom:!0,children:a.jsx(Nn,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:V(t.onCloseAutoFocus,i=>{i.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:V(t.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:V(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),gi=d.forwardRef((t,e)=>{const r=xe(Oe,t.__scopePopover),n=d.useRef(!1),s=d.useRef(!1);return a.jsx(Nn,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||r.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;r.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Nn=d.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:m,...f}=t,x=xe(Oe,r),w=He(r);return Mr(),a.jsx(Rr,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(Dr,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>x.onOpenChange(!1),children:a.jsx(br,{"data-state":Cn(x.open),role:"dialog",id:x.contentId,...w,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Sn="PopoverClose",xi=d.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=xe(Sn,r);return a.jsx(L.button,{type:"button",...n,ref:e,onClick:V(t.onClick,()=>s.onOpenChange(!1))})});xi.displayName=Sn;var vi="PopoverArrow",wi=d.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=He(r);return a.jsx(jr,{...s,...n,ref:e})});wi.displayName=vi;function Cn(t){return t?"open":"closed"}var yi=xn,bi=yn,ji=bn,Ni=jn;function Si(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let n;return e[2]!==r?(n=a.jsx(yi,{"data-slot":"popover",...r}),e[2]=r,e[3]=n):n=e[3],n}function Ci(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let n;return e[2]!==r?(n=a.jsx(bi,{"data-slot":"popover-trigger",...r}),e[2]=r,e[3]=n):n=e[3],n}function ki(t){const e=W.c(12);let r,n,s,o;e[0]!==t?({className:r,align:s,sideOffset:o,...n}=t,e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=o):(r=e[1],n=e[2],s=e[3],o=e[4]);const i=s===void 0?"center":s,c=o===void 0?4:o;let l;e[5]!==r?(l=H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),e[5]=r,e[6]=l):l=e[6];let u;return e[7]!==i||e[8]!==n||e[9]!==c||e[10]!==l?(u=a.jsx(ji,{children:a.jsx(Ni,{"data-slot":"popover-content",align:i,sideOffset:c,className:l,...n})}),e[7]=i,e[8]=n,e[9]=c,e[10]=l,e[11]=u):u=e[11],u}var Xt=1,Pi=.9,_i=.8,Ti=.17,pt=.1,gt=.999,Mi=.9999,Ei=.99,Ri=/[\\\/_+.#"@\[\(\{&]/,Di=/[\\\/_+.#"@\[\(\{&]/g,Oi=/[\s-]/,kn=/[\s-]/g;function Pt(t,e,r,n,s,o,i){if(o===e.length)return s===t.length?Xt:Ei;var c=`${s},${o}`;if(i[c]!==void 0)return i[c];for(var l=n.charAt(o),u=r.indexOf(l,s),m=0,f,x,w,v;u>=0;)f=Pt(t,e,r,n,u+1,o+1,i),f>m&&(u===s?f*=Xt:Ri.test(t.charAt(u-1))?(f*=_i,w=t.slice(s,u-1).match(Di),w&&s>0&&(f*=Math.pow(gt,w.length))):Oi.test(t.charAt(u-1))?(f*=Pi,v=t.slice(s,u-1).match(kn),v&&s>0&&(f*=Math.pow(gt,v.length))):(f*=Ti,s>0&&(f*=Math.pow(gt,u-s))),t.charAt(u)!==e.charAt(o)&&(f*=Mi)),(f<pt&&r.charAt(u-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(u-1)!==n.charAt(o))&&(x=Pt(t,e,r,n,u+1,o+2,i),x*pt>f&&(f=x*pt)),f>m&&(m=f),u=r.indexOf(l,u+1);return i[c]=m,m}function Jt(t){return t.toLowerCase().replace(kn," ")}function Ii(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Pt(t,e,Jt(t),Jt(e),0,0,{})}var We='[cmdk-group=""]',xt='[cmdk-group-items=""]',Ai='[cmdk-group-heading=""]',Pn='[cmdk-item=""]',Zt=`${Pn}:not([aria-disabled="true"])`,_t="cmdk-item-select",Te="data-value",Fi=(t,e,r)=>Ii(t,e,r),_n=d.createContext(void 0),ze=()=>d.useContext(_n),Tn=d.createContext(void 0),It=()=>d.useContext(Tn),Mn=d.createContext(void 0),En=d.forwardRef((t,e)=>{let r=Me(()=>{var h,P;return{search:"",value:(P=(h=t.value)!=null?h:t.defaultValue)!=null?P:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Me(()=>new Set),s=Me(()=>new Map),o=Me(()=>new Map),i=Me(()=>new Set),c=Rn(t),{label:l,children:u,value:m,onValueChange:f,filter:x,shouldFilter:w,loop:v,disablePointerSelection:p=!1,vimBindings:j=!0,..._}=t,N=ce(),k=ce(),T=ce(),g=d.useRef(null),E=Qi();ke(()=>{if(m!==void 0){let h=m.trim();r.current.value=h,y.emit()}},[m]),ke(()=>{E(6,ne)},[]);let y=d.useMemo(()=>({subscribe:h=>(i.current.add(h),()=>i.current.delete(h)),snapshot:()=>r.current,setState:(h,P,M)=>{var C,D,b,O;if(!Object.is(r.current[h],P)){if(r.current[h]=P,h==="search")z(),S(),E(1,B);else if(h==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let I=document.getElementById(T);I?I.focus():(C=document.getElementById(N))==null||C.focus()}if(E(7,()=>{var I;r.current.selectedItemId=(I=G())==null?void 0:I.id,y.emit()}),M||E(5,ne),((D=c.current)==null?void 0:D.value)!==void 0){let I=P??"";(O=(b=c.current).onValueChange)==null||O.call(b,I);return}}y.emit()}},emit:()=>{i.current.forEach(h=>h())}}),[]),R=d.useMemo(()=>({value:(h,P,M)=>{var C;P!==((C=o.current.get(h))==null?void 0:C.value)&&(o.current.set(h,{value:P,keywords:M}),r.current.filtered.items.set(h,$(P,M)),E(2,()=>{S(),y.emit()}))},item:(h,P)=>(n.current.add(h),P&&(s.current.has(P)?s.current.get(P).add(h):s.current.set(P,new Set([h]))),E(3,()=>{z(),S(),r.current.value||B(),y.emit()}),()=>{o.current.delete(h),n.current.delete(h),r.current.filtered.items.delete(h);let M=G();E(4,()=>{z(),M?.getAttribute("id")===h&&B(),y.emit()})}),group:h=>(s.current.has(h)||s.current.set(h,new Set),()=>{o.current.delete(h),s.current.delete(h)}),filter:()=>c.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:N,inputId:T,labelId:k,listInnerRef:g}),[]);function $(h,P){var M,C;let D=(C=(M=c.current)==null?void 0:M.filter)!=null?C:Fi;return h?D(h,r.current.search,P):0}function S(){if(!r.current.search||c.current.shouldFilter===!1)return;let h=r.current.filtered.items,P=[];r.current.filtered.groups.forEach(C=>{let D=s.current.get(C),b=0;D.forEach(O=>{let I=h.get(O);b=Math.max(I,b)}),P.push([C,b])});let M=g.current;J().sort((C,D)=>{var b,O;let I=C.getAttribute("id"),F=D.getAttribute("id");return((b=h.get(F))!=null?b:0)-((O=h.get(I))!=null?O:0)}).forEach(C=>{let D=C.closest(xt);D?D.appendChild(C.parentElement===D?C:C.closest(`${xt} > *`)):M.appendChild(C.parentElement===M?C:C.closest(`${xt} > *`))}),P.sort((C,D)=>D[1]-C[1]).forEach(C=>{var D;let b=(D=g.current)==null?void 0:D.querySelector(`${We}[${Te}="${encodeURIComponent(C[0])}"]`);b?.parentElement.appendChild(b)})}function B(){let h=J().find(M=>M.getAttribute("aria-disabled")!=="true"),P=h?.getAttribute(Te);y.setState("value",P||void 0)}function z(){var h,P,M,C;if(!r.current.search||c.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let D=0;for(let b of n.current){let O=(P=(h=o.current.get(b))==null?void 0:h.value)!=null?P:"",I=(C=(M=o.current.get(b))==null?void 0:M.keywords)!=null?C:[],F=$(O,I);r.current.filtered.items.set(b,F),F>0&&D++}for(let[b,O]of s.current)for(let I of O)if(r.current.filtered.items.get(I)>0){r.current.filtered.groups.add(b);break}r.current.filtered.count=D}function ne(){var h,P,M;let C=G();C&&(((h=C.parentElement)==null?void 0:h.firstChild)===C&&((M=(P=C.closest(We))==null?void 0:P.querySelector(Ai))==null||M.scrollIntoView({block:"nearest"})),C.scrollIntoView({block:"nearest"}))}function G(){var h;return(h=g.current)==null?void 0:h.querySelector(`${Pn}[aria-selected="true"]`)}function J(){var h;return Array.from(((h=g.current)==null?void 0:h.querySelectorAll(Zt))||[])}function U(h){let P=J()[h];P&&y.setState("value",P.getAttribute(Te))}function Z(h){var P;let M=G(),C=J(),D=C.findIndex(O=>O===M),b=C[D+h];(P=c.current)!=null&&P.loop&&(b=D+h<0?C[C.length-1]:D+h===C.length?C[0]:C[D+h]),b&&y.setState("value",b.getAttribute(Te))}function te(h){let P=G(),M=P?.closest(We),C;for(;M&&!C;)M=h>0?Ui(M,We):Yi(M,We),C=M?.querySelector(Zt);C?y.setState("value",C.getAttribute(Te)):Z(h)}let ae=()=>U(J().length-1),Pe=h=>{h.preventDefault(),h.metaKey?ae():h.altKey?te(1):Z(1)},ve=h=>{h.preventDefault(),h.metaKey?U(0):h.altKey?te(-1):Z(-1)};return d.createElement(L.div,{ref:e,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:h=>{var P;(P=_.onKeyDown)==null||P.call(_,h);let M=h.nativeEvent.isComposing||h.keyCode===229;if(!(h.defaultPrevented||M))switch(h.key){case"n":case"j":{j&&h.ctrlKey&&Pe(h);break}case"ArrowDown":{Pe(h);break}case"p":case"k":{j&&h.ctrlKey&&ve(h);break}case"ArrowUp":{ve(h);break}case"Home":{h.preventDefault(),U(0);break}case"End":{h.preventDefault(),ae();break}case"Enter":{h.preventDefault();let C=G();if(C){let D=new Event(_t);C.dispatchEvent(D)}}}}},d.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:Gi},l),at(t,h=>d.createElement(Tn.Provider,{value:y},d.createElement(_n.Provider,{value:R},h))))}),Bi=d.forwardRef((t,e)=>{var r,n;let s=ce(),o=d.useRef(null),i=d.useContext(Mn),c=ze(),l=Rn(t),u=(n=(r=l.current)==null?void 0:r.forceMount)!=null?n:i?.forceMount;ke(()=>{if(!u)return c.item(s,i?.id)},[u]);let m=Dn(s,o,[t.value,t.children,o],t.keywords),f=It(),x=he(E=>E.value&&E.value===m.current),w=he(E=>u||c.filter()===!1?!0:E.search?E.filtered.items.get(s)>0:!0);d.useEffect(()=>{let E=o.current;if(!(!E||t.disabled))return E.addEventListener(_t,v),()=>E.removeEventListener(_t,v)},[w,t.onSelect,t.disabled]);function v(){var E,y;p(),(y=(E=l.current).onSelect)==null||y.call(E,m.current)}function p(){f.setState("value",m.current,!0)}if(!w)return null;let{disabled:j,value:_,onSelect:N,forceMount:k,keywords:T,...g}=t;return d.createElement(L.div,{ref:qe(o,e),...g,id:s,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!x,"data-disabled":!!j,"data-selected":!!x,onPointerMove:j||c.getDisablePointerSelection()?void 0:p,onClick:j?void 0:v},t.children)}),Wi=d.forwardRef((t,e)=>{let{heading:r,children:n,forceMount:s,...o}=t,i=ce(),c=d.useRef(null),l=d.useRef(null),u=ce(),m=ze(),f=he(w=>s||m.filter()===!1?!0:w.search?w.filtered.groups.has(i):!0);ke(()=>m.group(i),[]),Dn(i,c,[t.value,t.heading,l]);let x=d.useMemo(()=>({id:i,forceMount:s}),[s]);return d.createElement(L.div,{ref:qe(c,e),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&d.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),at(t,w=>d.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},d.createElement(Mn.Provider,{value:x},w))))}),Li=d.forwardRef((t,e)=>{let{alwaysRender:r,...n}=t,s=d.useRef(null),o=he(i=>!i.search);return!r&&!o?null:d.createElement(L.div,{ref:qe(s,e),...n,"cmdk-separator":"",role:"separator"})}),$i=d.forwardRef((t,e)=>{let{onValueChange:r,...n}=t,s=t.value!=null,o=It(),i=he(u=>u.search),c=he(u=>u.selectedItemId),l=ze();return d.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),d.createElement(L.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:s?t.value:i,onChange:u=>{s||o.setState("search",u.target.value),r?.(u.target.value)}})}),qi=d.forwardRef((t,e)=>{let{children:r,label:n="Suggestions",...s}=t,o=d.useRef(null),i=d.useRef(null),c=he(u=>u.selectedItemId),l=ze();return d.useEffect(()=>{if(i.current&&o.current){let u=i.current,m=o.current,f,x=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let w=u.offsetHeight;m.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return x.observe(u),()=>{cancelAnimationFrame(f),x.unobserve(u)}}},[]),d.createElement(L.div,{ref:qe(o,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":n,id:l.listId},at(t,u=>d.createElement("div",{ref:qe(i,l.listInnerRef),"cmdk-list-sizer":""},u)))}),Vi=d.forwardRef((t,e)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:o,container:i,...c}=t;return d.createElement(na,{open:r,onOpenChange:n},d.createElement(aa,{container:i},d.createElement(sa,{"cmdk-overlay":"",className:s}),d.createElement(oa,{"aria-label":t.label,"cmdk-dialog":"",className:o},d.createElement(En,{ref:e,...c}))))}),Hi=d.forwardRef((t,e)=>he(r=>r.filtered.count===0)?d.createElement(L.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),zi=d.forwardRef((t,e)=>{let{progress:r,children:n,label:s="Loading...",...o}=t;return d.createElement(L.div,{ref:e,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},at(t,i=>d.createElement("div",{"aria-hidden":!0},i)))}),Ae=Object.assign(En,{List:qi,Item:Bi,Input:$i,Group:Wi,Separator:Li,Dialog:Vi,Empty:Hi,Loading:zi});function Ui(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function Yi(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function Rn(t){let e=d.useRef(t);return ke(()=>{e.current=t}),e}var ke=typeof window>"u"?d.useEffect:d.useLayoutEffect;function Me(t){let e=d.useRef();return e.current===void 0&&(e.current=t()),e}function he(t){let e=It(),r=()=>t(e.snapshot());return d.useSyncExternalStore(e.subscribe,r,r)}function Dn(t,e,r,n=[]){let s=d.useRef(),o=ze();return ke(()=>{var i;let c=(()=>{var u;for(let m of r){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(u=m.current.textContent)==null?void 0:u.trim():s.current}})(),l=n.map(u=>u.trim());o.value(t,c,l),(i=e.current)==null||i.setAttribute(Te,c),s.current=c}),s}var Qi=()=>{let[t,e]=d.useState(),r=Me(()=>new Map);return ke(()=>{r.current.forEach(n=>n()),r.current=new Map},[t]),(n,s)=>{r.current.set(n,s),e({})}};function Ki(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function at({asChild:t,children:e},r){return t&&d.isValidElement(e)?d.cloneElement(Ki(e),{ref:e.ref},r(e.props.children)):r(e)}var Gi={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Xi(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx(Ae,{"data-slot":"command",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function Ji(t){const e=W.c(9);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=a.jsx(Ta,{className:"size-4 shrink-0 opacity-50"}),e[3]=s):s=e[3];let o;e[4]!==r?(o=H("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",r),e[4]=r,e[5]=o):o=e[5];let i;return e[6]!==n||e[7]!==o?(i=a.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[s,a.jsx(Ae.Input,{"data-slot":"command-input",className:o,...n})]}),e[6]=n,e[7]=o,e[8]=i):i=e[8],i}function Zi(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx(Ae.List,{"data-slot":"command-list",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function el(t){const e=W.c(4);let r;e[0]!==t?({...r}=t,e[0]=t,e[1]=r):r=e[1];let n;return e[2]!==r?(n=a.jsx(Ae.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...r}),e[2]=r,e[3]=n):n=e[3],n}function tl(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx(Ae.Group,{"data-slot":"command-group",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}function rl(t){const e=W.c(8);let r,n;e[0]!==t?({className:r,...n}=t,e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]);let s;e[3]!==r?(s=H("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),e[3]=r,e[4]=s):s=e[4];let o;return e[5]!==n||e[6]!==s?(o=a.jsx(Ae.Item,{"data-slot":"command-item",className:s,...n}),e[5]=n,e[6]=s,e[7]=o):o=e[7],o}const On=[{name:"Golden Retriever",defaultColors:["Golden"]},{name:"Labrador Retriever",defaultColors:["Yellow","Black","Chocolate"]},{name:"German Shepherd",defaultColors:["Black/Tan","Sable","Black"]},{name:"French Bulldog",defaultColors:["Fawn","Brindle","Cream","Pied"]},{name:"Poodle",defaultColors:["White","Black","Apricot","Red"]},{name:"Bulldog",defaultColors:["Fawn","Brindle","White","Piebald"]},{name:"Beagle",defaultColors:["Tri-color","Lemon/White","Red/White"]},{name:"Rottweiler",defaultColors:["Black/Rust"]},{name:"Dachshund",defaultColors:["Red","Black/Tan","Chocolate/Tan","Dapple"]},{name:"Yorkshire Terrier",defaultColors:["Blue/Tan"]}],In=[{name:"Bicolor / Tuxedo",defaultColors:["Black/White","Gray/White","Seal/White"]},{name:"Calico",defaultColors:["Black/Orange/White","Dilute (Blue/Cream/White)"]},{name:"Pointed",defaultColors:["Seal point","Blue point","Chocolate point","Lilac point","Flame point"]},{name:"Shaded",defaultColors:["Shaded Silver","Shaded Golden"]},{name:"Smoke",defaultColors:["Black Smoke","Blue Smoke"]},{name:"Solid",defaultColors:["Black","White","Blue/Gray","Red/Orange","Cream"]},{name:"Spotted",defaultColors:["Brown Spotted","Silver Spotted"]},{name:"Tabby",defaultColors:["Brown Tabby","Gray/Blue Tabby","Orange Tabby","Silver Tabby","Torbie"]},{name:"Tortoiseshell (Tortie)",defaultColors:["Black/Orange","Chocolate/Cream","Dilute (Blue/Cream)"]}];function nl(t,e){return!t||!e?[]:t==="dog"?On.find(n=>n.name===e)?.defaultColors??[]:t==="cat"?In.find(n=>n.name===e)?.defaultColors??[]:[]}const al=On.map(t=>t.name),sl=In.map(t=>t.name);function ol({label:t="Photo",value:e,onChange:r,options:n,accept:s="image/*",className:o}){const i=d.useRef(null),[c,l]=d.useState(!1),[u,m]=d.useState(!1),[f,x]=d.useState(null),w=d.useCallback(()=>{i.current?.click()},[]),v=d.useCallback(()=>{r(null),x(null)},[r]),p=d.useCallback(async T=>{if(!T||!T.type.startsWith("image/")){x("Please select a valid image file");return}if(T.size>10*1024*1024){x("File size must be less than 10MB");return}x(null),l(!0);try{const g=await il(T,n);r(g)}catch(g){x("Failed to optimize image. Please try another file."),console.error("Image optimization error:",g)}finally{l(!1)}},[n,r]),j=d.useCallback(T=>{T.preventDefault(),T.stopPropagation(),m(!0)},[]),_=d.useCallback(T=>{T.preventDefault(),T.stopPropagation(),m(!1)},[]),N=d.useCallback(T=>{T.preventDefault(),T.stopPropagation(),m(!1);const g=T.dataTransfer.files?.[0];g&&p(g)},[p]),k=e?Math.round((1-e.approxKB/e.original.sizeKB)*100):0;return a.jsxs("div",{className:o,children:[a.jsx(ee,{className:"mb-2 block font-medium",children:t}),e?a.jsx("div",{className:"border rounded-lg p-4 bg-card",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:e.dataUrl,alt:"preview",className:"h-32 w-32 rounded-lg object-cover border-2 border-border"}),a.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:a.jsx(Sa,{className:"h-8 w-8 text-white"})})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm truncate",children:e.original.name}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.width," × ",e.height,"px"]})]}),a.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:v,className:"h-8 w-8 p-0",children:a.jsx(la,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-muted-foreground",children:"Original"}),a.jsxs("p",{className:"font-medium",children:[e.original.sizeKB.toLocaleString()," KB"]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-muted-foreground",children:"Optimized"}),a.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:[e.approxKB.toLocaleString()," KB"]})]})]}),k>0&&a.jsx("div",{className:"bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-900 rounded-md px-3 py-2",children:a.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:["↓ ",k,"% smaller · ",e.mimeType]})}),a.jsx(Q,{type:"button",variant:"outline",size:"sm",onClick:w,className:"w-full",children:"Replace Image"})]})]})}):a.jsx("div",{onDragOver:j,onDragLeave:_,onDrop:N,onClick:w,className:`
            relative border-2 border-dashed rounded-lg p-8 transition-all cursor-pointer
            hover:border-primary/50 hover:bg-accent/50
            ${u?"border-primary bg-accent scale-[1.02]":"border-border"}
            ${c?"pointer-events-none opacity-60":""}
          `,children:a.jsx("div",{className:"flex flex-col items-center justify-center text-center space-y-3",children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"}),a.jsx("p",{className:"text-sm font-medium",children:"Optimizing image..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:a.jsx(Ia,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium mb-1",children:"Drop your image here, or click to browse"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, WebP up to 10MB"})]})]})})}),f&&a.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-900 rounded-md px-3 py-2",children:f}),a.jsx(le,{ref:i,type:"file",accept:s,className:"hidden",onChange:T=>{const g=T.target.files?.[0];g&&p(g),T.currentTarget.value=""}})]})}async function il(t,e){const r=await t.arrayBuffer(),n=new Blob([r]),s=await cl(n),o=e?.maxWidth??1200,i=e?.maxHeight??1200,{width:c,height:l}=ll(s.width,s.height,o,i),u=document.createElement("canvas");u.width=c,u.height=l;const m=u.getContext("2d",{alpha:!0});m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high",m.drawImage(s,0,0,c,l);const f=e?.preferWebP??!0,x=e?.quality??.82,w=u.toDataURL("image/webp").startsWith("data:image/webp"),v=f&&w?"image/webp":"image/jpeg",p=await dl(u,v,x),j=await ul(p);return{blob:p,dataUrl:j,width:c,height:l,approxKB:Math.round(p.size/1024),mimeType:v,original:{name:t.name,sizeKB:Math.round(t.size/1024),type:t.type}}}function ll(t,e,r,n){const s=Math.min(r/t,n/e,1);return{width:Math.round(t*s),height:Math.round(e*s)}}function cl(t){return new Promise((e,r)=>{const n=URL.createObjectURL(t),s=new Image;s.onload=()=>{URL.revokeObjectURL(n),e(s)},s.onerror=()=>{URL.revokeObjectURL(n),r(new Error("Failed to load image"))},s.src=n})}function dl(t,e,r){return new Promise((n,s)=>{t.toBlob(o=>{o?n(o):s(new Error("Canvas to blob conversion failed"))},e,r)})}function ul(t){return new Promise((e,r)=>{const n=new FileReader;n.onload=()=>e(String(n.result)),n.onerror=()=>r(new Error("Failed to read blob")),n.readAsDataURL(t)})}function ml(t){const[e,r]=d.useState(lt),[n,s]=d.useState(!0);return d.useEffect(()=>{if(!t){s(!1);return}(async()=>{try{const{data:l,error:u}=await K.from("pet_themes").select("theme_preset, custom_colors, background_image_url").eq("pet_id",t).maybeSingle();if(u)throw u;r(l?l.theme_preset:lt)}catch(l){console.error("Failed to load pet theme:",l),r(lt)}finally{s(!1)}})()},[t]),{themeId:e,isLoading:n,updatePetTheme:async c=>{if(t){r(c);try{const{error:l}=await K.from("pet_themes").upsert({pet_id:t,theme_preset:c,updated_at:new Date().toISOString()});if(l)throw l}catch(l){console.error("Failed to save pet theme:",l)}}},applyPetTheme:(c=!1)=>{Fn(e,c)}}}const fl=Ft({id:ie().optional(),name:ie().min(1,"Name is required"),species:Xn(["dog","cat","other"],{message:"Choose a species"}),breed:ie().optional(),color:ie().optional(),weight:Gn().min(0,"Weight must be positive").optional(),birthdate:ie().optional(),microchipId:ie().optional(),description:ie().optional(),notes:ie().optional(),vaccinations:Ft({rabies:Jn().default(!1),rabiesExpires:ie().optional()}).default({rabies:!1,rabiesExpires:""}),photoPreview:ie().optional()});async function er(t){return await(await fetch(t)).blob()}function tr({mode:t,open:e,onOpenChange:r,initialPet:n,onSubmit:s}){const{user:o}=Tt(),[i,c]=d.useState(!1),l=Qn({resolver:Kn(fl),defaultValues:{id:n?.id,name:n?.name??"",species:n?.species,breed:n?.breed??"",color:n?.color??"",weight:n?.weight??void 0,birthdate:n?.birthdate??"",microchipId:n?.microchipId??"",description:n?.description??"",notes:n?.notes??"",vaccinations:{rabies:n?.vaccinations?.rabies??!1,rabiesExpires:n?.vaccinations?.rabiesExpires??""},photoPreview:n?.photoPreview??""},mode:"onSubmit"}),u=l.watch("species"),m=l.watch("breed"),[f,x]=d.useState(!1),{themeId:w,updatePetTheme:v}=ml(n?.id),[p,j]=d.useState(w);d.useEffect(()=>{j(w)},[w]);const _=d.useRef(null),N=d.useMemo(()=>u==="dog"?al:u==="cat"?sl:[],[u]),k=d.useMemo(()=>nl(u??"other",m),[u,m]),T=async g=>{if(!o?.id){alert("You must be signed in.");return}c(!0);const E={rabies:!!g.vaccinations?.rabies,rabiesExpires:g.vaccinations?.rabies&&g.vaccinations.rabiesExpires||void 0},y={owner_id:o.id,name:g.name,species:g.species,breed:g.breed||null,color:g.color||null,weight:typeof g.weight=="number"?g.weight:null,birthdate:g.birthdate||null,microchip_id:g.microchipId||null,description:g.description||null,notes:g.notes||null,vaccinations:E};try{let R;if(t==="add"){R=await Xa({...y});try{const S=await Rt(o.id,R.short_id);await $e(R.id,{qr_url:S})}catch(S){console.warn("QR generation failed (non-blocking):",S?.message)}let $=_.current;if(!$&&g.photoPreview&&($=await er(g.photoPreview)),$&&$.size>0){const S=await qt(o.id,R.id,$);R=await $e(R.id,{photo_url:S})}}else{const $=g.id||n?.id;if(!$)throw new Error("Missing pet id for update.");let S=_.current;!S&&g.photoPreview&&(S=await er(g.photoPreview));const B={name:y.name,species:y.species,breed:y.breed,color:y.color,weight:y.weight,birthdate:y.birthdate,microchip_id:y.microchip_id,description:y.description,notes:y.notes,vaccinations:y.vaccinations};if(S&&S.size>0){const z=await qt(o.id,$,S);B.photo_url=z}R=await $e($,B)}R?.id&&await v(p),s?.(g),r(!1),t==="add"&&l.reset()}catch(R){console.error(R),alert(R?.message??"Failed to save pet")}finally{c(!1)}};return a.jsx(hr,{open:e,onOpenChange:g=>!i&&r(g),children:a.jsxs(pr,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-slate-900",children:[a.jsx(gr,{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-xl flex items-center justify-center ring-4 ring-primary/5",children:a.jsx(je,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx(xr,{className:"text-2xl",children:t==="add"?"Add New Pet":"Edit Pet"}),a.jsx(vr,{className:"text-base",children:t==="add"?"Enter your pet's details to create their profile":"Update your pet's information"})]})]})}),a.jsxs("form",{onSubmit:l.handleSubmit(T),className:"space-y-6 mt-4",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[a.jsx(ur,{className:"h-4 w-4 text-primary"}),"Basic Information"]}),a.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:["Name ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(le,{id:"name",...l.register("name"),placeholder:"e.g., Milo, Luna, Max",className:"h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20"}),l.formState.errors.name&&a.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1.5 animate-in fade-in-50",children:[a.jsx(Ue,{className:"h-3.5 w-3.5"}),l.formState.errors.name.message]})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:["Species ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsxs(ai,{value:u,onValueChange:g=>{l.setValue("species",g,{shouldValidate:!0}),l.setValue("breed",""),l.setValue("color","")},children:[a.jsx(oi,{className:"h-11",children:a.jsx(si,{placeholder:"Select species"})}),a.jsxs(ii,{children:[a.jsx(ht,{value:"dog",children:"🐕 Dog"}),a.jsx(ht,{value:"cat",children:"🐱 Cat"}),a.jsx(ht,{value:"other",children:"🐾 Other"})]})]}),l.formState.errors.species&&a.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1.5",children:[a.jsx(Ue,{className:"h-3.5 w-3.5"}),l.formState.errors.species.message]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{htmlFor:"birthdate",className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(ha,{className:"h-3.5 w-3.5"}),"Birthdate"]}),a.jsx(le,{id:"birthdate",type:"date",...l.register("birthdate"),className:"h-11"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(je,{className:"h-3.5 w-3.5"}),u==="cat"?"Pattern":"Breed",u==="other"&&a.jsx("span",{className:"text-muted-foreground text-xs",children:"(optional)"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(le,{placeholder:u==="dog"?"e.g., Golden Retriever":u==="cat"?"e.g., Tabby, Calico":"e.g., Rabbit, Guinea Pig",...l.register("breed"),className:"h-11 flex-1"}),N.length>0&&a.jsxs(Si,{open:f,onOpenChange:x,children:[a.jsx(Ci,{asChild:!0,children:a.jsxs(Q,{type:"button",variant:"outline",className:"w-36 justify-between h-11",children:["Suggestions ",a.jsx(va,{className:"h-4 w-4 opacity-60"})]})}),a.jsx(ki,{className:"p-0 w-64",children:a.jsxs(Xi,{children:[a.jsx(Ji,{placeholder:"Search…"}),a.jsxs(Zi,{children:[a.jsx(el,{children:"No matches found."}),a.jsx(tl,{children:N.map(g=>a.jsx(rl,{value:g,onSelect:E=>{l.setValue("breed",E),x(!1)},children:g},g))})]})]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{htmlFor:"color",className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(At,{className:"h-3.5 w-3.5"}),"Color"]}),a.jsx(le,{id:"color",...l.register("color"),placeholder:"e.g., Brown, White, Mixed",className:"h-11"}),k.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 pt-1",children:k.map(g=>a.jsx("button",{type:"button",onClick:()=>l.setValue("color",g,{shouldValidate:!0}),className:"rounded-full border border-primary/20 bg-primary/5 px-3 py-1 text-xs font-medium hover:bg-primary/10 transition-colors",children:g},g))})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{htmlFor:"weight",className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Fa,{className:"h-3.5 w-3.5"}),"Weight (lbs)"]}),a.jsx(le,{id:"weight",type:"number",step:"0.1",placeholder:"e.g., 45.5",...l.register("weight",{valueAsNumber:!0}),className:"h-11"}),l.formState.errors.weight&&a.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1.5",children:[a.jsx(Ue,{className:"h-3.5 w-3.5"}),l.formState.errors.weight.message]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ee,{htmlFor:"microchipId",className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(ca,{className:"h-3.5 w-3.5"}),"Microchip ID"]}),a.jsx(le,{id:"microchipId",...l.register("microchipId"),placeholder:"e.g., 981000012345678",className:"h-11"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ee,{htmlFor:"description",className:"text-sm font-medium",children:"Physical Description"}),a.jsx(le,{id:"description",...l.register("description"),placeholder:"e.g., White paws, brown spot on left ear",className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ee,{htmlFor:"notes",className:"text-sm font-medium",children:"Additional Notes"}),a.jsx(Zn,{id:"notes",...l.register("notes"),placeholder:"Allergies, medications, behavioral notes, vet contact info...",className:"min-h-[80px] resize-none"})]})]})]}),a.jsx(mt,{}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[a.jsx(Da,{className:"h-4 w-4 text-primary"}),"Vaccinations"]}),a.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-primary/20",children:[a.jsx(mr,{className:"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950",children:a.jsx(fr,{className:"text-xs text-blue-800 dark:text-blue-200",children:"Keep track of your pet's vaccination records for their health and safety"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 bg-secondary/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("input",{id:"rabies",type:"checkbox",className:"h-4 w-4 rounded border-primary text-primary focus:ring-primary",checked:!!l.watch("vaccinations.rabies"),onChange:g=>l.setValue("vaccinations.rabies",g.target.checked)}),a.jsx(ee,{htmlFor:"rabies",className:"text-sm font-medium cursor-pointer",children:"Rabies Vaccination"})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:w-48",children:[a.jsx(ee,{htmlFor:"rabiesExpires",className:"text-xs text-muted-foreground whitespace-nowrap",children:"Expires:"}),a.jsx(le,{id:"rabiesExpires",type:"date",disabled:!l.watch("vaccinations.rabies"),...l.register("vaccinations.rabiesExpires"),className:"h-9"})]})]})]})]}),a.jsx(mt,{}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[a.jsx(At,{className:"h-4 w-4 text-primary"}),"Page Theme"]}),a.jsxs("div",{className:"pl-6 border-l-2 border-primary/20",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose a color theme for your pet's public page"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.values(Bn).map(g=>a.jsxs("button",{type:"button",onClick:()=>j(g.id),className:H("relative p-3 rounded-lg border-2 transition-all hover:scale-105",p===g.id?"border-primary shadow-md":"border-border hover:border-primary/50"),children:[a.jsx("div",{className:H("h-16 rounded-md mb-2 bg-gradient-to-br",g.previewGradient)}),a.jsx("p",{className:"text-xs font-medium text-center",children:g.name}),p===g.id&&a.jsx("div",{className:"absolute top-2 right-2 h-5 w-5 bg-primary rounded-full flex items-center justify-center",children:a.jsx(Ir,{className:"h-3 w-3 text-primary-foreground"})})]},g.id))})]})]}),a.jsx(mt,{}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[a.jsx(ga,{className:"h-4 w-4 text-primary"}),"Pet Photo"]}),a.jsx("div",{className:"pl-6 border-l-2 border-primary/20",children:a.jsx(ol,{label:"",value:l.watch("photoPreview")?{blob:new Blob,dataUrl:l.watch("photoPreview"),width:0,height:0,approxKB:0,mimeType:"image/*",original:{name:"",sizeKB:0,type:""}}:null,onChange:g=>{_.current=g?.blob??null,l.setValue("photoPreview",g?.dataUrl??"")},options:{maxWidth:1200,maxHeight:1200,quality:.82,preferWebP:!0}})})]}),a.jsxs(wr,{className:"gap-2 sm:gap-0 pt-4",children:[a.jsx(Q,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:i,className:"transition-all hover:scale-105",children:"Cancel"}),a.jsx(Q,{type:"submit",disabled:i,className:"transition-all hover:scale-105",children:i?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t==="add"?"Creating...":"Updating..."]}):a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(je,{className:"h-4 w-4"}),t==="add"?"Create Pet Profile":"Save Changes"]})})]})]})]})})}function Ul(){const{user:t}=Tt(),e=Xe(),r=t?.id??null,{backfillAllQR:n,isBackfilling:s}=yo(r),{data:o,isLoading:i,isError:c}=Mt({queryKey:["pets",r],queryFn:async()=>r?Ja(r):[],enabled:!!r,staleTime:3e4}),[l,u]=d.useState(!1),[m,f]=d.useState(null),[x,w]=d.useState(null),[v,p]=d.useState(null),[j,_]=d.useState(null),[N,k]=d.useState(!1),T=S=>{const z=`${window.location.origin}/p/${S.short_id}`;window.open(z,"_blank")},g=async()=>{await e.invalidateQueries({queryKey:["pets",r]}),f(null),u(!1)},E=async()=>{await e.invalidateQueries({queryKey:["pets",r]}),w(null)},y=vt({mutationFn:async({id:S,missing:B})=>$e(S,{missing:B,missing_since:B?new Date().toISOString():null}),onSuccess:async()=>{await e.invalidateQueries({queryKey:["pets",r]})}}),R=async(S,B)=>{if(B)_(S);else try{k(!0),await y.mutateAsync({id:S.id,missing:!1})}catch(z){alert(z?.message??"Failed to update")}finally{k(!1)}},$=async()=>{if(j)try{k(!0),await y.mutateAsync({id:j.id,missing:!0})}catch(S){alert(S?.message??"Failed to update")}finally{k(!1),_(null)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-xl flex items-center justify-center ring-4 ring-primary/5",children:a.jsx(je,{className:"h-5 w-5 text-primary"})}),"Dashboard"]}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your pets, QR codes, and track activity"})]}),a.jsxs(Wn,{defaultValue:"pets",className:"space-y-4",children:[a.jsxs(Ln,{className:"grid w-full max-w-2xl grid-cols-3",children:[a.jsxs(ct,{value:"pets",className:"gap-2",children:[a.jsx(je,{className:"h-4 w-4"}),"My Pets"]}),a.jsxs(ct,{value:"locations",className:"gap-2",children:[a.jsx(Bt,{className:"h-4 w-4"}),"Locations"]}),a.jsxs(ct,{value:"activity",className:"gap-2",children:[a.jsx(Bt,{className:"h-4 w-4"}),"Activity"]})]}),a.jsxs(dt,{value:"pets",className:"space-y-4",children:[a.jsxs(Ne,{className:"shadow-lg border-primary/10",children:[a.jsx(De,{className:"space-y-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs(Re,{className:"text-2xl flex items-center gap-2",children:[a.jsx(ur,{className:"h-5 w-5 text-primary"}),"Registered Pets"]}),a.jsx(wt,{className:"text-base",children:"Manage profiles, photos, QR tags, and missing status"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs(Q,{variant:"outline",onClick:n,disabled:!r||s,className:"gap-2 transition-all hover:scale-105",children:[a.jsx(Qe,{className:`h-4 w-4 ${s?"animate-spin":""}`}),s?"Working…":"Backfill QR"]}),a.jsxs(Q,{onClick:()=>u(!0),disabled:!r,className:"gap-2 transition-all hover:scale-105",children:[a.jsx(Wt,{className:"h-4 w-4"}),"Add Pet"]})]})]})}),a.jsx(Ee,{children:i?a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((S,B)=>a.jsxs(Ne,{className:"p-4 space-y-3",children:[a.jsx(ue,{className:"h-5 w-40"}),a.jsx(ue,{className:"h-4 w-24"}),a.jsx(ue,{className:"h-32 w-full rounded-md"}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(ue,{className:"h-9 w-16"}),a.jsx(ue,{className:"h-9 w-16"}),a.jsx(ue,{className:"h-9 w-16"})]})]},B))}):c?a.jsxs(mr,{variant:"destructive",children:[a.jsx(Ue,{className:"h-4 w-4"}),a.jsx(fr,{children:"Failed to load pets. Please try again."})]}):o&&o.length>0?a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(S=>a.jsxs(Ne,{className:"overflow-hidden transition-all duration-200 hover:shadow-lg hover:scale-[1.02] border-primary/10",children:[a.jsxs(De,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs(Re,{className:"text-lg truncate flex items-center gap-2",children:[a.jsx(je,{className:"h-4 w-4 text-primary flex-shrink-0"}),S.name]}),a.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[S.missing&&a.jsxs(Ye,{variant:"destructive",className:"gap-1 animate-pulse",children:[a.jsx(yt,{className:"h-3 w-3"}),"Missing"]}),a.jsx(Ye,{variant:"secondary",className:"capitalize text-xs",children:S.species})]})]}),a.jsx(wt,{className:"line-clamp-2 text-sm",children:S.breed||S.description||"No description"})]}),S.photo_url&&a.jsx("div",{className:"px-4 pb-3",children:a.jsx("img",{src:S.photo_url,alt:`${S.name} photo`,className:"w-full h-40 rounded-lg object-cover ring-1 ring-primary/10",loading:"lazy"})}),a.jsxs(Ee,{className:"space-y-3 pt-3 border-t",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Q,{size:"sm",onClick:()=>f(S),className:"gap-1.5 flex-1 transition-all hover:scale-105",children:[a.jsx(Ea,{className:"h-3.5 w-3.5"}),"Edit"]}),a.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>T(S),className:"gap-1.5 flex-1 transition-all hover:scale-105",children:[a.jsx(Nr,{className:"h-3.5 w-3.5"}),"View"]}),a.jsxs(Q,{size:"sm",variant:S.qr_url?"outline":"secondary",onClick:()=>p(S),className:"gap-1.5 flex-1 transition-all hover:scale-105",title:S.qr_url?"View QR":"Generate QR",children:[a.jsx(Ar,{className:"h-3.5 w-3.5"}),S.qr_url?"QR":"Create"]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ee,{htmlFor:`missing-${S.id}`,className:"text-sm font-medium cursor-pointer",children:"Mark Missing"}),a.jsx(qn,{id:`missing-${S.id}`,checked:!!S.missing,disabled:N||y.isPending,onCheckedChange:B=>R(S,B)})]}),a.jsxs(Q,{size:"sm",variant:"ghost",onClick:()=>w(S),className:"gap-1.5 text-destructive hover:text-destructive hover:bg-destructive/10",children:[a.jsx(dr,{className:"h-3.5 w-3.5"}),"Delete"]})]})]})]},S.id))}):a.jsxs("div",{className:"text-center py-12 space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-20 w-20 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(je,{className:"h-10 w-10 text-primary/60"})})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-medium text-foreground",children:"No pets yet"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Click ",a.jsx("span",{className:"font-medium text-foreground",children:"Add Pet"})," to create your first pet profile"]})]}),a.jsxs(Q,{onClick:()=>u(!0),className:"gap-2 mt-4",children:[a.jsx(Wt,{className:"h-4 w-4"}),"Add Your First Pet"]})]})})]}),a.jsx(tr,{mode:"add",open:l,onOpenChange:u,onSubmit:g}),m&&a.jsx(tr,{mode:"edit",open:!!m,onOpenChange:S=>!S&&f(null),initialPet:{id:m.id,name:m.name,species:m.species,breed:m.breed??void 0,color:m.color??void 0,weight:m.weight??void 0,birthdate:m.birthdate??void 0,microchipId:m.microchip_id??void 0,description:m.description??void 0,notes:m.notes??void 0,vaccinations:m.vaccinations?{rabies:m.vaccinations.rabies??!1,rabiesExpires:m.vaccinations.rabiesExpires??void 0}:void 0,photoPreview:m.photo_url??void 0},onSubmit:g}),r&&a.jsx(rs,{pet:v,open:!!v,onOpenChange:S=>!S&&p(null),ownerId:r}),a.jsx(ns,{pet:x,open:!!x,onOpenChange:S=>!S&&w(null),onDeleted:E}),a.jsx(rr,{open:!!j,onOpenChange:S=>!S&&_(null),children:a.jsxs(nr,{children:[a.jsxs(ar,{children:[a.jsxs(sr,{className:"flex items-center gap-2",children:[a.jsx(yt,{className:"h-5 w-5 text-orange-500"}),"Mark ",j?.name," as missing?"]}),a.jsx(or,{children:"This helps highlight their profile and can trigger your outreach flow. You can turn this off later."})]}),a.jsxs(ir,{children:[a.jsx(lr,{disabled:N,children:"Cancel"}),a.jsx(cr,{disabled:N,onClick:$,className:"gap-2",children:N?a.jsxs(a.Fragment,{children:[a.jsx(Qe,{className:"h-4 w-4 animate-spin"}),"Saving…"]}):"Yes, mark missing"})]})]})})]}),a.jsx(dt,{value:"locations",className:"mt-4",children:a.jsx(mo,{})}),a.jsx(dt,{value:"activity",className:"mt-4",children:a.jsx($a,{days:30})})]})]})}export{Ul as default};
