const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dd9VGw46.js","assets/pdf-DO90N-Wx.js","assets/forms-BenlWNMe.js","assets/radix-ui-Bptolu_l.js","assets/react-dom-CWqaeSHD.js","assets/supabase-Dq_AJ6PJ.js","assets/router-fBLXKt6a.js","assets/react-query-DgYD4zqU.js","assets/index-qzZ_b8SQ.css"])))=>i.map(i=>d[i]);
import{_ as ye}from"./pdf-DO90N-Wx.js";import{j as s}from"./radix-ui-Bptolu_l.js";import{r as z,u as oe}from"./forms-BenlWNMe.js";import{a as ne,o as pe,s as k,b as ie,l as ce}from"./zod-B4P2RwCa.js";import{c as xe,b as be,T as ve,u as Ne}from"./index-Dd9VGw46.js";import{u as we}from"./useProfile-nHo-yfY0.js";import{C as H,d as O,b as ue,a as fe,c as ge,e as _e}from"./card-B15pueGN.js";import{B as V}from"./button-CF7bJTeZ.js";import{L as w,I as $}from"./input-ncIFNCOj.js";import{S as Z}from"./separator-BJSICdTr.js";import{A as se,a as ae}from"./alert-BxnlJauh.js";import{T as Se,a as ke,b as de,c as me}from"./tabs-BfFv3plC.js";import{S as Ce}from"./switch-CuBj0eGJ.js";import{B as Pe}from"./badge-loPPs1rg.js";import{m as Te,k as he,y as Me,z as Ae,I as Ee,g as Fe}from"./icons-BE4ufEBC.js";import{S as Be}from"./SocialMediaInput-BiKiBj-Z.js";import"./react-dom-CWqaeSHD.js";import"./supabase-Dq_AJ6PJ.js";import"./router-fBLXKt6a.js";import"./react-query-DgYD4zqU.js";import"./utils-CBfrqCZ4.js";import"./index-CdJFUDDL.js";function De(e){const a=xe.c(44),{theme:r,isSelected:_,darkMode:C,onClick:n}=e,l=C?r.colors.dark:r.colors.light,i=`relative cursor-pointer transition-all duration-200 hover:shadow-lg ${_?"ring-2 ring-primary shadow-xl":""}`;let c;a[0]!==_?(c=_&&s.jsx("div",{className:"absolute top-2 right-2 h-6 w-6 bg-primary rounded-full flex items-center justify-center",children:s.jsx(Te,{className:"h-4 w-4 text-primary-foreground"})}),a[0]=_,a[1]=c):c=a[1];let t;a[2]!==r.name?(t=s.jsx("h3",{className:"font-semibold text-lg",children:r.name}),a[2]=r.name,a[3]=t):t=a[3];let y;a[4]!==r.category?(y=s.jsx(Pe,{variant:"outline",className:"text-xs",children:r.category}),a[4]=r.category,a[5]=y):y=a[5];let d;a[6]!==t||a[7]!==y?(d=s.jsxs("div",{className:"flex items-center justify-between",children:[t,y]}),a[6]=t,a[7]=y,a[8]=d):d=a[8];let p;a[9]!==r.description?(p=s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),a[9]=r.description,a[10]=p):p=a[10];const x=`h-20 rounded-lg bg-gradient-to-br ${r.previewGradient} border`;let h;a[11]!==l.cardBorder?(h={borderColor:l.cardBorder},a[11]=l.cardBorder,a[12]=h):h=a[12];let u;a[13]!==x||a[14]!==h?(u=s.jsx("div",{className:x,style:h}),a[13]=x,a[14]=h,a[15]=u):u=a[15];let f;a[16]!==l.primary?(f=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.primary},title:"Primary"}),a[16]=l.primary,a[17]=f):f=a[17];let m;a[18]!==l.secondary?(m=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.secondary},title:"Secondary"}),a[18]=l.secondary,a[19]=m):m=a[19];let g;a[20]!==l.accent?(g=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.accent},title:"Accent"}),a[20]=l.accent,a[21]=g):g=a[21];let j;a[22]!==l.cardBg?(j=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.cardBg},title:"Card Background"}),a[22]=l.cardBg,a[23]=j):j=a[23];let b;a[24]!==l.buttonPrimary?(b=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.buttonPrimary},title:"Button"}),a[24]=l.buttonPrimary,a[25]=b):b=a[25];let v;a[26]!==f||a[27]!==m||a[28]!==g||a[29]!==j||a[30]!==b?(v=s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[f,m,g,j,b]}),a[26]=f,a[27]=m,a[28]=g,a[29]=j,a[30]=b,a[31]=v):v=a[31];let S;a[32]!==v||a[33]!==d||a[34]!==p||a[35]!==u?(S=s.jsxs("div",{className:"space-y-3",children:[d,p,u,v]}),a[32]=v,a[33]=d,a[34]=p,a[35]=u,a[36]=S):S=a[36];let N;a[37]!==S||a[38]!==c?(N=s.jsxs(H,{className:"p-4",children:[c,S]}),a[37]=S,a[38]=c,a[39]=N):N=a[39];let P;return a[40]!==n||a[41]!==i||a[42]!==N?(P=s.jsx(O,{className:i,onClick:n,children:N}),a[40]=n,a[41]=i,a[42]=N,a[43]=P):P=a[43],P}const ee="pawtrace_theme_first_time_seen";function Ie(){const e=xe.c(70),{themeId:a,darkMode:r,updateTheme:_,isLoading:C,previewTheme:n,clearPreview:l}=be(),[i,c]=z.useState(a),[t,y]=z.useState(r),[d,p]=z.useState(!1),[x,h]=z.useState(!1);let u,f;e[0]!==r||e[1]!==a?(u=()=>{c(a),y(r)},f=[a,r],e[0]=r,e[1]=a,e[2]=u,e[3]=f):(u=e[2],f=e[3]),z.useEffect(u,f);let m;e[4]!==r||e[5]!==t||e[6]!==n||e[7]!==a?(m=o=>{c(o),p(o!==a||t!==r),n(o,t),!localStorage.getItem(ee)&&(o!==a||t!==r)&&(h(!0),localStorage.setItem(ee,"true"))},e[4]=r,e[5]=t,e[6]=n,e[7]=a,e[8]=m):m=e[8];const g=m;let j;e[9]!==r||e[10]!==t||e[11]!==n||e[12]!==i||e[13]!==a?(j=()=>{const o=!t;y(o),p(i!==a||o!==r),n(i,o),!localStorage.getItem(ee)&&(i!==a||o!==r)&&(h(!0),localStorage.setItem(ee,"true"))},e[9]=r,e[10]=t,e[11]=n,e[12]=i,e[13]=a,e[14]=j):j=e[14];const b=j;let v;e[15]!==t||e[16]!==i||e[17]!==_?(v=async()=>{await _(i,t),p(!1),h(!1)},e[15]=t,e[16]=i,e[17]=_,e[18]=v):v=e[18];const S=v;let N;e[19]!==l||e[20]!==r||e[21]!==a?(N=()=>{c(a),y(r),p(!1),h(!1),l()},e[19]=l,e[20]=r,e[21]=a,e[22]=N):N=e[22];const P=N;if(C){let o;return e[23]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(O,{children:s.jsx(H,{className:"p-8",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})})}),e[23]=o):o=e[23],o}let q;e[24]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(ue,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(he,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(fe,{children:"Appearance"}),s.jsx(ge,{children:"Customize your application theme and color preferences"})]})]})}),e[24]=q):q=e[24];let T;e[25]!==t?(T=t?s.jsx(Me,{className:"h-5 w-5 text-primary"}):s.jsx(Ae,{className:"h-5 w-5 text-primary"}),e[25]=t,e[26]=T):T=e[26];let G;e[27]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(w,{htmlFor:"dark-mode",className:"text-base font-medium cursor-pointer",children:"Dark Mode"}),e[27]=G):G=e[27];const re=t?"Using dark theme":"Using light theme";let M;e[28]!==re?(M=s.jsxs("div",{children:[G,s.jsx("p",{className:"text-sm text-muted-foreground",children:re})]}),e[28]=re,e[29]=M):M=e[29];let A;e[30]!==M||e[31]!==T?(A=s.jsxs("div",{className:"flex items-center gap-3",children:[T,M]}),e[30]=M,e[31]=T,e[32]=A):A=e[32];let E;e[33]!==b||e[34]!==t?(E=s.jsx(Ce,{id:"dark-mode",checked:t,onCheckedChange:b}),e[33]=b,e[34]=t,e[35]=E):E=e[35];let F;e[36]!==A||e[37]!==E?(F=s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/30",children:[A,E]}),e[36]=A,e[37]=E,e[38]=F):F=e[38];let B;e[39]!==d||e[40]!==x?(B=x&&d&&s.jsxs(se,{className:"border-blue-200 bg-blue-50 dark:border-blue-900 dark:bg-blue-950",children:[s.jsx(Ee,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx(ae,{className:"text-blue-800 dark:text-blue-200",children:`You're previewing this theme. Scroll down and click "Apply Theme" to save your changes.`})]}),e[39]=d,e[40]=x,e[41]=B):B=e[41];let D;e[42]!==d||e[43]!==x?(D=d&&!x&&s.jsxs(se,{className:"border-primary/50 bg-primary/5",children:[s.jsx(Fe,{className:"h-4 w-4 text-primary"}),s.jsx(ae,{children:'You have unsaved changes. Click "Apply Theme" to save your preferences.'})]}),e[42]=d,e[43]=x,e[44]=D):D=e[44];let J;e[45]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Your Theme"}),e[45]=J):J=e[45];let K;e[46]===Symbol.for("react.memo_cache_sentinel")?(K=Object.values(ve),e[46]=K):K=e[46];let I;e[47]!==g||e[48]!==t||e[49]!==i?(I=s.jsxs("div",{children:[J,s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(o=>s.jsx(De,{theme:o,isSelected:i===o.id,darkMode:t,onClick:()=>g(o.id)},o.id))})]}),e[47]=g,e[48]=t,e[49]=i,e[50]=I):I=e[50];const te=!d;let R;e[51]!==S||e[52]!==te?(R=s.jsx(V,{onClick:S,disabled:te,className:"flex-1",children:"Apply Theme"}),e[51]=S,e[52]=te,e[53]=R):R=e[53];const le=!d;let L;e[54]!==P||e[55]!==le?(L=s.jsx(V,{onClick:P,disabled:le,variant:"outline",children:"Reset"}),e[54]=P,e[55]=le,e[56]=L):L=e[56];let U;e[57]!==R||e[58]!==L?(U=s.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t",children:[R,L]}),e[57]=R,e[58]=L,e[59]=U):U=e[59];let Y;e[60]!==F||e[61]!==B||e[62]!==D||e[63]!==I||e[64]!==U?(Y=s.jsxs(O,{children:[q,s.jsxs(H,{className:"space-y-6",children:[F,B,D,I,U]})]}),e[60]=F,e[61]=B,e[62]=D,e[63]=I,e[64]=U,e[65]=Y):Y=e[65];let Q;e[66]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(he,{className:"h-5 w-5 text-primary"})}),e[66]=Q):Q=e[66];let W;e[67]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(O,{className:"border-primary/20 bg-primary/5",children:s.jsx(H,{className:"p-6",children:s.jsxs("div",{className:"flex gap-4",children:[Q,s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Customize Individual Pet Pages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"You can customize the theme for each pet's page from your Dashboard. When editing a pet profile, select a unique theme that best represents your pet's personality."})]})]})})}),e[67]=W):W=e[67];let X;return e[68]!==Y?(X=s.jsxs("div",{className:"space-y-6",children:[Y,W]}),e[68]=Y,e[69]=X):X=e[69],X}const Re=pe({display_name:k().min(1,"Please enter your name").max(80),avatar_url:k().max(500).url("Must be a valid URL").or(ce("")).optional(),phone:k().max(15,"Must be at most 15 characters").optional(),share_email:ie().optional(),share_phone:ie().optional(),share_social_links:ie().optional(),instagram:k().max(100).optional(),facebook:k().max(100).optional(),twitter:k().max(100).optional(),telegram:k().max(100).optional(),whatsapp:k().max(20).optional(),website:k().max(200).url("Must be a valid URL").or(ce("")).optional()}),Le=pe({new_password:k().min(8,"At least 8 characters")});function os(){const{user:e,signOut:a}=Ne(),{data:r,isLoading:_,update:C}=we(),{register:n,handleSubmit:l,reset:i,formState:{errors:c,isSubmitting:t}}=oe({resolver:ne(Re),defaultValues:{display_name:"",avatar_url:"",phone:"",instagram:"",facebook:"",twitter:"",telegram:"",whatsapp:"",website:""}});z.useEffect(()=>{r&&i({display_name:r.display_name??"",avatar_url:r.avatar_url??"",phone:r.phone??"",share_email:r.share_email??!1,share_phone:r.share_phone??!1,share_social_links:r.share_social_links??!1,instagram:r.instagram??"",facebook:r.facebook??"",twitter:r.twitter??"",telegram:r.telegram??"",whatsapp:r.whatsapp??"",website:r.website??""})},[r,i]);const{register:y,handleSubmit:d,reset:p,formState:{errors:x,isSubmitting:h}}=oe({resolver:ne(Le),defaultValues:{new_password:""}}),u=async m=>{await C.mutateAsync(m)},f=async m=>{const{error:g}=await(await ye(async()=>{const{supabase:j}=await import("./index-Dd9VGw46.js").then(b=>b.d);return{supabase:j}},__vite__mapDeps([0,1,2,3,4,5,6,7,8]))).supabase.auth.updateUser({password:m.new_password});if(g)throw g;p({new_password:""})};return e?s.jsxs("div",{className:"mx-auto max-w-4xl space-y-6 p-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Account Settings"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your profile, appearance, and security settings"})]}),s.jsxs(Se,{defaultValue:"profile",className:"w-full",children:[s.jsxs(ke,{className:"grid w-full grid-cols-2",children:[s.jsx(de,{value:"profile",children:"Profile & Security"}),s.jsx(de,{value:"appearance",children:"Appearance"})]}),s.jsx(me,{value:"profile",className:"space-y-6 mt-6",children:s.jsxs(O,{children:[s.jsxs(ue,{children:[s.jsx(fe,{children:"Profile Information"}),s.jsx(ge,{children:"Manage your profile and contact details"})]}),s.jsxs(H,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(w,{children:"Email"}),s.jsx($,{value:e.email??"",disabled:!0})]}),s.jsx(Z,{}),s.jsxs("form",{onSubmit:l(u),className:"grid gap-6",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(w,{htmlFor:"display_name",children:"Display name"}),s.jsx($,{id:"display_name",placeholder:"Jane Doe",...n("display_name")}),c.display_name&&s.jsx("p",{className:"text-sm text-destructive",children:c.display_name.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(w,{htmlFor:"avatar_url",children:"Avatar URL (optional)"}),s.jsx($,{id:"avatar_url",placeholder:"https://…",...n("avatar_url")}),c.avatar_url&&s.jsx("p",{className:"text-sm text-destructive",children:c.avatar_url.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(w,{htmlFor:"phone",children:"Phone number (optional)"}),s.jsx($,{id:"phone",placeholder:"+1 (555) 123-4567",...n("phone")}),c.phone&&s.jsx("p",{className:"text-sm text-destructive",children:c.phone.message})]}),s.jsx(Z,{}),s.jsx(Be,{register:n,errors:c}),s.jsx(Z,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(w,{className:"text-base font-semibold",children:"Privacy & Sharing"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Control what information is visible when someone scans your pet's QR code"})]}),s.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-primary/20",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",...n("share_email"),id:"share_email",className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(w,{htmlFor:"share_email",className:"cursor-pointer font-medium",children:"Share my email address"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Allow pet finders to contact you via email"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",...n("share_phone"),id:"share_phone",className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(w,{htmlFor:"share_phone",className:"cursor-pointer font-medium",children:"Share my phone number"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Allow pet finders to call or text you"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",...n("share_social_links"),id:"share_social_links",className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(w,{htmlFor:"share_social_links",className:"cursor-pointer font-medium",children:"Share my social media & website links"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Display your social media profiles to pet finders"})]})]})]})]}),C.isError&&s.jsx(se,{variant:"destructive",children:s.jsx(ae,{children:String(C.error?.message??"Save failed")})}),C.isSuccess&&s.jsx(se,{children:s.jsx(ae,{children:"Profile updated successfully."})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(V,{type:"submit",disabled:t||_,children:t?"Saving…":"Save changes"}),s.jsx(V,{type:"button",variant:"outline",onClick:()=>i(),children:"Reset"})]})]}),s.jsx(Z,{}),s.jsxs("form",{onSubmit:d(f),className:"grid gap-3",children:[s.jsxs("div",{children:[s.jsx(w,{className:"text-base font-semibold",children:"Change Password"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update your password to keep your account secure"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(w,{htmlFor:"new_password",children:"New password"}),s.jsx($,{id:"new_password",type:"password",placeholder:"••••••••",...y("new_password")}),x.new_password&&s.jsx("p",{className:"text-sm text-destructive",children:x.new_password.message})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(V,{type:"submit",disabled:h,children:h?"Updating…":"Update password"})})]})]}),s.jsxs(_e,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Signed in as ",s.jsx("span",{className:"text-foreground",children:e.email})]}),s.jsx(V,{variant:"ghost",onClick:()=>a(),children:"Sign out"})]})]})}),s.jsx(me,{value:"appearance",className:"mt-6",children:s.jsx(Ie,{})})]})]}):null}export{os as default};
