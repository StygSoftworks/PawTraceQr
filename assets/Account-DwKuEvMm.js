const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CveSHR4s.js","./index-anPdwH-E.css"])))=>i.map(i=>d[i]);
import{c as oe,j as s,e as he,r as $,T as pe,u as xe,_ as ue}from"./index-CveSHR4s.js";import{u as se,a as ae,o as ne,s as k,b as X,l as re}from"./zod-B09zC67m.js";import{M as fe,S as je,u as ge}from"./useProfile-hp4Qfwfr.js";import{a as H,C as O,c as ce,b as de,d as me,e as ye}from"./card-DUbWSefE.js";import{B as I}from"./button-C1-kpeoZ.js";import{L as _,I as V}from"./input-D0GSPZmS.js";import{S as Q}from"./separator-DQKKBwsK.js";import{A as Z,a as ee}from"./alert-C4gaMrOg.js";import{T as be,a as ve,b as te,c as le}from"./tabs-DbUQUT2u.js";import{P as Ne,a as we,S as ie}from"./switch-Dl8_zw-4.js";import{B as _e}from"./badge-ZSezyRVn.js";import{C as Se}from"./check-DLrX2naY.js";import{S as ke}from"./SocialMediaInput-CGyGf0w4.js";import"./createLucideIcon-cgnMhNqX.js";import"./useQuery-CttsVz0J.js";import"./useMutation-B67EKEEt.js";import"./index-KwCZusiW.js";import"./index-DeFTGeu5.js";import"./index-B5EiWyJA.js";import"./twitter-DPBqxANA.js";function Ce(e){const a=oe.c(44),{theme:r,isSelected:S,darkMode:C,onClick:i}=e,l=C?r.colors.dark:r.colors.light,t=`relative cursor-pointer transition-all duration-200 hover:shadow-lg ${S?"ring-2 ring-primary shadow-xl":""}`;let o;a[0]!==S?(o=S&&s.jsx("div",{className:"absolute top-2 right-2 h-6 w-6 bg-primary rounded-full flex items-center justify-center",children:s.jsx(Se,{className:"h-4 w-4 text-primary-foreground"})}),a[0]=S,a[1]=o):o=a[1];let n;a[2]!==r.name?(n=s.jsx("h3",{className:"font-semibold text-lg",children:r.name}),a[2]=r.name,a[3]=n):n=a[3];let d;a[4]!==r.category?(d=s.jsx(_e,{variant:"outline",className:"text-xs",children:r.category}),a[4]=r.category,a[5]=d):d=a[5];let m;a[6]!==n||a[7]!==d?(m=s.jsxs("div",{className:"flex items-center justify-between",children:[n,d]}),a[6]=n,a[7]=d,a[8]=m):m=a[8];let h;a[9]!==r.description?(h=s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),a[9]=r.description,a[10]=h):h=a[10];const v=`h-20 rounded-lg bg-gradient-to-br ${r.previewGradient} border`;let p;a[11]!==l.cardBorder?(p={borderColor:l.cardBorder},a[11]=l.cardBorder,a[12]=p):p=a[12];let x;a[13]!==v||a[14]!==p?(x=s.jsx("div",{className:v,style:p}),a[13]=v,a[14]=p,a[15]=x):x=a[15];let g;a[16]!==l.primary?(g=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.primary},title:"Primary"}),a[16]=l.primary,a[17]=g):g=a[17];let c;a[18]!==l.secondary?(c=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.secondary},title:"Secondary"}),a[18]=l.secondary,a[19]=c):c=a[19];let u;a[20]!==l.accent?(u=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.accent},title:"Accent"}),a[20]=l.accent,a[21]=u):u=a[21];let f;a[22]!==l.cardBg?(f=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.cardBg},title:"Card Background"}),a[22]=l.cardBg,a[23]=f):f=a[23];let y;a[24]!==l.buttonPrimary?(y=s.jsx("div",{className:"h-8 rounded border",style:{backgroundColor:l.buttonPrimary},title:"Button"}),a[24]=l.buttonPrimary,a[25]=y):y=a[25];let N;a[26]!==g||a[27]!==c||a[28]!==u||a[29]!==f||a[30]!==y?(N=s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[g,c,u,f,y]}),a[26]=g,a[27]=c,a[28]=u,a[29]=f,a[30]=y,a[31]=N):N=a[31];let j;a[32]!==N||a[33]!==m||a[34]!==h||a[35]!==x?(j=s.jsxs("div",{className:"space-y-3",children:[m,h,x,N]}),a[32]=N,a[33]=m,a[34]=h,a[35]=x,a[36]=j):j=a[36];let w;a[37]!==j||a[38]!==o?(w=s.jsxs(H,{className:"p-4",children:[o,j]}),a[37]=j,a[38]=o,a[39]=w):w=a[39];let P;return a[40]!==i||a[41]!==t||a[42]!==w?(P=s.jsx(O,{className:t,onClick:i,children:w}),a[40]=i,a[41]=t,a[42]=w,a[43]=P):P=a[43],P}function Pe(){const e=oe.c(62),{themeId:a,darkMode:r,updateTheme:S,isLoading:C}=he(),[i,l]=$.useState(a),[t,o]=$.useState(r),[n,d]=$.useState(!1);let m,h;e[0]!==r||e[1]!==a?(m=()=>{l(a),o(r)},h=[a,r],e[0]=r,e[1]=a,e[2]=m,e[3]=h):(m=e[2],h=e[3]),$.useEffect(m,h);let v;e[4]!==r||e[5]!==t||e[6]!==a?(v=b=>{l(b),d(b!==a||t!==r)},e[4]=r,e[5]=t,e[6]=a,e[7]=v):v=e[7];const p=v;let x;e[8]!==r||e[9]!==t||e[10]!==i||e[11]!==a?(x=()=>{o(!t),d(i!==a||!t!==r)},e[8]=r,e[9]=t,e[10]=i,e[11]=a,e[12]=x):x=e[12];const g=x;let c;e[13]!==t||e[14]!==i||e[15]!==S?(c=async()=>{await S(i,t),d(!1)},e[13]=t,e[14]=i,e[15]=S,e[16]=c):c=e[16];const u=c;let f;e[17]!==r||e[18]!==a?(f=()=>{l(a),o(r),d(!1)},e[17]=r,e[18]=a,e[19]=f):f=e[19];const y=f;if(C){let b;return e[20]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(O,{children:s.jsx(H,{className:"p-8",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})})}),e[20]=b):b=e[20],b}let N;e[21]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(ce,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(Ne,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(de,{children:"Appearance"}),s.jsx(me,{children:"Customize your application theme and color preferences"})]})]})}),e[21]=N):N=e[21];let j;e[22]!==t?(j=t?s.jsx(fe,{className:"h-5 w-5 text-primary"}):s.jsx(je,{className:"h-5 w-5 text-primary"}),e[22]=t,e[23]=j):j=e[23];let w;e[24]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(_,{htmlFor:"dark-mode",className:"text-base font-medium cursor-pointer",children:"Dark Mode"}),e[24]=w):w=e[24];const P=t?"Using dark theme":"Using light theme";let T;e[25]!==P?(T=s.jsxs("div",{children:[w,s.jsx("p",{className:"text-sm text-muted-foreground",children:P})]}),e[25]=P,e[26]=T):T=e[26];let A;e[27]!==T||e[28]!==j?(A=s.jsxs("div",{className:"flex items-center gap-3",children:[j,T]}),e[27]=T,e[28]=j,e[29]=A):A=e[29];let M;e[30]!==g||e[31]!==t?(M=s.jsx(we,{id:"dark-mode",checked:t,onCheckedChange:g}),e[30]=g,e[31]=t,e[32]=M):M=e[32];let E;e[33]!==A||e[34]!==M?(E=s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/30",children:[A,M]}),e[33]=A,e[34]=M,e[35]=E):E=e[35];let B;e[36]!==n?(B=n&&s.jsxs(Z,{className:"border-primary/50 bg-primary/5",children:[s.jsx(ie,{className:"h-4 w-4 text-primary"}),s.jsx(ee,{children:'You have unsaved changes. Click "Apply Theme" to save your preferences.'})]}),e[36]=n,e[37]=B):B=e[37];let z;e[38]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Your Theme"}),e[38]=z):z=e[38];let G;e[39]===Symbol.for("react.memo_cache_sentinel")?(G=Object.values(pe),e[39]=G):G=e[39];let F;e[40]!==p||e[41]!==t||e[42]!==i?(F=s.jsxs("div",{children:[z,s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(b=>s.jsx(Ce,{theme:b,isSelected:i===b.id,darkMode:t,onClick:()=>p(b.id)},b.id))})]}),e[40]=p,e[41]=t,e[42]=i,e[43]=F):F=e[43];const K=!n;let R;e[44]!==u||e[45]!==K?(R=s.jsx(I,{onClick:u,disabled:K,className:"flex-1",children:"Apply Theme"}),e[44]=u,e[45]=K,e[46]=R):R=e[46];const W=!n;let D;e[47]!==y||e[48]!==W?(D=s.jsx(I,{onClick:y,disabled:W,variant:"outline",children:"Reset"}),e[47]=y,e[48]=W,e[49]=D):D=e[49];let L;e[50]!==R||e[51]!==D?(L=s.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t",children:[R,D]}),e[50]=R,e[51]=D,e[52]=L):L=e[52];let U;e[53]!==E||e[54]!==B||e[55]!==F||e[56]!==L?(U=s.jsxs(O,{children:[N,s.jsxs(H,{className:"space-y-6",children:[E,B,F,L]})]}),e[53]=E,e[54]=B,e[55]=F,e[56]=L,e[57]=U):U=e[57];let Y;e[58]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:s.jsx(ie,{className:"h-5 w-5 text-primary"})}),e[58]=Y):Y=e[58];let q;e[59]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(O,{className:"border-primary/20 bg-primary/5",children:s.jsx(H,{className:"p-6",children:s.jsxs("div",{className:"flex gap-4",children:[Y,s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold",children:"Per-Pet Themes Coming Soon!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Future updates will allow you to customize themes for individual pet pages, including custom background images and unique color schemes for each of your pets."})]})]})})}),e[59]=q):q=e[59];let J;return e[60]!==U?(J=s.jsxs("div",{className:"space-y-6",children:[U,q]}),e[60]=U,e[61]=J):J=e[61],J}const Te=ne({display_name:k().min(1,"Please enter your name").max(80),avatar_url:k().max(500).url("Must be a valid URL").or(re("")).optional(),phone:k().max(15,"Must be at most 15 characters").optional(),share_email:X().optional(),share_phone:X().optional(),share_social_links:X().optional(),instagram:k().max(100).optional(),facebook:k().max(100).optional(),twitter:k().max(100).optional(),telegram:k().max(100).optional(),whatsapp:k().max(20).optional(),website:k().max(200).url("Must be a valid URL").or(re("")).optional()}),Ae=ne({new_password:k().min(8,"At least 8 characters")});function We(){const{user:e,signOut:a}=xe(),{data:r,isLoading:S,update:C}=ge(),{register:i,handleSubmit:l,reset:t,formState:{errors:o,isSubmitting:n}}=se({resolver:ae(Te),defaultValues:{display_name:"",avatar_url:"",phone:"",instagram:"",facebook:"",twitter:"",telegram:"",whatsapp:"",website:""}});$.useEffect(()=>{r&&t({display_name:r.display_name??"",avatar_url:r.avatar_url??"",phone:r.phone??"",share_email:r.share_email??!1,share_phone:r.share_phone??!1,share_social_links:r.share_social_links??!1,instagram:r.instagram??"",facebook:r.facebook??"",twitter:r.twitter??"",telegram:r.telegram??"",whatsapp:r.whatsapp??"",website:r.website??""})},[r,t]);const{register:d,handleSubmit:m,reset:h,formState:{errors:v,isSubmitting:p}}=se({resolver:ae(Ae),defaultValues:{new_password:""}}),x=async c=>{await C.mutateAsync(c)},g=async c=>{const{error:u}=await(await ue(async()=>{const{supabase:f}=await import("./index-CveSHR4s.js").then(y=>y.G);return{supabase:f}},__vite__mapDeps([0,1]),import.meta.url)).supabase.auth.updateUser({password:c.new_password});if(u)throw u;h({new_password:""})};return e?s.jsxs("div",{className:"mx-auto max-w-4xl space-y-6 p-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Account Settings"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your profile, appearance, and security settings"})]}),s.jsxs(be,{defaultValue:"profile",className:"w-full",children:[s.jsxs(ve,{className:"grid w-full grid-cols-2",children:[s.jsx(te,{value:"profile",children:"Profile & Security"}),s.jsx(te,{value:"appearance",children:"Appearance"})]}),s.jsx(le,{value:"profile",className:"space-y-6 mt-6",children:s.jsxs(O,{children:[s.jsxs(ce,{children:[s.jsx(de,{children:"Profile Information"}),s.jsx(me,{children:"Manage your profile and contact details"})]}),s.jsxs(H,{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{children:"Email"}),s.jsx(V,{value:e.email??"",disabled:!0})]}),s.jsx(Q,{}),s.jsxs("form",{onSubmit:l(x),className:"grid gap-6",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"display_name",children:"Display name"}),s.jsx(V,{id:"display_name",placeholder:"Jane Doe",...i("display_name")}),o.display_name&&s.jsx("p",{className:"text-sm text-destructive",children:o.display_name.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"avatar_url",children:"Avatar URL (optional)"}),s.jsx(V,{id:"avatar_url",placeholder:"https://…",...i("avatar_url")}),o.avatar_url&&s.jsx("p",{className:"text-sm text-destructive",children:o.avatar_url.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"phone",children:"Phone number (optional)"}),s.jsx(V,{id:"phone",placeholder:"+1 (555) 123-4567",...i("phone")}),o.phone&&s.jsx("p",{className:"text-sm text-destructive",children:o.phone.message})]}),s.jsx(Q,{}),s.jsx(ke,{register:i,errors:o}),s.jsx(Q,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(_,{className:"text-base font-semibold",children:"Privacy & Sharing"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Control what information is visible when someone scans your pet's QR code"})]}),s.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-primary/20",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",...i("share_email"),id:"share_email",className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(_,{htmlFor:"share_email",className:"cursor-pointer font-medium",children:"Share my email address"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Allow pet finders to contact you via email"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",...i("share_phone"),id:"share_phone",className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(_,{htmlFor:"share_phone",className:"cursor-pointer font-medium",children:"Share my phone number"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Allow pet finders to call or text you"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",...i("share_social_links"),id:"share_social_links",className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(_,{htmlFor:"share_social_links",className:"cursor-pointer font-medium",children:"Share my social media & website links"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Display your social media profiles to pet finders"})]})]})]})]}),C.isError&&s.jsx(Z,{variant:"destructive",children:s.jsx(ee,{children:String(C.error?.message??"Save failed")})}),C.isSuccess&&s.jsx(Z,{children:s.jsx(ee,{children:"Profile updated successfully."})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{type:"submit",disabled:n||S,children:n?"Saving…":"Save changes"}),s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(),children:"Reset"})]})]}),s.jsx(Q,{}),s.jsxs("form",{onSubmit:m(g),className:"grid gap-3",children:[s.jsxs("div",{children:[s.jsx(_,{className:"text-base font-semibold",children:"Change Password"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update your password to keep your account secure"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"new_password",children:"New password"}),s.jsx(V,{id:"new_password",type:"password",placeholder:"••••••••",...d("new_password")}),v.new_password&&s.jsx("p",{className:"text-sm text-destructive",children:v.new_password.message})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(I,{type:"submit",disabled:p,children:p?"Updating…":"Update password"})})]})]}),s.jsxs(ye,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Signed in as ",s.jsx("span",{className:"text-foreground",children:e.email})]}),s.jsx(I,{variant:"ghost",onClick:()=>a(),children:"Sign out"})]})]})}),s.jsx(le,{value:"appearance",className:"mt-6",children:s.jsx(Pe,{})})]})]}):null}export{We as default};
