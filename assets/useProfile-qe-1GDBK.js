import{c as w,u as g,s as q}from"./index-djmkGsBh.js";import{b as h,u as Q,c as S}from"./react-query-CCwEfxX5.js";function T(){const e=w.c(19),{user:t}=g(),f=h(),d=t?.id;let s;e[0]!==d?(s=["profile",d],e[0]=d,e[1]=s):s=e[1];const m=!!t;let r;e[2]!==t?(r=async()=>{const{data:a,error:c}=await q.from("profiles").select("*").eq("id",t.id).maybeSingle();if(c)throw c;return a},e[2]=t,e[3]=r):r=e[3];let l;e[4]!==s||e[5]!==m||e[6]!==r?(l={queryKey:s,enabled:m,queryFn:r,staleTime:3e5,gcTime:18e5},e[4]=s,e[5]=m,e[6]=r,e[7]=l):l=e[7];const p=Q(l);let i;e[8]!==t?(i=async a=>{const{data:c,error:b}=await q.from("profiles").upsert({id:t.id,...a}).select().maybeSingle();if(b)throw b;return c},e[8]=t,e[9]=i):i=e[9];let o;e[10]!==f||e[11]!==t?.id?(o=a=>f.setQueryData(["profile",t?.id],a),e[10]=f,e[11]=t?.id,e[12]=o):o=e[12];let u;e[13]!==i||e[14]!==o?(u={mutationFn:i,onSuccess:o},e[13]=i,e[14]=o,e[15]=u):u=e[15];const y=S(u);let n;return e[16]!==p||e[17]!==y?(n={...p,update:y},e[16]=p,e[17]=y,e[18]=n):n=e[18],n}export{T as u};
