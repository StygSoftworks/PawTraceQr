import{c as ee,u as se,f as te,a as O,j as s,L as ae}from"./index-DU0PUxJ_.js";import{a as le,u as ie,o as re,s as J}from"./zod-CUPyinTs.js";import{B as me}from"./button-zycxiWQ6.js";import{I as T,L as U}from"./label-7zp_V1fL.js";import{a as ne,b as oe,d as ce,e as de,C as fe}from"./card-CkPsRPVM.js";import{A as Q,a as X}from"./alert-Br4aN_sX.js";import"./index-DZPIF1VM.js";const he=re({name:J().min(1,"Please enter your name").max(80),email:J().email("Enter a valid email"),password:J().min(8,"Password must be at least 8 characters"),confirm:J().min(8,"Please confirm your password")}).refine(e=>e.password===e.confirm,{path:["confirm"],message:"Passwords do not match"});function Se(){const e=ee.c(69),{signUpWithEmail:V}=se(),$=te(),[C,M]=O.useState(null),[E,Y]=O.useState(null);let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F={resolver:le(he),defaultValues:{name:"",email:"",password:"",confirm:""}},e[0]=F):F=e[0];const{register:a,handleSubmit:q,formState:Z}=ie(F),{errors:t,isSubmitting:P}=Z;let A;e[1]!==$||e[2]!==V?(A=async H=>{M(null);try{const{needsEmailConfirm:K}=await V(H.email,H.password,H.name);K?Y(H.email):$("/account",{replace:!0})}catch(K){M(K?.message??"Sign up failed")}},e[1]=$,e[2]=V,e[3]=A):A=e[3];const z=A;let L;e[4]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(ne,{children:s.jsx(oe,{children:"Create your account"})}),e[4]=L):L=e[4];let l;e[5]!==E?(l=E&&s.jsx(Q,{className:"mb-4",children:s.jsxs(X,{children:["We sent a confirmation link to ",s.jsx("b",{children:E}),". Please verify your email to finish creating your account."]})}),e[5]=E,e[6]=l):l=e[6];let i;e[7]!==C?(i=C&&s.jsx(Q,{className:"mb-4",variant:"destructive",children:s.jsx(X,{children:C})}),e[7]=C,e[8]=i):i=e[8];let r;e[9]!==q||e[10]!==z?(r=q(z),e[9]=q,e[10]=z,e[11]=r):r=e[11];let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(U,{htmlFor:"name",children:"Name"}),e[12]=R):R=e[12];let m;e[13]!==a?(m=a("name"),e[13]=a,e[14]=m):m=e[14];let n;e[15]!==m?(n=s.jsx(T,{id:"name",placeholder:"Jane Doe",...m}),e[15]=m,e[16]=n):n=e[16];let o;e[17]!==t.name?(o=t.name&&s.jsx("p",{className:"text-sm text-destructive",children:t.name.message}),e[17]=t.name,e[18]=o):o=e[18];let c;e[19]!==o||e[20]!==n?(c=s.jsxs("div",{className:"grid gap-2",children:[R,n,o]}),e[19]=o,e[20]=n,e[21]=c):c=e[21];let k;e[22]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(U,{htmlFor:"email",children:"Email"}),e[22]=k):k=e[22];let d;e[23]!==a?(d=a("email"),e[23]=a,e[24]=d):d=e[24];let f;e[25]!==d?(f=s.jsx(T,{id:"email",type:"email",placeholder:"you@example.com",...d}),e[25]=d,e[26]=f):f=e[26];let h;e[27]!==t.email?(h=t.email&&s.jsx("p",{className:"text-sm text-destructive",children:t.email.message}),e[27]=t.email,e[28]=h):h=e[28];let p;e[29]!==f||e[30]!==h?(p=s.jsxs("div",{className:"grid gap-2",children:[k,f,h]}),e[29]=f,e[30]=h,e[31]=p):p=e[31];let B;e[32]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(U,{htmlFor:"password",children:"Password"}),e[32]=B):B=e[32];let x;e[33]!==a?(x=a("password"),e[33]=a,e[34]=x):x=e[34];let u;e[35]!==x?(u=s.jsx(T,{id:"password",type:"password",placeholder:"••••••••",...x}),e[35]=x,e[36]=u):u=e[36];let j;e[37]!==t.password?(j=t.password&&s.jsx("p",{className:"text-sm text-destructive",children:t.password.message}),e[37]=t.password,e[38]=j):j=e[38];let g;e[39]!==u||e[40]!==j?(g=s.jsxs("div",{className:"grid gap-2",children:[B,u,j]}),e[39]=u,e[40]=j,e[41]=g):g=e[41];let D;e[42]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(U,{htmlFor:"confirm",children:"Confirm password"}),e[42]=D):D=e[42];let y;e[43]!==a?(y=a("confirm"),e[43]=a,e[44]=y):y=e[44];let w;e[45]!==y?(w=s.jsx(T,{id:"confirm",type:"password",placeholder:"••••••••",...y}),e[45]=y,e[46]=w):w=e[46];let b;e[47]!==t.confirm?(b=t.confirm&&s.jsx("p",{className:"text-sm text-destructive",children:t.confirm.message}),e[47]=t.confirm,e[48]=b):b=e[48];let S;e[49]!==w||e[50]!==b?(S=s.jsxs("div",{className:"grid gap-2",children:[D,w,b]}),e[49]=w,e[50]=b,e[51]=S):S=e[51];const G=P?"Creating...":"Create account";let N;e[52]!==P||e[53]!==G?(N=s.jsx(me,{type:"submit",disabled:P,children:G}),e[52]=P,e[53]=G,e[54]=N):N=e[54];let v;e[55]!==c||e[56]!==p||e[57]!==g||e[58]!==S||e[59]!==N||e[60]!==r?(v=s.jsxs("form",{onSubmit:r,className:"grid gap-4",children:[c,p,g,S,N]}),e[55]=c,e[56]=p,e[57]=g,e[58]=S,e[59]=N,e[60]=r,e[61]=v):v=e[61];let _;e[62]!==v||e[63]!==l||e[64]!==i?(_=s.jsxs(ce,{children:[l,i,v]}),e[62]=v,e[63]=l,e[64]=i,e[65]=_):_=e[65];let I;e[66]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsxs(de,{className:"justify-between text-sm text-muted-foreground",children:[s.jsx("span",{children:"Already have an account?"}),s.jsx(ae,{to:"/signin",className:"text-primary hover:underline",children:"Sign in"})]}),e[66]=I):I=e[66];let W;return e[67]!==_?(W=s.jsx("div",{className:"flex justify-center",children:s.jsxs(fe,{className:"w-full max-w-md",children:[L,_,I]})}),e[67]=_,e[68]=W):W=e[68],W}export{Se as default};
