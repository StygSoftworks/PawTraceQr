import{c as v,m as w,j as e,s as y}from"./index-BVOeH8As.js";import{u as $}from"./useQuery-Dlm53PxK.js";import{C as u,a as p,b as j,c as g,d as N}from"./card-DrMiz69X.js";import{S as c,B as d}from"./skeleton-CPVKzabX.js";import{B as _}from"./button-DZOZdsrp.js";import{L as C}from"./Logo-asMei3qH.js";function M(s){if(!s)return"";const a=new Date(s).getTime(),o=Date.now();if(isNaN(a)||o<=a)return"just now";const l=o-a,i=Math.floor(l/(1e3*60)),t=Math.floor(i/60),r=Math.floor(t/24);if(r>0){const n=t%24;return`${r} day${r>1?"s":""}${n?`, ${n} hour${n>1?"s":""}`:""}`}if(t>0){const n=i%60;return`${t} hour${t>1?"s":""}${n?`, ${n} min`:""}`}return`${i} min`}function z(){const s=v.c(13),{id:a}=w();let o;s[0]!==a?(o=["public-pet",a],s[0]=a,s[1]=o):o=s[1];const l=!!a;let i;s[2]!==a?(i=async()=>{const{data:b,error:f}=await y.from("public_pets").select("*").eq("short_id",a).maybeSingle();if(f)throw f;return b},s[2]=a,s[3]=i):i=s[3];let t;s[4]!==o||s[5]!==l||s[6]!==i?(t={queryKey:o,enabled:l,queryFn:i,staleTime:6e4},s[4]=o,s[5]=l,s[6]=i,s[7]=t):t=s[7];const{data:r,isLoading:n,isError:h}=$(t);let m;s[8]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx("header",{className:"sticky top-0 z-30 border-b bg-background/70 backdrop-blur",children:e.jsx("div",{className:"mx-auto flex h-14 max-w-4xl items-center justify-between px-4",children:e.jsx(C,{})})}),s[8]=m):m=s[8];let x;return s[9]!==r||s[10]!==h||s[11]!==n?(x=e.jsxs("div",{className:"min-h-svh bg-background text-foreground",children:[m,e.jsx("main",{className:"mx-auto max-w-4xl p-4 md:p-6",children:n?e.jsx(u,{className:"overflow-hidden",children:e.jsxs("div",{className:"grid gap-4 p-4 md:grid-cols-[240px,1fr]",children:[e.jsx(c,{className:"h-48 w-full"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(c,{className:"h-6 w-40"}),e.jsx(c,{className:"h-4 w-56"}),e.jsx(c,{className:"h-4 w-48"}),e.jsx(c,{className:"h-4 w-72"})]})]})}):h||!r?e.jsxs(u,{children:[e.jsxs(p,{children:[e.jsx(j,{children:"Pet not found"}),e.jsx(g,{children:"The QR link is invalid or this pet is no longer available."})]}),e.jsx(N,{children:e.jsx(_,{asChild:!0,children:e.jsx("a",{href:"/",children:"Go to homepage"})})})]}):e.jsxs(u,{className:"overflow-hidden",children:[e.jsxs(p,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs(j,{className:"flex items-center gap-3",children:[e.jsx("span",{className:"truncate",children:r.name}),r.missing?e.jsx(d,{variant:"destructive",children:"Missing"}):e.jsx(d,{variant:"success",children:"Not Missing"})]}),e.jsxs(g,{className:"flex flex-wrap items-center gap-2",children:[e.jsx(d,{variant:"secondary",className:"capitalize",children:r.species}),r.breed&&e.jsx(d,{variant:"outline",children:r.breed}),r.color&&e.jsx(d,{variant:"outline",children:r.color}),r.missing&&r.missing_since&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Missing for ",M(r.missing_since)]})]})]}),e.jsxs(N,{className:"grid gap-4 md:grid-cols-[280px,1fr]",children:[r.photo_url?e.jsx("img",{src:r.photo_url,alt:`${r.name} photo`,className:"h-64 w-full rounded-md object-cover border bg-white",loading:"lazy"}):e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-md border text-sm text-muted-foreground",children:"No photo provided"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"About"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description||"No description provided."})]})})]})]})})]}),s[9]=r,s[10]=h,s[11]=n,s[12]=x):x=s[12],x}export{z as default};
