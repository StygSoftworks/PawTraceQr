import{c as w,u as g,d as h,s as b}from"./index-BcI6ss1N.js";import{u as Q}from"./useQuery-oi4L40_n.js";import{u as S}from"./separator-BG74ahMW.js";function _(){const e=w.c(19),{user:t}=g(),f=h(),m=t?.id;let s;e[0]!==m?(s=["profile",m],e[0]=m,e[1]=s):s=e[1];const d=!!t;let r;e[2]!==t?(r=async()=>{const{data:a,error:c}=await b.from("profiles").select("*").eq("id",t.id).maybeSingle();if(c)throw c;return a},e[2]=t,e[3]=r):r=e[3];let u;e[4]!==s||e[5]!==d||e[6]!==r?(u={queryKey:s,enabled:d,queryFn:r,staleTime:3e5,gcTime:18e5},e[4]=s,e[5]=d,e[6]=r,e[7]=u):u=e[7];const p=Q(u);let i;e[8]!==t?(i=async a=>{const{data:c,error:q}=await b.from("profiles").upsert({id:t.id,...a}).select().maybeSingle();if(q)throw q;return c},e[8]=t,e[9]=i):i=e[9];let o;e[10]!==f||e[11]!==t?.id?(o=a=>f.setQueryData(["profile",t?.id],a),e[10]=f,e[11]=t?.id,e[12]=o):o=e[12];let l;e[13]!==i||e[14]!==o?(l={mutationFn:i,onSuccess:o},e[13]=i,e[14]=o,e[15]=l):l=e[15];const y=S(l);let n;return e[16]!==p||e[17]!==y?(n={...p,update:y},e[16]=p,e[17]=y,e[18]=n):n=e[18],n}export{_ as u};
