import{c as r}from"./createLucideIcon-YUNKGbtX.js";import{s}from"./index-D0W7q_7F.js";const i=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],f=r("clock",i);const d=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],h=r("external-link",d);const _=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],g=r("map-pin",_);async function m(a,c=7){const o=new Date(Date.now()-c*864e5).toISOString(),{data:t,error:n}=await s.from("scan_events").select(`
      id, pet_id, short_id, scanned_at, referrer, city, region, country, lat, lng,
      pets!inner ( id, name, owner_id )
    `).gte("scanned_at",o).order("scanned_at",{ascending:!1});if(n)throw n;return(t??[]).filter(e=>e.pets?.owner_id===a).map(e=>({id:e.id,pet_id:e.pet_id,short_id:e.short_id,scanned_at:e.scanned_at,referrer:e.referrer,city:e.city,region:e.region,country:e.country,lat:e.lat,lng:e.lng,pet_name:e.pets.name}))}async function w(a,c=30){const o=new Date(Date.now()-c*864e5).toISOString(),{error:t,count:n}=await s.from("scan_events").select("id",{count:"exact",head:!0}).eq("pet_id",a).gte("scanned_at",o);if(t)throw t;return n??0}export{f as C,h as E,g as M,w as c,m as l};
